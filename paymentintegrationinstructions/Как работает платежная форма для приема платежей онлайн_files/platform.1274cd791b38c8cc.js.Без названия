!function(){var e,t,r,n,o,s={35595:function(e){e.exports={}},84788:function(e){e.exports={}},70267:function(e){e.exports={flex:"adlZIm",hidden:"bdlZIm"}},90319:function(e){e.exports={layout_wrapper:"a6flzV"}},15320:function(e){e.exports={figure:"a3FVWD",img:"b3FVWD",caption:"c3FVWD",imageFigure:"d3FVWD",zoom:"e3FVWD",youtubeContainer:"f3FVWD",youtube:"g3FVWD",cycled:"h3FVWD",backgroundLayer:"i3FVWD"}},9847:function(e){e.exports={highlighted:"avAaK2",highlight:"bvAaK2"}},42462:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case d:case s:case a:case i:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case m:case c:return e;default:return t}}case o:return t}}}function S(e){return E(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=v,t.Memo=m,t.Portal=o,t.Profiler=a,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||E(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===u},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return E(e)===p},t.isFragment=function(e){return E(e)===s},t.isLazy=function(e){return E(e)===v},t.isMemo=function(e){return E(e)===m},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===a},t.isStrictMode=function(e){return E(e)===i},t.isSuspense=function(e){return E(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===i||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=E},7047:function(e,t,r){"use strict";e.exports=r(42462)},95926:function(e,t,r){"use strict";let n;function o(){return n||(n=function(){if("undefined"!=typeof navigator){const e=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/,t=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/,r=navigator.userAgent.toLowerCase();return r.match(e)?"tablet":r.match(t)?"mobile":"desktop"}}()),n}r.d(t,{l:function(){return o}})},52248:function(e,t,r){"use strict";function n(){return Boolean("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch)}r.d(t,{b:function(){return n}})},99068:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(20986),o=r(44121),s=r.n(o),i=r(12098),a=r.n(i),c=r(95926),u=r(52248);const l={isPhone:window.matchMedia(`(max-width: ${a().PHONE}px)`),isTablet:window.matchMedia(`(min-width: ${a().TABLETS}px)`),isDesktop:window.matchMedia(`(min-width: ${a().DESKTOP}px)`),isDesktopS:window.matchMedia(`(min-width: ${a().DESKTOP_SMALL}px)`),isDesktopMd:window.matchMedia(`(min-width: ${a().DESKTOP_MD}px)`),isDesktopM:window.matchMedia(`(min-width: ${a().DESKTOP_MEDIUM}px)`),isDesktopL:window.matchMedia(`(min-width: ${a().DESKTOP_LARGE}px)`),isDesktopXL:window.matchMedia(`(min-width: ${a().DESKTOP_EXTRA_LARGE}px)`),isRetina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)")},d=(()=>{let e={};const t=[];return Object.keys(l).forEach((r=>{const o=r;e[o]=l[o].matches,l[o].addListener((r=>function(r,o){e=(0,n.Z)({},e,{[r]:o}),function(){for(let e=0;e<t.length;e++)(0,t[e])()}()}(o,r.matches)))})),{getState:function(){return e},getDeviceType:c.l,subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);t.splice(r,1)}}}})(),p=()=>e=>{const t=e.displayName||e.name;class r extends s().Component{constructor(e){super(e),this.updateMedia=()=>{d&&this.setState({media:d.getState()})},this.isTouch=void 0,this.subscribe=void 0,this.state={media:{},deviceType:(0,c.l)()},this.isTouch=!1,this.subscribe=()=>{}}componentDidMount(){this.isTouch=(0,u.b)(),d&&(this.subscribe=d.subscribe(this.updateMedia)),this.updateMedia()}componentWillUnmount(){this.subscribe()}render(){const{media:t,deviceType:r}=this.state;return s().createElement(e,Object.assign({},this.props,{media:t,deviceType:r,isTouch:this.isTouch}))}}return r.displayName=`MediaInfo(${t})`,r.defaultProps=e.defaultProps,r}},62432:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTrackingEvents=t.sendEvent=t.techSendEvent=t.makeEvent=void 0;const n=r(80476).__importDefault(r(48945)),o=r(85176),s=(0,n.default)("analytics:tracking");function i(e,t){let r;try{r=new CustomEvent(e,{detail:t,bubbles:!0})}catch(n){r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!1,t)}return r}function a(e,t,r=document.body){let n=r;return(0,o.isConnected)(r)||(t.originalTarget=r,n=document.body),null!==n&&(n.dispatchEvent(i(e,t)),!0)}function c(e,t,r=document.body){a(e,t,r)&&s.info("Dispatched event:",e,t)}t.makeEvent=i,t.techSendEvent=a,t.sendEvent=c,t.BlocksTrackingEvents=class{constructor(e,t,r){this._eventea=e,this._tree=t,this._trackingOptions=r}trackBlock(e,t,r){const n=this._tree.traverseBlockTarget(e);if(n){const{guid:o,payload:s}=n;if(!this._tree.isActiveTracking(o))return;const i={...r,...s};this.sendEvent(t,i,e)}}sendEvent(e,t,r){this._eventea&&!this._trackingOptions.disableEventea?this._eventea.send({project:"boxy",event:e,payload:t}):c(e,t,r)}}},15306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476),o=n.__importStar(r(44121)),s=n.__importDefault(r(42622)),i=["flags"];t.default=function(e){return t=>{const r=(0,o.useMemo)((()=>{var e,r,n,o;const i=new s.default({options:null!==(e=t.trackingOptions)&&void 0!==e?e:null===(r=t.dival)||void 0===r?void 0:r.trackingOptions,eventea:null!==(n=t.eventea)&&void 0!==n?n:null===(o=t.dival)||void 0===o?void 0:o.eventea});return i.setTree(t.tree),i}),[]);(0,o.useEffect)((()=>(r.mount(),r.unmount)),[]);const n={...t.dival,blocksTrackingFeatures:i};return o.default.createElement(e,{...t,dival:n,saveDomRef:(e,n)=>(t.saveDomRef&&t.saveDomRef(e,n),r.registerElement(e,n))})}}},86905:function(e,t,r){"use strict";const n=r(80476),o=n.__importDefault(r(64315)),s=n.__importDefault(r(15306));t.Z=(0,s.default)(o.default)},19231:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIST_SCHEMA_KEYS=void 0,t.LIST_SCHEMA_KEYS=["slideList","slides","panels","panelList","banners"];class r{constructor(e=[],t){this.segments=e,this.noImpressions=(null==t?void 0:t.noImpressions)||!1,this.hasListKey=(null==t?void 0:t.hasListKey)||!1}get length(){return this.segments.length}get(e){return this.segments[e]}getAsNumber(e){const t=this.segments[e],r=parseInt(t);if(isFinite(r))return r}asNumber(){if(1===this.length)return this.getAsNumber(0)}getListKey(){if(this.hasListKey)return this.segments[0]}toString(){return this.segments.join(".")}concat(e){const t=[...this.segments,...e.segments],n=this.length?this.hasListKey:e.hasListKey;return new r(t,{noImpressions:this.noImpressions||e.noImpressions,hasListKey:n})}static parseString(e=""){const[n,...o]=e.split("|"),s=n.split(".").filter((e=>e.length)),i={noImpressions:!1,hasListKey:s.reduce(((e,r)=>e||-1!==t.LIST_SCHEMA_KEYS.indexOf(r)),!1)};return o.forEach((e=>{var t,n;return null===(n=(t=r.flagHandlersMap)[e])||void 0===n?void 0:n.call(t,{segments:s,options:i})})),new r(s,i)}}t.default=r,r.flagHandlersMap={noimp:({options:e})=>{e.noImpressions=!0},lst:({options:e})=>{e.hasListKey=!0},nolst:({options:e})=>{e.hasListKey=!1}}},42622:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LOCAL_KEYS=t.DEFAULT_IMPRESSION_DELAY=t.DEFAULT_IMPRESSION_BATCH_DELAY=t.CLICK_DEDUP_KEY=t.DelayedActionType=void 0;const n=r(80476),o=n.__importDefault(r(48945)),s=n.__importStar(r(19231)),i=r(59416),a=r(62432),c=r(63640),u=r(85176);var l;!function(e){e[e.Negative=0]="Negative",e[e.Positive=1]="Positive"}(l=t.DelayedActionType||(t.DelayedActionType={}));const d=(0,o.default)("boxy:blocks-tracking");t.CLICK_DEDUP_KEY="dedup_click",t.DEFAULT_IMPRESSION_BATCH_DELAY=300,t.DEFAULT_IMPRESSION_DELAY=100,t.DEFAULT_LOCAL_KEYS=["itemType","itemName"];const p=Array.prototype.forEach;let h=(e,t={})=>"undefined"!=typeof IntersectionObserver?new IntersectionObserver(e,{root:null,...t}):(console.warn("IntersectionObserver feature not supported!"),h=()=>null,null);function f(e,t){for(let r=e.parentElement;r;r=r.parentElement)if(r.dataset&&t.some((e=>null==r?void 0:r.dataset[e])))return r}function m(e,t){e.unobserve(t),e.observe(t)}function v(e,t){return Array.prototype.find.call(e,t)}function g(e){if(!(0,u.isConnected)(e))return!1;const t=getComputedStyle(e);return"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}t.default=class{constructor(e={}){this._elemsMutObserver=null,this._elementsMap={},this._recheckQueue=[],this._delayedActions={},this._trackedAsVisibleMap={},this._elemsSeenTimings={},this.mount=()=>{d.info("mount"),document.addEventListener("mousedown",this.handleMouseDown,!0),document.addEventListener("visibilitychange",this.handlePageVisChange)},this.unmount=()=>{d.info("umount"),this.elemsInObserver&&this.elemsInObserver.disconnect(),document.removeEventListener("visibilitychange",this.handlePageVisChange),document.removeEventListener("mousedown",this.handleMouseDown,!0),Object.keys(this._delayedActions).forEach((e=>{var t;clearTimeout(null===(t=this._delayedActions[e])||void 0===t?void 0:t.actionTimeout)})),this._delayedActions={}},this.handleMouseDown=e=>{this._events.trackBlock(function(e){const t=function(e,t){try{return"elementsFromPoint"in document?document.elementsFromPoint(e,t):"msElementsFromPoint"in document?document.msElementsFromPoint(e,t):null}catch(e){return null}}(e.clientX,e.clientY)||[],r=e.target||void 0,n=v(t,(e=>e instanceof HTMLElement&&!!e.dataset.guid));return n&&v(t,(e=>e instanceof HTMLElement&&(!!e.dataset.schemaPath||e===n)||e instanceof Node&&!n.contains(e)))||r}(e)||document.body,"blockClick",{itemType:"block"})},this.handleElemsIntersection=e=>{document.hidden?e.forEach((e=>{this._recheckQueue.push(e.target)})):e.forEach((e=>{const t=g(e.target),r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString(),o=`seen_${n}`;e.intersectionRatio>=this._trackingOptions.elemsIntersectionThreshold&&t?this.cancelableDelayedAction(o,l.Positive,(()=>{this._trackedAsVisibleMap[n]||(this._trackedAsVisibleMap[n]=!0,this._elemsSeenTimings[n]=Date.now(),this._events.trackBlock(e.target,"blockImpressionIn",{itemType:"block"}))}),this._trackingOptions.elemsImpressionDelay):this.cancelableDelayedAction(o,l.Negative,(()=>{if(this._trackedAsVisibleMap[n]){this._trackedAsVisibleMap[n]=!1;const t=n in this._elemsSeenTimings?Date.now()-this._elemsSeenTimings[n]:0;this._events.trackBlock(e.target,"blockImpressionOut",{itemType:"block",componentTime:t})}}),this._trackingOptions.elemsImpressionDelay)}))},this.handlePageVisChange=()=>{const{elemsInObserver:e}=this;!document.hidden&&this._recheckQueue.length>0&&e&&(this._recheckQueue.forEach((t=>{m(e,t)})),this._recheckQueue=[])},this.handleElemsMutation=e=>{const{elemsInObserver:t}=this;t&&e.forEach((e=>{const r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString();var o;this._trackedAsVisibleMap[n]||(o=e.target,g(o)?Promise.resolve(!0):new Promise((e=>{setTimeout((()=>{e(g(o))}),350)}))).then((r=>{r&&t&&m(t,e.target)}))}))};const{options:r={},eventea:n}=e;this._trackingOptions={elemsIntersectionThreshold:.4,elemsImpressionDelay:t.DEFAULT_IMPRESSION_DELAY,impressionBatchDelay:t.DEFAULT_IMPRESSION_BATCH_DELAY,localKeys:t.DEFAULT_LOCAL_KEYS,disableEventea:!1,...r},this._tree=new i.BlocksTree(this._trackingOptions),this._events=new a.BlocksTrackingEvents(n||null,this._tree,this._trackingOptions)}setTree(e){e&&this._tree.setPageMakerTree(e)}get elemsInObserver(){return void 0===this._elemsInObserver&&(this._elemsInObserver=h(this.handleElemsIntersection,{threshold:this._trackingOptions.elemsIntersectionThreshold})),this._elemsInObserver}get elemsMutObserver(){return void 0===this._elemsMutObserver&&(this._elemsMutObserver=new MutationObserver(this.handleElemsMutation)),this._elemsMutObserver}registerElement(e,t){if(null!==t)if(t instanceof HTMLElement){if(t!==this._elementsMap[e]&&this._elementsMap[e]&&this.unregisterElement(e),this.attachInfoDataAttrsToElement(e,t),t.dataset.guid=e,!this._tree.isActiveTracking(e))return;d.info({event:"attach",guid:e}),p.call(t.querySelectorAll("[data-eye-target]"),(e=>{this.observeElem(e)})),this.getListElements(e,t).forEach((e=>{this.observeElem(e)})),this._elementsMap[e]=t}else d.warn(`Couldn't find dom node for ${e}`)}unregisterElement(e){var t;const r=this._elementsMap[e];r instanceof HTMLElement&&(delete r.dataset.guid,delete this._elementsMap[e],null===(t=this._elemsInObserver)||void 0===t||t.unobserve(r))}getListElements(e,t){if(!this._tree.hasBlockInfo(e))return[];const r=[t].concat(Array.from(t.querySelectorAll("[data-schema-path]"))).map((e=>({elem:e,schemaPath:s.default.parseString(e.dataset.schemaPath)}))).filter((({schemaPath:e})=>e.hasListKey));if(0===r.length)return[t];const n=r.find((({schemaPath:e})=>1===e.length));if(n){const{elem:e}=n,t=[];return p.call(e.querySelectorAll("[data-schema-path]"),(r=>{if(!(r instanceof HTMLElement))return;const n=s.default.parseString(r.dataset.schemaPath);n.noImpressions||void 0===n.asNumber()||f(r,["schemaPath"])!==e||t.push(r)})),t}return r.reduce(((e,{elem:r,schemaPath:n})=>{if(!n.noImpressions&&f(r,["schemPath","guid"])===t){if(n.length>2||void 0===n.getAsNumber(1))throw new Error(`data-schema-path, that contain list keys (${s.LIST_SCHEMA_KEYS}), have to look like '${n.getListKey()}}' or \`${n.getListKey()}.\${index}\``);e.push(r)}return e}),[])}observeElem(e){var t,r;d.info({event:"attach to elem",element:e}),null===(t=this.elemsInObserver)||void 0===t||t.observe(e),null===(r=this.elemsMutObserver)||void 0===r||r.observe(e,{childList:!1,attributes:!0,subtree:!1})}attachInfoDataAttrsToElement(e,t){try{if(localStorage.getItem("set-page-maker-data-attrs")){const{type:r,version:n,render:o}=this._tree.getBlockInfo(e).block;t.dataset.type=r,t.dataset.schemaVersion=String(n),t.dataset.render=JSON.stringify(o)}}catch(e){}}cancelableDelayedAction(e,t,r,n){if(0===n)(0,c.requestIdleCallbackWithDuration)((()=>r.call(this)));else{const o=this._delayedActions[e];o&&(delete this._delayedActions[e],clearTimeout(o.actionTimeout)),o&&o.actionType!==t||(this._delayedActions[e]={actionType:t,actionTimeout:setTimeout((()=>{delete this._delayedActions[e],(0,c.requestIdleCallbackWithDuration)((()=>r.call(this)))}),n)})}}}},59416:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTree=void 0;const n=r(80476).__importDefault(r(19231)),o={active:!1},s={localKeys:["itemType","itemName"]};function i(e,t,r){const n=Object.keys(t);for(const o of n)r(o,t[o])&&(e[o]=t[o]);return e}t.BlocksTree=class{constructor(e={}){this._traversedTargets=new WeakMap,this._blocksTrackingMeta={},this._blocksTrackingData={},this._opts=Object.assign(s,e)}setPageMakerTree(e){const t={},r=(e,n=[])=>{t[e.id]={block:e,pagePosition:n.join(".")},Array.isArray(e.content)&&e.content.forEach(((e,t)=>r(e,[...n,t+1])))};r(e),this._blocksRegistry=t}hasBlockInfo(e){return!!this._blocksRegistry&&e in this._blocksRegistry}getBlockInfo(e){if(this._blocksRegistry)return this._blocksRegistry[e]}doCollect(e,t,r=[]){if(!this._blocksRegistry||!this._blocksRegistry[e])return;const n=t.length,o=this.getBlockPayload(e),s=this._blocksRegistry[e].block.properties||{},a=t.getListKey();let c;if(a)if(c=s[a].filter((e=>!1!==e.active)),c.length>1){const e=s.panelProps||s.slideProps;e&&e.type&&"row"===e.type.substr(0,3)?o.view="row":o.view="slider"}else o.view="default";let u=s;s&&s.analytics&&Object.assign(o,s.analytics);let l,d,p=-1,h=!1,f=!1;for(let e=0;e<t.length;e++){const m=t.get(e);if(h=e==n-1,u=u[m],!u)throw new Error(`Connection with block schema is broken, is data-schema-path missed? path=${t}, error-at=${m}`);if(-1!==p){l=d="card";const r=t.getAsNumber(e);a&&!f&&void 0!==r&&(f=!0,o.componentMaxPosition=c.length,o.componentPosition=r+1-s[a].slice(0,r).filter((e=>!1===e.active)).length,u.productName&&(o.componentProductName=u.productName),u.productCategory&&(o.componentProductCategory=u.productCategory))}const v=e=>!!h||-1===this._opts.localKeys.indexOf(e);i(o,r[e],v),u.analytics&&i(o,u.analytics,v),t.getListKey()===m&&(p=e)}if(t.length>0){const e=!a||-1!==p&&n-1-p>=2;if(!o.itemType){const r=e?t.get(n-1):l;r&&(o.itemType=r)}if(!o.itemName){let t;e||o.itemType!==l||(t=d),e&&(t=u.title||u.text),"string"==typeof t&&(o.itemName=t)}}return{guid:e,payload:o}}traverseBlockTarget(e){const t=this.getTargetDesc(e);if(t)return this.doCollect(t.guid,t.schemaPath,t.payloadVector)}getTargetDesc(e){if(e){if(!this._traversedTargets)return this.traverseTargetDesc(e);if(!this._traversedTargets.has(e)){const t=this.traverseTargetDesc(e);this._traversedTargets.set(e,t)}return this._traversedTargets.get(e)}}traverseTargetDesc(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return;const t=[];let r=new n.default,o={};for(let s=e;s;s=s.parentElement){const e=s.dataset;if(e){if(e.schemaPath){r.length&&t.unshift(o),o={};const s=n.default.parseString(e.schemaPath);r=s.concat(r);let i=s.length;for(;i-- >1;)t.unshift({})}if(0!==r.length){if(e.aData)try{Object.assign(o,JSON.parse(e.aData),o)}catch(e){}for(const t of["itemType","itemName"])e[t]&&!o[t]&&(o[t]=e[t])}const s=e.guid;if(s)return r.length&&t.unshift(o),{guid:s,schemaPath:r,payloadVector:t}}}}getTrackingData(e){if(!this._blocksRegistry)throw new Error("blocksRegistry is not ready");if(!this._blocksTrackingMeta[e]){const t=this._blocksRegistry[e];if(!t)return o;const{block:r}=t,n=((r.meta||{}).analytics||{}).tracking||{active:!0};this._blocksTrackingMeta[e]=n}return this._blocksTrackingMeta[e]}getBlockPayload(e){const{_blocksRegistry:t}=this;if(!t)throw new Error("blocksRegistry is not ready");const r=this.getTrackingData(e),n=t[e];if(!n)throw new Error(`No metadata found for block ${e}`);const{block:o,pagePosition:s}=n,i=r.trackingName||`${o.type}_${o.id}`;return{...this._blocksTrackingData[e],type:o.type,name:i,pagePosition:s,componentPosition:1,componentMaxPosition:1}}isActiveTracking(e){return this.getTrackingData(e).active||function(){try{if("true"===localStorage.getItem("page_tracking_force_enabled"))return!0}catch(e){}return!1}()}}},63640:function(e,t){"use strict";function r(e,t){if("function"==typeof window.requestIdleCallback)return window.requestIdleCallback(e,t);const r=Date.now();return window.setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-r))})}),1)}Object.defineProperty(t,"__esModule",{value:!0}),t.requestIdleCallbackWithDuration=t.safeCancelIdleCallback=t.safeRequestIdleCallback=void 0,t.safeRequestIdleCallback=r,t.safeCancelIdleCallback=function(e){return window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e)};t.requestIdleCallbackWithDuration=function(e,t){const n=function(e){return Math.min(e||10,50)}(null==t?void 0:t.duration),o=()=>{r((t=>{if(t.timeRemaining()<n&&!t.didTimeout)return o();e(t)}),t)};o()}},85176:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConnected=void 0,t.isConnected=function(e){return!(e instanceof Node)||(void 0!==e.isConnected?e.isConnected:!((e.ownerDocument||document).compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED))}},91232:function(e,t,r){"use strict";t._q=function(e,t,r={}){const{runInfo:i,cacheHash:a}=r;return Object.keys(e).reduce(((r,c)=>({...r,[c]:Object.keys(e[c]).reduce(((r,u)=>{const l=e[c][u];let d;if("clientJs"in l)d=l;else{const{npmVersion:e,...r}=l;let u="";if(!1===(null==i?void 0:i.flags.omitNamespace)){const e=i.blocks.find((e=>(0,o.toBlockName)(e.name)===c));if(!e)throw new Error(`Block ${c} not found in runInfo.blocks`);e.name.startsWith("@")&&(u=`/${e.name.split("/")[0]}`)}d={...r,...s({mifName:(0,n.kebabize)(c),npmVersion:l.npmVersion},t+u,{cacheHash:a})}}return{...r,[u]:d}}),{})})),{})};const n=r(49068),o=r(34780);function s({mifName:e,npmVersion:t},r,{cacheHash:n}={}){const o=`${r}/${e}/${t}/${e}`,s=n?`?cache_hash=${n}`:"";return{clientJs:`${o}.client.js${s}`,serverJs:`${o}.server.js${s}`,css:`${o}.css${s}`}}},52493:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}},89938:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.kebabize=t.camelize=t.FIRST_ID=void 0,t.traverseTree=i,t.mapTree=a,t.asTree=function e(r,n=0){if("string"==typeof r)return e({id:r});if(Array.isArray(r)&&"string"==typeof r[0]){const t=r.map((t=>e({id:t})));return e(t)}const s=r;let i=n;return Array.isArray(s)?e({type:"fragment",content:s}):a(r,(e=>{var r,n;let s=e.id;if(!s){const e=i>0?`-${String(i)}`:"";s=`${t.FIRST_ID}${e}`,i++}return{id:s,type:(0,o.default)(null!=(r=e.type)?r:"as-tree-generated-type"),version:null!=(n=e.version)?n:"AS_TREE_PLACEHOLDER",content:e.content,render:e.render,properties:e.properties,projectTitle:e.projectTitle}}))};const o=n(r(52493));t.camelize=o.default;const s=n(r(74035));function i(e,t,r){var n;const o=null!=(n=null==r?void 0:r.pattern)?n:"post-order";return function e(r,n=0,s=0,i=0,a){var c,u,l;const d=null!=(c=null==(u=r.content)?void 0:u.length)?c:0;let p=null!=(l=r.content)?l:null;const h={depth:n,layerPosition:i,neighborsCount:s,parentNode:a};switch(o){case"pre-order":{const o=t(r,p,h);if(Array.isArray(r.content)){const t=r.content.map(((t,r)=>e(t,n+1,d-1,r,o)));o&&"object"==typeof o&&(o.content=t)}return o}case"post-order":return Array.isArray(r.content)&&(p=r.content.map(((t,o)=>e(t,n+1,d-1,o,r)))),t(r,p,h);default:throw new Error(`wrong pattern value: "${o}"`)}}(e)}function a(e,t){return i(e,((e,r)=>({...t(e),content:r})))}t.kebabize=s.default,t.FIRST_ID="generated-id"},74035:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}},78018:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withMedia=t.MediaContext=t.MediaConsumer=t.MediaProvider=void 0;var o=r(52692);Object.defineProperty(t,"MediaProvider",{enumerable:!0,get:function(){return o.MediaProvider}}),Object.defineProperty(t,"MediaConsumer",{enumerable:!0,get:function(){return o.MediaConsumer}}),Object.defineProperty(t,"MediaContext",{enumerable:!0,get:function(){return o.MediaContext}});var s=r(84901);Object.defineProperty(t,"withMedia",{enumerable:!0,get:function(){return n(s).default}})},668:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackMediaProvider=void 0;const n=r(80476),o=n.__importStar(r(44121)),s=n.__importDefault(r(99068));class i extends o.PureComponent{render(){return this.props.children(this.props.media)}}t.FallbackMediaProvider=(0,s.default)()(i)},52692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaConsumer=t.MediaProvider=t.MediaContext=void 0;const n=r(80476),o=n.__importStar(r(44121)),s=r(668),i=n.__importDefault(r(10920));t.MediaContext=i.default,t.MediaProvider=({value:e,children:r})=>o.createElement(t.MediaContext.Provider,{value:e},r),t.MediaConsumer=({children:e})=>o.createElement(t.MediaContext.Consumer,null,(t=>((e,t)=>t?e(t):o.createElement(s.FallbackMediaProvider,null,e))(e,t)))},10920:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476).__importStar(r(44121)),o="__MEDIA_CONTEXT_GLOBAL_REACT_CONTEXT__";let s;s=window[o],s||"undefined"==typeof globalThis||(s=globalThis[o]),s||void 0===r.g||(s=r.g[o]),s||(s=n.createContext(null),"undefined"!=typeof globalThis&&(globalThis[o]=s),void 0!==r.g&&(r.g[o]=s),window[o]=s),t.default=s},84901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476).__importStar(r(44121)),o=r(52692);t.default=function(e){var t;return(t=class extends n.PureComponent{render(){return n.createElement(o.MediaConsumer,null,(t=>n.createElement(e,{...this.props,media:t})))}}).displayName=`WithMedia(${e.displayName||e.name})`,t}},24650:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t.getMap=void 0;const o=n(r(44121)),s=r(89938),i=r(45302),a=r(17129),c=n(r(48945)),u=r(28619);t.getMap=i.getMap;const l=(0,c.default)("boxy:mm-lazy:client");t.fillMap=async(e,t,r,n)=>(await(0,i.fillMap)(),(0,s.traverseTree)(e,(e=>{var s;"string"==typeof(null==(s=e.render)?void 0:s.lazy)&&"none"!==e.render.lazy&&(({subtree:e,baseUrl:t,containerElement:r,getRetryUrl:n})=>{if(void 0===e.render)return;const s=(0,i.getTemper)(),c=(0,a.getMmid)(e);if(s.modules[c])return;const{render:d}=e,p=(0,a.getUrl)(e,"clientJs",t);let h;!1===e.render.isCriticalCss&&(h=(0,a.getUrl)(e,"css",t));const f=o.default.forwardRef(((e,t)=>o.default.createElement(u.ClientLazyRender,{clientJs:p,css:h,mmid:c,props:e,forwardedRef:t,modules:s.modules,strategy:d.lazy,containerElement:r,getRetryUrl:n}))),m={initialize(){m.initialize=!0,l.debug("initializing lazy",c)},initialized:!0,meta:{mmid:c,clientJs:p,css:h,strategy:d.lazy,render:e.render},exports:f};if(s.modules[c]=m,void 0===m.exports)throw new Error(`mm.exports for "${c}" is not defined!`);m.exports.displayName=`ClientLazyRender(${c})`,(0,i._addToMap)(c,m.exports),l.debug("assigned lazy to temper",m)})({subtree:e,baseUrl:t,containerElement:r,getRetryUrl:n})})),(0,i.getMap)()),t.default=t.fillMap},21159:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(45302),s=r(89938),i=n(r(52268)),a=n(r(50357)),c=r(17129),u=n(r(48945)),l=r(24650),d=(0,u.default)("boxy:mm-lazy:dynamic");t.default=async({tree:e,baseUrl:t,containerElement:r,getRetryUrl:n})=>{d.debug("starting blockMap with baseUrl and tree",t,e),await(0,l.fillMap)(e,t,r,n);const u=(0,o.getTemper)(),p=[];(0,s.traverseTree)(e,(e=>{if(void 0===e.render)return;const o=(0,c.getMmid)(e),s=u.modules[o];if(!(null!=s&&s.exports||null!=s&&s.error)){var l;s?d.debug("module found, but no exports",o,s):d.debug("module not found",o);const u=(0,c.getUrl)(e,"clientJs",t),h=(0,c.getUrl)(e,"css",t);d.debug(`block ${e.type} not found, loading it via solo url`,u);const f=e.render&&e.render.integrity,m={mmid:o,...null!=(l=f&&{integrity:f})?l:void 0},v=Promise.all([(0,i.default)({type:"stylesheet",href:h,options:m,containerElement:r,getRetryUrl:n}),(0,a.default)({src:u,options:m,containerElement:r,getRetryUrl:n})]).then((()=>({mmid:o}))).catch((()=>({mmid:o,failed:!0})));p.push(v)}}));const h=[],f=await Promise.all(p);for(const{mmid:e,failed:t}of f)t?d.warn(`mmid ${e} failed to load`):(d.debug(`initializing async block ${e}`),h.push((0,o.initializeModule)(e).catch((e=>({error:e})))));return(await Promise.all(h)).map((e=>null==e?void 0:e.error)).filter(Boolean).length&&d.error({message:"failed to load some modules"}),(0,o.getMap)()}},28619:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientLazyRender=void 0;const a=s(r(44121)),c=i(r(50357)),u=i(r(52268)),l=i(r(48945)),d=r(45302),p=r(75462),h=(0,l.default)("boxy:mm-lazy:render"),f={__html:""},m=(0,p.createUseObserverVisible)({root:null,rootMargin:"200px 0px 0px 0px"}),v={};t.ClientLazyRender=({mmid:e,clientJs:t,css:r,props:n,forwardedRef:o,modules:s,strategy:i,containerElement:l,getRetryUrl:p})=>{var g;const y=(0,a.useRef)(0);y.current++,h.info("Render count",y.current,e,n);const b=`${e}-lazy-inner`,[w,E]=(0,a.useState)(!(null==(g=s[b])||!g.initialized)),[S,_]=(0,a.useState)(w),[k,T]=(0,a.useState)(null),[C,R]=(0,a.useState)(null),x=m(C,"viewport"===i),[M,P]=(0,a.useState)(!1),[O,A]=(0,a.useState)(!1);h.info("render state",{liid:b,liidModule:s[b],isInitialized:w,isLoaded:S,isInViewport:x,isHovered:M,isIdleForLoad:O}),(0,a.useEffect)((()=>{"function"==typeof n.forwardDomRef&&n.forwardDomRef(C)}),[C]),(0,a.useEffect)((()=>{"string"==typeof r&&(h.info("addLink for",r),(0,u.default)({type:"stylesheet",href:r,options:{mmid:e},containerElement:l,getRetryUrl:p}).catch((e=>T(e)))),"idle"===i&&("function"==typeof window.__testRequestIdleCallback?__testRequestIdleCallback((()=>A(!0))):"function"==typeof window.requestIdleCallback?window.requestIdleCallback((()=>A(!0))):A(!0))}),[]);const N=void 0===i||"none"===i,I="hover"===i&&M,L="viewport"===i&&x,D="idle"===i&&O,j="static"===i&&0===(null==C?void 0:C.innerHTML.length),F=N||I||L||D||j;if(h.info("isTriggered",F),F&&!S&&(0,c.default)({src:t,options:{mmid:b},containerElement:l,getRetryUrl:p}).then((()=>_(!0))).catch((e=>T(e))),(0,a.useEffect)((()=>{S&&!w&&(h.info("call initialize()",b,s[b]),(0,d.initializeModule)(b).then((()=>{E(!0)})).catch((e=>T(e))))}),[S,w]),k)throw k;if(w){var V,B;const t=null!=(V=s[b].exports)?V:a.default.Fragment;null==n.onBotaUpdate||n.onBotaUpdate(t.bota);let r=n;return null!=t&&null!=(B=t.prototype)&&B.render&&(r={...n,ref:o}),h.info("returning loaded component",t),a.default.createElement("div",{"data-mmid":e,ref:e=>R(e),style:v},a.default.createElement(t,{...r}))}let U;return"hover"===i&&(U={onMouseMove:()=>{M||P(!0)}}),h.info("returning stub"),a.default.createElement("div",{"data-mmid":e,ref:e=>R(e),style:v,suppressHydrationWarning:!0,dangerouslySetInnerHTML:f,...U})},t.ClientLazyRender.displayName="ClientLazyRender"},75462:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUseObserverVisible=void 0;const n=r(44121);t.createUseObserverVisible=e=>(t,r)=>{const[o,s]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(!t||o||!r)return;const n=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),s(!0))}))}),e);return n.observe(t),()=>{n.disconnect()}}),[t]),o}},52268:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e({type:t,href:r,containerElement:n,options:c,getRetryUrl:u}){if(i.info("start",r,t,c),a.has(r)){const e=a.get(r);return i.info("return from cache",r,e),e}const l=document.createElement("link");Object.assign(l,{rel:t,href:r});const d=(null!=u?u:o.defaultGetRetryUrl)(r),p=new Promise(((o,a)=>{l.onerror=()=>{if(!d){const e=new Error(`could not load link ${r}`);return(0,s.initEmptyTemperAndAddLoadError)(c.mmid,e),i.error("fail to load (and no retry url)",e),void a(e)}i.error("script.onerror retry addLink() call",d),e({type:t,href:d,options:c,containerElement:n,getRetryUrl:u}).then(o,a)},"onload"in l?l.onload=o:setTimeout(o,50);const p=null!=n?n:document.head;i.info("appending link to target",l,p),p.appendChild(l)}));return a.set(r,p),p};const o=r(50785),s=r(22468),i=(0,n(r(48945)).default)("boxy:mm:addLink"),a=new Map},50357:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e({src:t,options:r,containerElement:n,getRetryUrl:c}){if(i.info("start",t,r),a.has(t)){const e=a.get(t);return i.info("return from cache",e),e}const u=document.createElement("script");Object.assign(u,{async:!0,crossOrigin:"anonymous",src:t}),"mmid"in r&&(u.dataset.mmid=r.mmid),r.integrity&&u.setAttribute("integrity",r.integrity);const l=(null!=c?c:o.defaultGetRetryUrl)(t),d=new Promise(((o,a)=>{u.onerror=()=>{if(!l){const e=new Error(`could not load script ${t}`);return(0,s.initEmptyTemperAndAddLoadError)(r.mmid,e),i.error("fail to load (and no retry url)",e),void a(e)}i.error("script.onerror retry addScript() call",l),e({src:l,options:r,containerElement:n,getRetryUrl:c}).then(o,a)},u.onload=o;const d=null!=n?n:document.head;i.info("appending script to target",u,d),d.appendChild(u)}));return i.info("setting promise to cache",t,d),a.set(t,d),d};const o=r(50785),s=r(22468),i=(0,n(r(48945)).default)("boxy:mm:addScript"),a=new Map},50785:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGetRetryUrl=function(e){for(const t in n)if(0===e.indexOf(t))return e.replace(t,n[t])};const r="https://fallback.cdn-tinkoff.ru/",n={"https://cdn.tbank.ru":`${r}acdn`,"https://acdn.tinkoff.ru":`${r}acdn`}},17129:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=function(e,t,r){const{type:n,render:i}=e;if(void 0===i)throw new Error(`render field is not defined for ${n}@${e.version}`);if(t in i&&"string"==typeof i[t])return i[t];if("npmVersion"in i){const e=(0,o.default)(n);return`${r}/${e}/${i.npmVersion}/${e}${s[t]}`}throw new Error(`failed to get resource location for ${e.id}`)},t.getMmid=function(e){var t,r;const{type:n,render:o}=e;if(void 0===o)throw new Error(`failed to get mmid for subtree ${e.id}`);return null!=(t=null!=(r=o.mmid)?r:o.clientJs)?t:`${n}@${o.npmVersion}`};const o=n(r(74035)),s={clientJs:".client.js",css:".css",jsMap:".client.js.map"}},45302:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t.initializeModule=t._addToMap=t.getTemper=t.getMap=t._map=void 0;const o=n(r(44121)),s=n(r(90776)),i=(0,n(r(48945)).default)("mm:client");t._map={},t.getMap=()=>t._map,t.getTemper=()=>{window.__tempref59452||(window.__tempref59452={});const e=window.__tempref59452;return void 0===e.externals&&(e.externals={react:o.default,"react-dom":s.default}),void 0===e.modules&&(e.modules={}),e},t._addToMap=(e,r)=>{t._map[e]=r},t.initializeModule=e=>{const r=(0,t.getTemper)().modules[e];if(void 0===r){const t=`module ${e} not found`;return i.error(t),Promise.reject(new Error(t))}return i.debug("initial mm value",r),!1===r.initialized?(r.initialize()||Promise.resolve()).then((()=>{r.initialized=!0,r.exports||i.error("no exports after initialization",e,r),i.debug("mm initialized",r),(0,t._addToMap)(e,r.exports)})).catch((t=>{throw r.error=t,i.error(`initialization of ${e} failed with error ${t.message}\n${t.stack}`),t})):Promise.resolve()},t.fillMap=async()=>{const e=(0,t.getTemper)(),r=[];for(const n in e.modules)r.push((0,t.initializeModule)(n).catch((e=>({error:e}))));return(await Promise.all(r)).map((e=>null==e?void 0:e.error)).filter(Boolean).length&&i.error({message:"failed to load some modules"}),t._map},t.default=t.fillMap},22468:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEmptyTemperAndAddLoadError=function(e,t){const r=(0,n.getTemper)();r.modules[e]||(r.modules[e]={initialized:!1,initialize:()=>{}});const o=r.modules[e];if(o.loadFailed=!0,o.error){var s;const e=o.error.errors?null==(s=o.error.errors)?void 0:s.concat(t):[o.error,t];o.error=new Error(`${e.map((e=>e.message)).join("\n")}`),o.error.errors=e}else o.error=t};const n=r(45302)},91401:function(e,t){"use strict";t.gV=void 0,t.Z5=function(e={},r){const{modules:n}=null!=r?r:window.__tempref59452;if(!n)return null;let o=0,s=0,i=0,a=0;const c=[];for(const e of Object.keys(n)){var u;const r=n[e];if(!r.uniqueName||t.gV.has(r.uniqueName)||!r.manifest||!r.manifest.clientSize||!r.manifest.clientEntrySize)continue;let l;if(t.gV.add(r.uniqueName),c.push(r.uniqueName),r.manifest.clientChunks){l=Object.values(r.manifest.clientChunks).filter((e=>"shared"===e.type));const e=l.reduce(((e,t)=>e+t.size),0);i+=e,a+=e}if(o+=r.manifest.clientSize,s+=r.manifest.clientEntrySize,r.sharingResult&&null!=(u=l)&&u.length)for(const e of Object.values(r.sharingResult))if(e.from===r.uniqueName){const t=l.find((t=>t.module===e.module));t&&(s+=t.size,a-=t.size)}}return{blocks:c,totalJs:o,loadedJs:s,sharedJs:i,savedViaSharingJs:a,totalCss:0,withSharing:i>0,urlMask:e.urlMask||"unspecified"}},t.gV=new Set},34780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PUBLIC_PATH=void 0,t.removeNs=o,t.toBlockName=function(e){return(0,n.camelize)(o(e))},t.toMifName=function(e){return(0,n.kebabize)(o(e))};const n=r(49068);function o(e){return e.startsWith("@")?e.split("/")[1]:e}t.DEFAULT_PUBLIC_PATH="mm"},84989:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}},49068:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.kebabize=t.camelize=t.FIRST_ID=void 0,t.traverseTree=i,t.mapTree=a,t.asTree=function e(r,n=0){if("string"==typeof r)return e({id:r});if(Array.isArray(r)&&"string"==typeof r[0]){const t=r.map((t=>e({id:t})));return e(t)}const s=r;let i=n;return Array.isArray(s)?e({type:"fragment",content:s}):a(r,(e=>{var r,n;let s=e.id;if(!s){const e=i>0?`-${String(i)}`:"";s=`${t.FIRST_ID}${e}`,i++}return{id:s,type:(0,o.default)(null!=(r=e.type)?r:"as-tree-generated-type"),version:null!=(n=e.version)?n:"AS_TREE_PLACEHOLDER",content:e.content,render:e.render,properties:e.properties,projectTitle:e.projectTitle}}))};const o=n(r(84989));t.camelize=o.default;const s=n(r(35850));function i(e,t,r){var n;const o=null!=(n=null==r?void 0:r.pattern)?n:"post-order";return function e(r,n=0,s=0,i=0,a){var c,u,l;const d=null!=(c=null==(u=r.content)?void 0:u.length)?c:0;let p=null!=(l=r.content)?l:null;const h={depth:n,layerPosition:i,neighborsCount:s,parentNode:a};switch(o){case"pre-order":{const o=t(r,p,h);if(Array.isArray(r.content)){const t=r.content.map(((t,r)=>e(t,n+1,d-1,r,o)));o&&"object"==typeof o&&(o.content=t)}return o}case"post-order":return Array.isArray(r.content)&&(p=r.content.map(((t,o)=>e(t,n+1,d-1,o,r)))),t(r,p,h);default:throw new Error(`wrong pattern value: "${o}"`)}}(e)}function a(e,t){return i(e,((e,r)=>({...t(e),content:r})))}t.kebabize=s.default,t.FIRST_ID="generated-id"},35850:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}},70956:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDi=t.ALLOWED_KEYS=void 0,(0,r(80476).__importDefault(r(48945)).default)("page-maker:di"),t.ALLOWED_KEYS=Symbol("allowed_di_keys"),t.createDi=e=>{const{dival:r,diKeys:n}=e,o={[t.ALLOWED_KEYS]:n,get:e=>{const n=o[t.ALLOWED_KEYS];let s;return(void 0===n||-1!==n.indexOf(e))&&(s=null==r?void 0:r[e]),s}};return o}},11383:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;const n=r(80476).__importDefault(r(44121)),o=["Mobile","Desktop","Independent"];class s extends n.default.Component{constructor(e){super(e),this.state={}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{onError:r}=this.props;null==r||r(e,{...t,subtree:this.props.subtree});const n=this.props.eventea,s=this.props.subtree.type;o.some((e=>s.includes(e)))&&(null==n||n.send({project:"boxy",event:"block-error-boundry",payload:{type:s,message:e.stack||e.toString()}}))}render(){return this.state.error?null:this.props.children}}t.ErrorBoundary=s,s.displayName="ErrorBoundary (PageMakerNode)",t.default=s},74700:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateProps=void 0;const n=r(80476).__importDefault(r(48945)),o=r(70956),s=(0,n.default)("page-maker:di");t.generateProps=(e,t)=>{const{children:r,ids:n,missedDi:i}=t;let a=t.bota;const c=(r=[])=>{r.forEach((r=>{t.dival&&r in t.dival||i({key:r,bota:a,subtree:e})}))},u=(0,o.createDi)({dival:t.dival,diKeys:null==a?void 0:a.diKeys,type:e.type});c(null==a?void 0:a.diRequiredKeys);const l=t.dival&&Object.keys(t.dival).reduce(((e,r)=>{var n;return(null===(n=null==a?void 0:a.diKeys)||void 0===n?void 0:n.includes(r))&&(e[r]=t.dival[r]),e}),{}),d={};return e.hasOwnProperty("type")&&(d.blockType=e.type),e.hasOwnProperty("version")&&(d.schemaVersion=e.version),{...e.properties,...d,di:u,dival:l,dispatch:r=>(s.debug({message:"dispatch was called with payload",payload:r}),t.act(r,e,n)),bus:(r,n)=>(s.debug({message:`component ${e.id} is subscribing for event ${r}`}),t.bus(e.id,r,n)),key:e.id,id:e.id,children:r,forwardDomRef:r=>t.saveDomRef(e.id,r),..."sticky"===e.type?{scrollParent:t.scrollParent}:{},onBotaUpdate:e=>{a=e,u[o.ALLOWED_KEYS]=null==a?void 0:a.diKeys,c(null==a?void 0:a.diRequiredKeys)}}}},64315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JointMaker=t.NakedMaker=void 0;const n=r(80476),o=n.__importDefault(r(73857));t.NakedMaker=o.default;const s=n.__importDefault(r(49315));t.JointMaker=s.default,t.default=s.default},49315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jointUse=void 0;const n=r(80476),o=n.__importDefault(r(44121)),s=n.__importDefault(r(48945)),i=r(90077),a=n.__importDefault(r(73857)),c=(0,s.default)("page-maker:render"),u={flex:i.Flex,fragment:i.Fragment,screen:i.Screen};function l(e){const{use:r}=e;return o.default.createElement(a.default,{...e,use:(e,n)=>(0,t.jointUse)(e)||(null==r?void 0:r(e,n))})}t.jointUse=({type:e})=>{if(void 0!==u[e])return c.debug(`for type "${e}" found build-in component, returning`),u[e];c.debug(`jointUse: type "${e}" not found inside page-maker, going outside`)},l.displayName="JointMaker",t.default=l},40482:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476),o=n.__importDefault(r(44121)),s=n.__importDefault(r(10521)),i=n.__importDefault(r(70267)),a=["padding","background","flex","flexDirection","justifyContent","alignItems","borderTop","borderBottom","alignSelf"].concat(["fontSize","fontFamily","fontWeight","color"]);function c(e){const{className:t,hidden:r,html:n,forwardDomRef:c}=e,u=(l=e,d=a,Object.keys(l).reduce(((e,t)=>(-1!==d.indexOf(t)&&l[t]&&(e[t]=l[t]),e)),{}));var l,d;const p=(0,s.default)(i.default.flex,t,{[i.default.hidden]:r});return n&&!e.children?o.default.createElement("div",{ref:c,dangerouslySetInnerHTML:{__html:n},className:p,style:u}):o.default.createElement("div",{ref:c,className:p,style:u},e.children)}t.default=c,c.displayName="Flex"},90077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=t.Fragment=t.Flex=void 0;const n=r(80476).__importDefault(r(40482));function o(e){return e.children}function s(e){return e.children}t.Flex=n.default,t.Fragment=o,o.displayName="PageMakerFragment",t.Screen=s,s.displayName="PMScreen"},79255:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476).__importDefault(r(44121)).default.createContext({scrollTo:()=>{}});n.displayName="StickyContext",t.default=n},73857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476),o=n.__importStar(r(44121)),s=n.__importDefault(r(48945)),i=n.__importDefault(r(79255)),a=n.__importDefault(r(55947)),c=(0,s.default)("page-maker:master-of-scroll");class u extends o.Component{constructor(e){super(e),this.scrollParentElement=null,this.stack=[],this.beforeHeightsMap={},this.contextValue={scrollTo:this.scrollTo.bind(this)}}lazyScrollParent(){if(this.scrollParentElement instanceof HTMLElement)return this.scrollParentElement;let e=null;return this.props.scrollParent&&(e=document.querySelector(this.props.scrollParent)),e instanceof HTMLElement||(e=document.scrollingElement||document.body&&document.body.parentElement),e instanceof HTMLElement&&(this.scrollParentElement=e),c.debug({message:"scrollParentElement",scrollParentElement:e}),this.scrollParentElement}componentDidMount(){this.lazyScrollParent()}componentWillUnmount(){this.stack=[]}scrollTo(e,t={}){var r;const n=this.scrollParentElement;if(e instanceof HTMLElement&&n instanceof HTMLElement){const{top:o}=e.getBoundingClientRect(),s=o+n.scrollTop+(null!==(r=t.offsetTop)&&void 0!==r?r:0);"function"==typeof this.props.scrollTo?this.props.scrollTo(0,s):"scrollTo"in n?n.scrollTo({left:0,top:s,behavior:"smooth"}):n.scrollTop=s}}render(){return o.default.createElement(i.default.Provider,{value:this.contextValue},o.default.createElement(a.default,{...this.props}))}}t.default=u,u.displayName="MasterOfScroll"},55947:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80476),o=r(44121),s=n.__importDefault(r(48945)),i=r(51092),a=n.__importDefault(r(79255)),c=r(49822),u=(0,s.default)("page-maker:dispatch"),l=(0,s.default)("page-maker"),d=(0,s.default)("page-maker");function p(e){const{tree:t,use:r,dival:n,saveDomRef:s,isConcurrentFeaturesEnabled:p,initialStickyOffset:h,onBlockRenderError:f}=e,m=(0,o.useContext)(a.default),[v]=(0,o.useState)(new Map),[g]=(0,o.useState)(new Map),y=(0,o.useRef)(new c.StickyManager);h&&y.current.setInitialOffset(h),(0,o.useEffect)((()=>{l.debug({event:"reistry",domRegistry:v})}),[t]);const{displayTree:b}=(0,i.renderTree)(t,{use:r,act:(t,r,n)=>function(e,t,r,n){u.debug({event:"action",action:r});const{domRegistry:o,stickyContext:s,subscriptions:i,ids:a,stickyManager:c}=t;if("string"!=typeof(null==r?void 0:r.type))return void d.error('Wrong action shape, no "type: string" found',r);const l=(null==r?void 0:r.payload)||{};switch(null==r?void 0:r.type){case"scrollTo":{const e="targetGuid"in l?l.targetGuid:l.blockId;if("string"!=typeof e){d.error("cannot scrollTo, because id is not a string");break}if(s.scrollTo(o.get(e),{offsetTop:-c.getOffset(e)}),!o.has(e)){let t=`Failed to scroll to the element with id='${e}'.`;t=a&&a.has(e)?`${t} Tree node id='${e}' exists, but html element does not. Make sure forwardDomRef is called.`:`${t} Tree node id='${e}' does not exists. Check block properties.`,d.error(t),console.error(t)}break}case"emit":if(l.eventName&&l.blockId){const e=`${l.eventName}-${l.blockId}`;u.debug(`eventName and blockId found in action.payload, key is ${e}`),i.has(e)?(u.debug(`found ${e} subscription, invoking it with`,l.arg),i.get(e)(l.arg)):u.debug(`subscription ${e} not found, all subscriptions:`,i)}break;case"send":console.error("Action type send is no longer supported, use emit instead");break;default:"function"==typeof e.act?e.act(r,n):d.warn("action fired, but no one listening",r)}}(e,{domRegistry:v,stickyContext:m,subscriptions:g,ids:n,stickyManager:y.current},t,r),dival:n,saveDomRef:(e,t)=>{v.set(e,t),s&&s(e,t)},subscriptions:g,miss:e.miss,missedDi:e.missedDi||(e=>{}),isConcurrentFeaturesEnabled:p,onBlockRenderError:f,stickyManager:y.current,eventea:e.eventea});return b}p.displayName="PureMaker",t.default=p},51092:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTree=void 0;const n=r(80476),o=n.__importStar(r(44121)),s=n.__importDefault(r(48945)),i=r(48374),a=r(74700),c=r(28732),u=n.__importDefault(r(11383)),l=(0,s.default)("page-maker:render");t.renderTree=function(e,t){let r,n=0;const s=new Set;return l.debug({event:"renderTree",subtree:e,options:t}),r=e?(0,i.traverseTree)(e,((e,r,i)=>{var d,p,h;s.add(e.id),n++,t.stickyManager.setComponentPosition(e.id,n);const{depth:f}=i;let m;"function"==typeof t.use&&(m=t.use(e,{depth:f})),m||(m=({children:t})=>o.default.createElement("div",{"data-fail-type":e.type},t),l.warn({message:`Component ${e.type} not found. Using fallback instead (() => children)`,subtree:{type:e.type,version:e.version,render:e.render}}),null===(d=t.miss)||void 0===d||d.call(t,e));const v=(0,a.generateProps)(e,{ids:s,children:r,dival:t.dival,bota:m.bota,act:t.act,saveDomRef:t.saveDomRef,scrollParent:t.scrollParent,depth:f,bus:(e,r,n)=>{const o=`${r}-${e}`;return t.subscriptions.set(o,n),()=>t.subscriptions.delete(o)},missedDi:t.missedDi}),g=null!==(p=t.eventea)&&void 0!==p?p:null===(h=t.dival)||void 0===h?void 0:h.eventea,y=o.default.createElement(u.default,{key:e.id,eventea:g,subtree:e,onError:t.onBlockRenderError},o.default.createElement(c.StickyWrap,{...v,component:m,componentId:e.id,componentPosition:n,stickyManager:t.stickyManager})),{isConcurrentFeaturesEnabled:b}=t;return b&&1===f?o.default.createElement(o.Suspense,{fallback:null},y):y})):null,l.debug({event:"renderTreeResult",result:r,counter:n}),{displayTree:r,counter:n}}},49822:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyManager=void 0,t.StickyManager=class{constructor(e){this.heights=new Map,this.positions=new Map,this.handlers=new Map,this.exists=new Map,this.initialOffset=null!=e?e:0}setInitialOffset(e){this.initialOffset=e}setComponentPosition(e,t){this.positions.set(e,t)}setComponentHeight(e,t){const r=this.heights.get(e);this.heights.set(e,t),r&&r===t||this.triggerOffsetChange(this.positions.get(e))}removeComponentHeightAndPosition(e){void 0!==this.positions.get(e)&&(this.heights.delete(e),this.positions.delete(e))}removeComponentHandler(e){this.handlers.get(e)&&this.handlers.delete(e)}getOffset(e){let t=this.initialOffset;const r=this.positions.get(e);for(const[e,n]of this.heights.entries()){if(!this.exists.get(e)){this.removeComponentHeightAndPosition(e);continue}const o=this.positions.get(e);void 0!==n&&void 0!==o&&o<r&&(t+=n)}return t}setOffsetChangeHandler(e,t){this.handlers.set(e,t)}setComponentExists(e,t){this.exists.set(e,t)}triggerOffsetChange(e){for(const[t,r]of this.handlers.entries())this.exists.get(t)?this.positions.get(t)>e&&r():this.removeComponentHandler(t)}}},28732:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyWrap=void 0;const n=r(80476).__importStar(r(44121));function o(e){const{component:t,componentId:r,componentPosition:o,stickyManager:s,...i}=e,[a,c]=(0,n.useState)(!0),u=(0,n.useCallback)((()=>c(!a)),[a,c]);s.setComponentExists(r,!0),(0,n.useEffect)((()=>(s.setOffsetChangeHandler(r,u),()=>s.removeComponentHandler(r))),[s,r,u]);const l=(0,n.useCallback)((({height:e})=>{s.setComponentHeight(r,e),s.setComponentPosition(r,o)}),[s,r,s]);return(0,n.useEffect)((()=>(s.setComponentExists(r,!0),()=>s.setComponentExists(r,!1)))),n.default.createElement(t,{...i,registerSticky:l,stickyOffset:s.getOffset(r)})}t.StickyWrap=o,o.displayName="StickyWrap (PageMakerNode)"},69154:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}},48374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kebabize=t.camelize=t.asTree=t.FIRST_ID=t.mapTree=t.traverseTree=void 0;const n=r(80476),o=n.__importDefault(r(69154));t.camelize=o.default;const s=n.__importDefault(r(17413));function i(e,t,r){var n;const o=null!==(n=null==r?void 0:r.pattern)&&void 0!==n?n:"post-order";return function e(r,n=0,s=0,i=0){var a,c,u;const l=null!==(c=null===(a=r.content)||void 0===a?void 0:a.length)&&void 0!==c?c:0;let d=null!==(u=r.content)&&void 0!==u?u:null;const p={depth:n,layerPosition:i,neighborsCount:s};switch(o){case"pre-order":{const o=t(r,d,p);if(Array.isArray(r.content)){const t=r.content.map(((t,r)=>e(t,n+1,l-1,r)));o&&"object"==typeof o&&(o.content=t)}return o}case"post-order":return Array.isArray(r.content)&&(d=r.content.map(((t,r)=>e(t,n+1,l-1,r)))),t(r,d,p);default:throw new Error(`wrong pattern value: "${o}"`)}}(e)}function a(e,t){return i(e,((e,r)=>({...t(e),content:r})))}t.kebabize=s.default,t.traverseTree=i,t.mapTree=a,t.FIRST_ID="generated-id",t.asTree=function e(r,n=0){let s=n;return Array.isArray(r)?e({type:"fragment",content:r}):a(r,(e=>{var r,n;let i=e.id;if(!i){const e=s>0?`-${String(s)}`:"";i=`${t.FIRST_ID}${e}`,s++}return{id:i,type:(0,o.default)(null!==(r=e.type)&&void 0!==r?r:"as-tree-generated-type"),version:null!==(n=e.version)&&void 0!==n?n:"AS_TREE_PLACEHOLDER",content:e.content,render:e.render,properties:e.properties}}))}},17413:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z0-9]|(?=[A-Z0-9]))([A-Z0-9])/g,"$1-$2").toLowerCase()}},67584:function(e,t,r){"use strict";r.d(t,{D:function(){return o},s:function(){return n}});const n={REQUEST:"request",SINGLETON:"singleton"},o={NOT_FOUND:"NotFound",CIRCULAR_DEP:"CircularDep",REQUIRE_MULTI:"RequireMulti",MIXED_MULTI:"MixedMulti",WRONG_FORMAT:"WrongFormat"}},59999:function(e,t,r){"use strict";function n(e){return e.toString().replace(/^Symbol\((.+)\)$/,"$1")}r.d(t,{HY:function(){return n},V3:function(){return s},jt:function(){return i}});class o{constructor(e,t={}){this.isToken=!0,this.isModernToken=!0,this.name=e?Symbol.for(e):Symbol("token"),this.options=t}toString(){return n(this.name)}}function s(e,t){return new o(e,t)}function i(e){return{token:e,optional:!0}}},80283:function(e,t,r){"use strict";r.d(t,{Y:function(){return o},e:function(){return n}});const n="_module_parameters_";function o({providers:e,imports:t,deps:r={}}){return o=>Object.assign(o,{[n]:{providers:e,deps:r,imports:t,name:o.name,id:`${o.name}-${Math.random()}`}})}},97570:function(e,t,r){"use strict";function n(e){return e}r.d(t,{J:function(){return n}})},8751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaBeerClient=void 0;const r=64e3;t.EventeaBeerClient=class{constructor(e){this.batch=[],this.timer=null;{const{baseUrl:t,batching:r}=e;this._request=e=>fetch(`${t}${e.method}`,{...e,method:e.httpMethod,keepalive:null==r?void 0:r.batchingEnable}).then((e=>e.json())),this.batchingEnable=(null==r?void 0:r.batchingEnable)||!1,this.batchSize=(null==r?void 0:r.batchSize)||50,this.batchDelay=(null==r?void 0:r.batchDelay)||50,document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.sendRemainingBatch()}))}}event(e){const t=this.formatEvent(e);return this.batchingEnable?(this.batch.push(t),this.batch.length>=this.batchSize?this.sendBatch():(1===this.batch.length&&(this.timer=setTimeout((()=>this.sendBatch()),this.batchDelay)),Promise.resolve())):this.sendImmediately(t)}sendAbstractEvent(e){this.event(e)}formatEvent(e){var t,r,n,o,s;const i=(null===(t=e.handlersData)||void 0===t?void 0:t.blockType)||(null===(r=e.payload)||void 0===r?void 0:r.blockType),a=(null===(n=e.handlersData)||void 0===n?void 0:n.blockProject)||(null===(o=e.payload)||void 0===o?void 0:o.blockProject);return{project:e.project,event:e.event,payload:{...e.payload||{},appName:null===(s=e.handlersData)||void 0===s?void 0:s.appName,blockType:i,blockProject:a}}}sendRequest(e){return this._request({method:"event",httpMethod:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"},credentials:"omit"}).catch((()=>{}))}sendImmediately(e){return this.sendRequest(e)}calculateBatchSize(e){const t=JSON.stringify(e);return new Blob([t]).size}splitBatch(e){const t=[];let n=[];if(this.calculateBatchSize(e)<=r)return[e];for(const o of e){if(this.calculateBatchSize([o])>r){this.sendRequest({project:"eventea",event:"keepAliveDataExceed",payload:{eventName:o.event}});continue}const e=[...n,o];this.calculateBatchSize(e)<=r?n=e:(t.push(n),n=[o])}return n.length>0&&t.push(n),t}async sendBatch(){const e=this.batch,t=this.splitBatch(e);this.batch=[],this.timer&&(clearTimeout(this.timer),this.timer=null);for(const e of t)await this.sendRequest(e)}sendRemainingBatch(){this.batch.length>0&&this.sendBatch()}}},67186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientLoader=void 0;const n=r(99236),o=()=>({});t.ClientLoader=class{constructor(e){this.projectSingleLoaders={},this.getSingleLoaderInstance=e=>{const t="string"==typeof e?e:e.projectName,r="string"==typeof e?void 0:e.fallback;return new n.ClientSingleLoader({projectName:t,fallback:r,handleRequestError:this.handleRequestError,timeout:this.timeout,baseUrl:this.baseUrl})},this.getPreloadRoutings=()=>{for(const e of this.preloadProjects){const t="string"==typeof e?e:e.projectName;this.projectSingleLoaders[t]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[t].handleRequest()}},this.addNewLoaderInstance=e=>(this.projectSingleLoaders[e]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[e]);const{baseUrl:t,preloadProjects:r,timeout:s,handleRequestError:i}=e;this.preloadProjects=r,this.baseUrl=t,this.timeout=s,this.handleRequestError=i||o,this.getPreloadRoutings()}async getRouting(e){return e in this.projectSingleLoaders?this.projectSingleLoaders[e].getRouting():this.addNewLoaderInstance(e).getRouting()}}},19434:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(67186),t)},77202:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestWithRetry=t.handleRetryOptions=void 0;const r=async e=>{const{timeout:t=5e3,url:r}=e,n=new AbortController,o=((e,t)=>setTimeout((()=>e.abort()),t))(n,t),s=await fetch(r,{...e,signal:n.signal});return clearTimeout(o),s};t.handleRetryOptions=e=>{const t={timeout:null==e?void 0:e.timeout,retry:null==e?void 0:e.retry,retryTimeout:null==e?void 0:e.retryTimeout};return t.retry=t.retry?t.retry:t.timeout&&t.retryTimeout?t.timeout/t.retryTimeout:2,t.retryTimeout=t.retryTimeout?t.retryTimeout:t.timeout&&t.retry?t.timeout/t.retry:2500,t.timeout=t.timeout?t.timeout:t.retryTimeout&&t.retry?t.retryTimeout*t.retry:15e3,t},t.requestWithRetry=async(e,n)=>{var o;const{retry:s,retryTimeout:i}=(0,t.handleRetryOptions)(n);let a,c,u;for(const t of function*(){let t=0;for(;t<s;)yield r({url:e,timeout:i}),t+=1}())try{a=await t;break}catch(e){c=e;continue}if(!a)throw c;return(null===(o=a.headers.get("content-type"))||void 0===o?void 0:o.includes("application/json"))?u=await a.json():a&&(u=await a.text()),{status:a.status,body:u}}},99236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSingleLoader=t.requestWithRetry=void 0;const n=r(77202),o=r(87088);var s=r(77202);Object.defineProperty(t,"requestWithRetry",{enumerable:!0,get:function(){return s.requestWithRetry}}),t.ClientSingleLoader=class{constructor(e){this.currentRequest=null,this.makeRequest=()=>{this.currentRequest=this.request(this.url,{timeout:this.timeout}),this.currentRequest.then((e=>{e.status>=400?this.handleRequestError({project:this.project,status:e.status}):o.routingValidator.check(e.body)?this.currentRouting=e.body:this.handleRequestError({project:this.project,validationErrors:o.routingValidator.getErrors(e.body)})}),(e=>{this.handleRequestError({project:this.project,reason:e})})).finally((()=>{this.currentRequest=null}))};const{url:t,baseUrl:r,projectName:s,timeout:i=5e3,fallback:a}=e;if(this.project=s,this.url=t||((e,t)=>{let r=t;return t.endsWith("/")||(r+="/"),`${r}v4/${e}.json`})(s,r),this.handleRequestError=e.handleRequestError,this.timeout=i,this.request=n.requestWithRetry,a){if(!o.routingValidator.check(a)){const t=o.routingValidator.getErrors(e.fallback);throw new Error(`fallback    :\n${t.join("\n")}`)}this.fallback=a}}handleRequest(){this.currentRouting||this.currentRequest||this.makeRequest()}getRouting(){return this.handleRequest(),this.currentRouting?Promise.resolve(this.currentRouting):this.currentRequest?this.currentRequest.then((()=>this.currentRouting||this.fallback||Promise.reject(void 0)),(()=>this.fallback?this.fallback:Promise.reject(void 0))):Promise.reject(void 0)}}},87088:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.routingValidator=void 0,t.routingValidator={check:e=>{if(e&&"object"==typeof e){const t=e;return!(!t.version||!t.events||"v4"!==t.version)}return!1},getErrors:e=>[`${JSON.stringify(e)}: doesn't match a valid v4 routing schema`]}},66348:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaDataState=void 0,t.EventeaDataState=class{constructor(e){this.__state={},(null==e?void 0:e.initData)&&e.initData&&(this.__state=e.initData)}add(e){const{project:t,payload:r}=e;this.__state[t]={...this.__state[t],...r}}get(e,t){if(this.__state[e])return this.__state[e][t]}get _getAll(){return this.__state}}},58107:function(e,t){"use strict";var r,n,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagMessageType=t.HandlerStatus=t.SentStatus=t.IncompleteReason=void 0,t.sendDiagMessage=function(e){try{const t=new CustomEvent("__evntx10t",{bubbles:!0,detail:e});document.dispatchEvent(t)}catch(e){}},function(e){e[e.MissedProject=0]="MissedProject",e[e.MissedRouting=1]="MissedRouting",e[e.MissedEvent=2]="MissedEvent",e[e.MissedRoutes=3]="MissedRoutes"}(r||(t.IncompleteReason=r={})),function(e){e[e.Routed=0]="Routed",e[e.IncompleteRouting=1]="IncompleteRouting",e[e.Deprecated=2]="Deprecated",e[e.Dead=3]="Dead"}(n||(t.SentStatus=n={})),function(e){e[e.Handled=0]="Handled",e[e.MissedHandler=1]="MissedHandler",e[e.HandlerErrored=2]="HandlerErrored"}(o||(t.HandlerStatus=o={})),function(e){e[e.SendStart=0]="SendStart",e[e.SentStats=1]="SentStats"}(s||(t.DiagMessageType=s={}))},87338:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaFeaturesBits=void 0,function(e){e[e.DiagStats=1]="DiagStats"}(r||(t.EventeaFeaturesBits=r={}))},73057:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(87338),t),o(r(58107),t)},53986:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendPostMessage=void 0;const r=window;t.sendPostMessage=({type:e,payload:t,config:n={}})=>{const{targetOrigin:o="*",payloadProperty:s}=n;r&&(r.top||r.opener||r.parent).postMessage(JSON.stringify({type:e,...s?{[s]:t}:t}),o)}},33647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaQueueObserver=t.EventeaQueue=t.EventeaStatistQueue=void 0;var n=r(53328);Object.defineProperty(t,"EventeaStatistQueue",{enumerable:!0,get:function(){return n.EventeaStatistQueue}});const o=window;t.EventeaQueue=class{__addEventToStore(...e){(null==o?void 0:o._evnteq)&&o._evnteq.push(...e)}get getQueue(){var e;return Array.isArray(null==o?void 0:o._evnteq)?null==o?void 0:o._evnteq:null===(e=null==o?void 0:o._evnteq)||void 0===e?void 0:e.queue}constructor(e){var t,r;this.errorHandlers=null==e?void 0:e.errorHandlers,o?!o._evnteq&&(o._evnteq=[]):null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t)}send(e){this.__addEventToStore(["send",e])}sendOnce(e){return this.__addEventToStore(["sendOnce",e]),!0}data(e){this.__addEventToStore(["data",e])}},t.EventeaQueueObserver=class{set watch(e){var t,r;this.observerSuspended?null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t):(this.watcher=e,this.push(...this.queue),this.queue=[])}push(...e){var t,r;if(this.watcher)try{this.watcher(e)}catch(e){const{message:n}=e;null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleObserverWatcherErrors)||void 0===r||r.call(t,n)}else this.queue.push(...e)}constructor(e){var t,r;this.observerSuspended=!1,this.queue=[],this.errorHandlers=null==e?void 0:e.errorHandlers,o?(Array.isArray(o._evnteq)&&this.queue.push(...o._evnteq),o._evnteq=this):(this.observerSuspended=!0,null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t))}}},53328:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaStatistQueue=void 0;const r="eventeaStatist";t.EventeaStatistQueue=class{constructor(){this.instance=null,this.resolveInstance=()=>{},this.instancePromise=new Promise((e=>{this.resolveInstance=e})),this.updateClientParameters=(...e)=>{if(this.instance)return this.instance.updateClientParameters(...e);this.instancePromise.then((t=>t.updateClientParameters(...e)))},this.updateABGroups=(...e)=>{if(this.instance)return this.instance.updateABGroups(...e);this.instancePromise.then((t=>t.updateABGroups(...e)))};const e=e=>{this.instance=e,this.resolveInstance(e)},t=window[r];if(t)return void e(t);const n=Object.getOwnPropertyDescriptor(window,r);Object.defineProperty(window,r,{set:t=>{var r;null===(r=null==n?void 0:n.set)||void 0===r||r.call(n,t),e(t)},configurable:!0})}}},7527:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Eventea=void 0;const n=r(8751),o=r(66348),s=r(53986),i=r(73057),a=r(73057),c=r(64153);class u{constructor(e){if(this.defaultEventHandlers={...e.defaultEventHandlers},this.defaultDataHandlers={...e.defaultDataHandlers},window.__evntfxb1ts||(window.__evntfxb1ts=a.EventeaFeaturesBits.DiagStats),this.defaultEventHandlers.postMessage=({event:e,config:t,payload:r})=>(0,s.sendPostMessage)({type:e,config:t,payload:r}),e.beerBaseUrl){const t=new n.EventeaBeerClient({baseUrl:e.beerBaseUrl,batching:e.batchingConfig});this.defaultEventHandlers["eventea-beer"]=e=>null==t?void 0:t.sendAbstractEvent(e)}this.routingClientLoader=e.routingClientLoader,this.projectConfigurationMap=e.projectConfigurationMap,this.errorHandlers=e.errorHandlers,this.handlersData=e.handlersData||{},this.onceSentEvents=e.onceSentEvents||new Map,this.handleAnyEvent=e.handleAnyEvent,this.eventeaDataState=new o.EventeaDataState({initData:e.data}),this.eventeaReferenceDataState=e.referenceData}doSend(e){var t,r,n,o;const{project:s,event:a}=e,u=this.projectConfigurationMap[s];let l=e;const d=t=>(0,i.sendDiagMessage)({type:i.DiagMessageType.SentStats,event:e,stats:t});if(!u)return this.errorHandlers.handleMissedProject({event:a,project:s}),void d({status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedProject});const p=u.routing;if(!p)return this.errorHandlers.handleMissedRouting({project:s}),void d({status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedProject});const h=p.events;if(!h)return this.errorHandlers.handleMissedRouting({project:s}),void d({status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedRouting});const f=h[a];if(!f)return this.errorHandlers.handleMissedEvent({event:a,project:s}),void d({status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedEvent});if(l.payload&&"allowIfMatch"in f&&f.allowIfMatch&&(l.payload=(0,c.filterPayloadByWhitelist)(l.payload,f.allowIfMatch)),"fromData"in f&&f.fromData){const{fromData:e}=f,t={};Object.keys(e).forEach((r=>{const n=this.getDataFromState(s,r,e);n&&(t[r]=n)})),l={...l,payload:{...t,...l.payload}}}const m=this._getTracking();if("fromDataPool"in f&&f.fromDataPool&&m){const e={};for(const t of Object.keys(f.fromDataPool)){const r=f.fromDataPool[t];r in m._prot.dataPool&&(e[t]=m._prot.dataPool[r])}const t=m._prot.collectDataElements(e);l={...l,payload:{...t,...l.payload}}}let v=this.handlersData;if(p.statist&&(v={...v,statist:p.statist}),this.handleAnyEvent&&this.handleAnyEvent({...l,eventRouting:f,handlersData:v}),"isDeprecated"in f&&f.isDeprecated)return null===(r=(t=this.errorHandlers).handleDeprecatedEvent)||void 0===r||r.call(t,{event:a,project:s}),void d({status:i.SentStatus.Deprecated});if(!("routes"in f))return null===(o=(n=this.errorHandlers).handleMissedRoutes)||void 0===o||o.call(n,{event:a,project:s}),void d({status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedRoutes});const g=Object.getOwnPropertyNames(f.routes);if(this.debugLogEvent(e,g),0==g.length)d({status:i.SentStatus.Dead});else{const e={};g.forEach((t=>{var r;const n=(null===(r=u.eventHandlers)||void 0===r?void 0:r[t])||this.defaultEventHandlers[t];if(!n)return this.errorHandlers.handleMissedEventHandler({project:s,event:a,routeHandlerName:t}),void(e[t]={status:i.HandlerStatus.MissedHandler});const o=f.routes[t],c={...l,config:o,handlersData:v};try{n(c),e[t]={status:i.HandlerStatus.Handled}}catch(r){if(e[t]={status:i.HandlerStatus.HandlerErrored,error:r},!this.errorHandlers.handleEventHandlerError)throw r;this.errorHandlers.handleEventHandlerError(r,t,c)}})),d({status:i.SentStatus.Routed,routesStats:e})}}send(e){const t=e;(0,i.sendDiagMessage)({type:i.DiagMessageType.SendStart,event:t});const{project:r}=t,n=this.projectConfigurationMap[r];(null==n?void 0:n.routing)||!this.routingClientLoader?this.doSend(t):this.restoreProjectConfiguration(r).catch((()=>{(0,i.sendDiagMessage)({type:i.DiagMessageType.SentStats,event:t,stats:{status:i.SentStatus.IncompleteRouting,reason:i.IncompleteReason.MissedProject}})})).then((()=>{this.doSend(t)}))}sendOnce(e,t=!0,r=[]){const n=e,o=`${n.project}/${n.event}`;this.onceSentEvents.has(o)||this.onceSentEvents.set(o,new Set);const s=this.onceSentEvents.get(o);return!s.has(t)&&(this.send(n),r.forEach((e=>{s.add(e)})),s.add(t),!0)}doData(e){var t,r,n,o;const{project:s}=e,i=this.projectConfigurationMap[s];if(!i)return void(null===(r=(t=this.errorHandlers).handleMissedDataProject)||void 0===r||r.call(t,{project:s}));const{dataHandlers:a={}}=i,c={...this.defaultDataHandlers,...a};for(const t of Object.keys(c)){const r=c[t];"function"==typeof r?r(e):null===(o=(n=this.errorHandlers).handleMissedDataHandler)||void 0===o||o.call(n,{project:s,handlerName:t})}this.eventeaDataState.add(e)}data(e){const t=e,{project:r}=t,n=this.projectConfigurationMap[r];(null==n?void 0:n.routing)||!this.routingClientLoader?this.doData(t):this.restoreProjectConfiguration(r).finally((()=>{this.doData(t)}))}restoreProjectConfiguration(e){const t=this.projectConfigurationMap[e];return!(null==t?void 0:t.routing)&&this.routingClientLoader?this.routingClientLoader.getRouting(e).then((r=>{t?t.routing=r:this.projectConfigurationMap[e]={routing:r}}),(t=>{var r,n;throw t||null===(n=(r=this.errorHandlers).handleMissedClientRouting)||void 0===n||n.call(r,{project:e}),t})):Promise.resolve()}replicateWithData(e){const t={...this.eventeaDataState._getAll,...null==e?void 0:e.additionalDataState};return new u({errorHandlers:this.errorHandlers,handlersData:{...this.handlersData,...null==e?void 0:e.additionalHandlersData},projectConfigurationMap:this.projectConfigurationMap,onceSentEvents:this.onceSentEvents,defaultEventHandlers:this.defaultEventHandlers,defaultDataHandlers:this.defaultDataHandlers,data:t})}getDataFromState(e,t,r){var n,o;const s=r[t];return null!==(n=this.eventeaDataState.get(e,s))&&void 0!==n?n:null===(o=this.eventeaReferenceDataState)||void 0===o?void 0:o.get(e,s)}_getTracking(){if(window.tracking&&tracking._prot)return window.tracking}debugLogEvent(e,t){try{if(window.localStorage.getItem("eventeaLog")){const{project:r,event:n,payload:o}=e;console.log(`%c[Eventea]%c send event %c${r}/${n}%c to [${t.length?t.join(","):"0 routes"}]`,"background: yellow","","font-weight: bold","",null!=o?o:"")}}catch(e){}}}t.Eventea=u},437:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.RootEventea=t.Eventea=void 0;const s=r(78167);Object.defineProperty(t,"Eventea",{enumerable:!0,get:function(){return s.RootEventea}}),Object.defineProperty(t,"RootEventea",{enumerable:!0,get:function(){return s.RootEventea}}),o(r(2324),t)},78167:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootEventea=void 0;const n=r(33647),o=r(7527);class s extends o.Eventea{constructor(e){super(e),this.eventeaQueueObserver=new n.EventeaQueueObserver({errorHandlers:{handleQueueUsageAtServer:this.errorHandlers.handleQueueUsageAtServer,handleObserverWatcherErrors:this.errorHandlers.handleObserverWatcherErrors}}),this.eventeaQueueObserver.watch=e=>{e.forEach((([e,t])=>{var r,n,o,s;try{switch(e){case"send":this.send(t);break;case"sendOnce":this.sendOnce(t);break;case"data":this.data(t);break;default:null===(n=(r=this.errorHandlers).handleUnknownMethodInQueue)||void 0===n||n.call(r,{requestType:e})}}catch(r){null===(s=(o=this.errorHandlers).handleErrorQueueEvent)||void 0===s||s.call(o,{requestType:e,requestData:t})}}))}}createChild(e){const t=e.copyParentHandlersData?{...this.handlersData,...null==e?void 0:e.handlersData}:e.handlersData;return new o.Eventea({referenceData:e.includeParentDataState?this.eventeaDataState:void 0,defaultDataHandlers:this.defaultDataHandlers,defaultEventHandlers:this.defaultEventHandlers,errorHandlers:this.errorHandlers,handlersData:t,projectConfigurationMap:this.projectConfigurationMap,routingClientLoader:this.routingClientLoader})}}t.RootEventea=s},2324:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64153:function(e,t){"use strict";function r(e,t){return("string"==typeof e||"number"==typeof e||"boolean"==typeof e)&&t.includes(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterPayloadByWhitelist=function(e,t){const n={...e};for(const o in t)if(o in e&&o in t)for(const s in t[o])if(s in e){const i=t[o][s];r(e[s],i)||delete n[o]}else delete n[o];return n}},42150:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statistHandlerFactory=function({statistClient:e}){return({event:t,payload:r,project:s,config:i,handlersData:a})=>{var c;let u=r||{};if(!function(e){return"object"==typeof e&&null!==e}(i))throw new Error("Unknown config for statist handler");{const l=`eventea.projects.${(0,n.camelCase)(s)}`,d=i.fullName||t,p=o(),h=a&&a.statist?a.statist:void 0;if(h&&h.commonParams&&p){const e={};for(const t of Object.keys(h.commonParams)){const{deprecated:r}=h.commonParams[t];!r&&t in p._prot.dataPool&&(e[t]=p._prot.dataPool[t])}u={...p._prot.collectDataElements(e),...u}}const{remapAsList:f}=i;if(f&&"eventea.projects.tjuchebnik"===l)for(const e of Object.keys(f))u[e]=f[e].params.map((t=>{var n,o,s;const i=(null===(n=f[e].paramsSource)||void 0===n?void 0:n[t])||"event";return"event"===i&&r&&t in r?String(null!==(o=r[t])&&void 0!==o?o:""):"dataPool"===i&&p&&t in p._prot.dataPool?String(null!==(s=p._prot.collectDataElement(p._prot.dataPool[t]))&&void 0!==s?s:""):""}));e.send(l,d,u);const m=null===(c=i.userProperties)||void 0===c?void 0:c.increment;m&&e.updateUserProperties(l,"increment",m)}}};const n=r(40021);function o(){if(window.tracking&&tracking._prot)return window.tracking}},86499:function(e,t,r){"use strict";t.I=void 0;var n=r(42150);Object.defineProperty(t,"I",{enumerable:!0,get:function(){return n.statistHandlerFactory}})},73212:function(e,t,r){"use strict";var n;r.d(t,{LO:function(){return n}}),function(e){e.iconLink="iconLink",e.meta="meta",e.inlineScript="inlineScript",e.script="script",e.asIs="asIs",e.preconnectLink="preconnectLink",e.preloadLink="preloadLink",e.inlineStyle="inlineStyle",e.style="style"}(n||(n={})),n.iconLink,n.meta,n.inlineScript,n.script,n.asIs,n.preconnectLink,n.preloadLink,n.inlineStyle,n.style},48945:function(e,t,r){"use strict";r.r(t),r.d(t,{BrowserReporter:function(){return m},LEVELS:function(){return u},LEVEL_NAMES:function(){return l},RemoteReporter:function(){return N},createLoggerFactory:function(){return f},default:function(){return b},formatJson:function(){return A},logger:function(){return b}});var n=r(94905),o=r.n(n),s=r(49103),i=r.n(s),a=r(5103),c=r.n(a);const u={trace:50,debug:40,info:30,warn:20,error:10,fatal:0,silent:-1/0},l={50:"trace",40:"debug",30:"info",20:"warn",10:"error",0:"fatal"},d=e=>new RegExp(`^${e.replace(/\*/g,".*?")}$`);class p{constructor(e={name:""}){if(this.name=o()(e.name),this.key=e.key||this.name,p.instances[this.key])return p.instances[this.key];this.beforeReporters=e.beforeReporters||[],this.reporters=e.reporters||[],this.filters=e.filters||[],this.extensions=e.extensions||[],this.defaults=e.defaults||{},e.level&&this.setLevel(u[e.level]),e.enabled&&this.setLevel(u.trace),this.checkEnabled(),p.instances[this.key]=this,i()(((e,t)=>{this[t]=(...t)=>this.log(e,t)}),u)}static save(){var e;null===(e=p.onChange)||void 0===e||e.call(p,{level:p.level,enabledName:this.enabledName,enabledLevel:this.enabledLevel})}static load(e){p.level=e.level,p.enabledName=e.enabledName,p.enabledLevel=e.enabledLevel}static setLevel(e){var t;p.level=null!==(t=u[e])&&void 0!==t?t:p.level,p.save()}static setOnChange(e){p.onChange=e}static enable(e,t){const[r,n]=t?[u[e],t]:[u.trace,e];p.enabledName.push(n),p.enabledLevel.push(r),p.save();const o=d(n);i()((e=>{const{name:t}=e;o.test(t)&&e.setLevel(r)}),p.instances)}static disable(e,t){const[r,n]=t?[u[e],t]:[u.silent,e],o=p.enabledName.indexOf(n);o>-1?(p.enabledName.splice(o,1),p.enabledLevel.splice(o,1)):(p.enabledName.push(n),p.enabledLevel.push(r)),p.save();const s=d(n);i()((e=>{const{name:t}=e;s.test(t)&&e.setLevel(r)}),p.instances)}static clear(){p.level=u.silent,p.enabledName=[],p.enabledLevel=[],p.save(),i()((e=>{e.setLevel(void 0)}),p.instances)}static setGlobalReporters(e){const t=c()(e);i()((e=>{e.reporters=t}),p.instances)}child(e){const t="string"==typeof e?{name:e}:e,r=t.key||t.name,n=this.name?`${this.name}.${t.name}`:t.name,o=this.key?`${this.key}.${r}`:r;return new p({beforeReporters:this.beforeReporters,reporters:this.reporters,filters:this.filters,extensions:this.extensions,defaults:this.defaults,...t,name:n,key:o})}addBeforeReporter(e){this.reporters=this.reporters.concat(e)}setBeforeReporters(e){this.reporters=c()(e)}addReporter(e){this.reporters=this.reporters.concat(e)}setReporters(e){this.reporters=c()(e)}addFilter(e){this.filters=this.filters.concat(e)}setFilters(e){this.filters=c()(e)}addExtension(e){this.extensions=this.extensions.concat(e)}setExtensions(e){this.extensions=c()(e)}setLevel(e){this.level=e}checkEnabled(){for(let e=p.enabledName.length-1;e>=0;e--){const t=p.enabledName[e];if(d(t).test(this.name))return void this.setLevel(p.enabledLevel[e])}}createLogObj(e,t){return{date:new Date,...this.defaults,name:this.name,type:l[e],level:e,args:t}}log(e,t){var r;let n;n||(n=this.createLogObj(e,t));for(const e of this.filters)if(!1===e.filter(n))return!1;for(const e of this.extensions)n=e.extend(n);const o=e>(null!==(r=this.level)&&void 0!==r?r:p.level);for(const e of this.reporters)o?e.emitLevels&&e.log(n):e.log(n);return!0}}p.level=u.silent,p.instances={},p.enabledName=[],p.enabledLevel=[];const h=["addBeforeReporter","setBeforeReporters","addReporter","setReporters","addFilter","setFilters","addExtension","setExtensions",...Object.keys(u)],f=e=>{const t=new p(e);return Object.assign((e=>t.child(e)),h.reduce(((e,r)=>(t[r]&&(e[r]=t[r].bind(t)),e)),{}),{setLevel:p.setLevel,setGlobalReporters:p.setGlobalReporters,enable:p.enable,disable:p.disable,clear:p.clear})};class m{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c00046",10:"#c0392b",20:"#f39c12",30:"#00BCD4"}}log(e){const t=e.level<20?console.error:20===e.level?console.warn:console.log,r=`\n      background: ${this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,n=`%c${[e.name,e.type].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t.call(console,`${n}%c ${e.args[0]}`,r,"",...e.args.slice(1)):t.call(console,n,r,...e.args)}}const v="_t_logger";let g,y;u.error;try{g=window.localStorage,y=JSON.parse(g.getItem(v))}catch(e){}y||(y=(()=>{try{return(e=>{if(!e)return;const t=e.split(",");return{level:u.silent,enabledLevel:Array(t.length).fill(u.trace),enabledName:t}})(window.localStorage.getItem("debug"))}catch(e){}})()),p.setOnChange((e=>{try{g.setItem(v,JSON.stringify(e))}catch(e){}})),y&&p.load(y);const b=f({name:"",reporters:[new m]});window.logger=b;var w=r(64805),E=r.n(w),S=r(67826),_=r.n(S),k=r(4216),T=r.n(k),C=r(34770),R=r.n(C),x=r(42282),M=r.n(x),P=r(7349);const O=e=>(T()(e)&&(e=new Error(e)),Object.defineProperties(e,{message:{enumerable:!0},stack:{enumerable:!0},cause:{enumerable:!0}}),"cause"in e&&"object"==typeof e.cause&&Object.defineProperties(e.cause,{message:{enumerable:!0},stack:{enumerable:!0}}),{...e,body:(0,P.K)(e.body),code:"string"==typeof e.code?e.code:(0,P.K)(e.code)}),A=e=>{let t,r,n=null;const{args:o}=e;o[0]instanceof Error?(r=O(o[0]),t=T()(o[1])?o[1]:o[0].message):R()(o[0])&&!M()(o[0])?(n=o[0],r=n.error&&O(n.error),o[0].message?t=o[0].message:T()(o[1])&&(t=o[1])):t=o[0];const s=o.slice(t===o[1]?2:1).map((e=>e instanceof Error?{error:O(e)}:e));return{...e,args:s.length?s:void 0,...n,error:r,message:t}};class N{constructor({requestCount:e,makeRequest:t,emitLevels:r}){this.reqCount=0,this.queue=[],this.requestCount=e||1,this.makeRequest=t,this.emitLevels=r||{fatal:!0}}checkQueue(){this.queue.length&&this.reqCount<this.requestCount&&this.sendRequest()}sendRequest(){const e=this.queue.shift();this.reqCount++,this.makeRequest(A(e)).catch(E()).then((()=>{this.reqCount--,this.checkQueue()}))}remote(e){this.queue.push(e),this.checkQueue()}log(e){const{type:t,remote:r}=e;null==r?this.emitLevels[t]&&this.remote(e):(!0===r||_()(["emitLevels",t],!0,r))&&this.remote({...e,remote:void 0})}}},56868:function(e){const t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=e=>e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?n:null;class n extends Array{constructor(e){super(e),this.fill(0)}}class o{constructor(e){if(0===e)return[];const t=r(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}e.exports=class{constructor(e={}){const{max:t=0,ttl:n,ttlResolution:s=1,updateAgeOnGet:i,allowStale:a,maxAge:c,stale:u}=e;this.max=t;const l=t?r(t):Array;this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new l(t),this.prev=new l(t),this.head=0,this.tail=0,this.free=new o(t),this.initialFill=1,this.size=0,this.allowStale=!!a||!!u,this.updateAgeOnGet=!!i,this.ttlResolution=s,this.ttl=n||c||0,this.ttl&&this.initializeTTLTracking()}initializeTTLTracking(){this.ttls=new n(this.max),this.starts=new n(this.max),this.setItemTTL=(e,r)=>{this.starts[e]=0!==r?t.now():0,this.ttls[e]=r},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?t.now():0};let e=0;const r=()=>{const r=t.now();if(this.ttlResolution>0){e=r;const t=setTimeout((()=>e=0),this.ttlResolution);t.unref&&t.unref()}return r};this.isStale=t=>0!==this.ttls[t]&&0!==this.starts[t]&&(e||r())-this.starts[t]>this.ttls[t]}updateItemAge(e){}setItemTTL(e,t){}isStale(e){return!1}set(e,t,{ttl:r=this.ttl}={}){let n=0===this.size?void 0:this.keyMap.get(e);return void 0===n?(n=this.newIndex(),this.keyList[n]=e,this.valList[n]=t,this.keyMap.set(e,n),this.next[this.tail]=n,this.prev[n]=this.tail,this.tail=n,this.size++):(t!==this.valList[n]&&(this.valList[n]=t),this.moveToTail(n)),0===r||0!==this.ttl||this.ttls||this.initializeTTLTracking(),this.setItemTTL(n,r),this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const t=this.head,r=this.keyList[t];return e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(r),this.size--,t}has(e){const t=this.keyMap.get(e);return void 0!==t&&!this.isStale(t)}peek(e,{allowStale:t=this.allowStale}={}){const r=this.keyMap.get(e);if(void 0!==r&&(t||!this.isStale(r)))return this.valList[r]}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet}={}){const n=this.keyMap.get(e);if(void 0!==n){const o=this.valList[n];return this.isStale(n)?(this.delete(e),t?o:void 0):(this.moveToTail(n),r&&this.updateItemAge(n),o)}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}delete(e){let t=!1;if(0!==this.size){const r=this.keyMap.get(e);void 0!==r&&(t=!0,1===this.size?this.clear():(this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)))}return t}clear(){this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.size=0}dump(){const e=[];for(const r of this.indexes()){const n=this.keyList[r],o=this.valList[r];if(void 0===o||void 0===n)continue;const s={value:o};if(this.ttls&&this.starts){s.ttl=this.ttls[r];const e=t.now()-this.starts[r];s.start=Math.floor(Date.now()-e)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(const[r,n]of e){if(n.start){const e=Date.now()-n.start;n.start=t.now()-e}this.set(r,n.value,n)}}*indexes(){if(this.size)for(let e=this.tail;this.isValidIndex(e)&&(yield e,e!==this.head);)e=this.prev[e]}isValidIndex(e){return void 0!==e&&this.keyMap.get(this.keyList[e])===e}}},96980:function(e,t,r){"use strict";r.d(t,{L:function(){return n}});const n=r(44121).useLayoutEffect},29376:function(e,t,r){"use strict";r.d(t,{$d:function(){return p},C5:function(){return w},Me:function(){return v},QO:function(){return b},kV:function(){return g},lw:function(){return k},mm:function(){return S},o2:function(){return E},t1:function(){return m}});var n=r(63472),o=r.n(n),s=r(38507),i=r.n(s),a=r(8958),c=r.n(a),u=r(67826),l=r.n(u),d=r(31565);const p="CORE",h=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE"],f={0:"ANONYMOUS",5:"AUTHENTICATED",20:"APPLICANT",30:"CANDIDATE",35:"REGISTERED",40:"CLIENT",50:"EMPLOYEE"},m=(0,d.cG)(p,h),v=()=>({...(0,d.n5)(m),[m.ANONYMOUS]:!0}),g=(e,t)=>{if(t===m.ANONYMOUS)return(0,d.ac)(e,p,v());let r=!0;const n=h.reduce(((e,n)=>(e[n]=r,n===t&&(r=!1),e)),{});return(0,d.ac)(e,p,n)},y=i()(p,{}),b=(c()([p,m.AUTHENTICATED],o()),l()([p,m.REGISTERED],!0)),w=l()([p,m.CLIENT],!0),E=e=>{const t=y(e);return!!t[m.REGISTERED]&&!t[m.CLIENT]},S=(e=0)=>g({[p]:{}},f[e]),_=h.length;function k(e,t){const r=y(e),n=y(t);if(r===n)return!1;for(let e=_-1;e>=0;e--){const t=h[e];if(!r[t]&&n[t])return!0}return!1}},31565:function(e,t,r){"use strict";r.d(t,{Mr:function(){return h},ac:function(){return d},cG:function(){return l},n5:function(){return f}});var n=r(65165),o=r.n(n),s=r(6073),i=r.n(s),a=r(38507),c=r.n(a),u=r(57801);const l=(e,t)=>t.reduce(((e,t)=>(e[t]=t,e)),Object.create(null)),d=(e,t,r)=>{var n;const o=null!==(n=c()(t,{},e))&&void 0!==n?n:{};return i()(((e,t)=>e===o[t]),r)?e:{...e,[t]:{...o,...r}}},p=r.n(u)()(o()),h=(e,t)=>{var r;const n=null!==(r=c()(t,{},e))&&void 0!==r?r:{};return i()((e=>!1===e),n)?e:{...e,[t]:p(n)}},f=e=>p(e)},70872:function(e,t,r){"use strict";r.d(t,{Xn:function(){return s},_q:function(){return o},qs:function(){return i}});var n=r(44121);const o=(0,n.createContext)(null),s=(0,n.createContext)(null),i=(0,n.createContext)(null)},54143:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});var n=r(44121),o=r(70872);const s=()=>(0,n.useContext)(o.Xn)},81935:function(e,t,r){"use strict";r.d(t,{w:function(){return s}});var n=r(44121),o=r(70872);const s=()=>(0,n.useContext)(o.qs)},60488:function(e,t,r){"use strict";var n=r(53175),o=r(15779),s=r(40367),i=r(54794),a=r(67826),c=r(72446),u=r(8958);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),h=l(s),f=l(i),m=l(a),v=l(c);const g=["click","scroll","keypress"],y=12e4,b=l(u).default(["sessionWillExpireIn"],(e=>e-(new Date).getTime()<=24e4)),w=f.default(m.default(["accessLevel"],"ANONYMOUS")),E=(h.default(b,w),p.default(w));t.FO=w,t.ZP=class{constructor({sessionManager:e}){this.startPollingAuthorizedSessionStatus=()=>{if(this.alreadyPollingSession())return;const e=({millisLeft:e})=>{const r=e<y?e:y;return this.schedule(t,r)},t=()=>this.sessionManager.updateSessionStatus(this.sessionManager.getSessionId()).then(v.default(E(e))).catch(this.unSchedule);this.scheduleHandle&&this.unSchedule(),this.schedule(t,y)},this.schedule=(e,t)=>{this.scheduleHandle=setTimeout(e,t)},this.unSchedule=()=>{clearTimeout(this.scheduleHandle),this.scheduleHandle=void 0},this.sessionManager=e,this.scheduleHandle=null}startProlongateSessionOnUserActivity(){this.startListenForUserActivity((()=>{this.sessionManager.prolongateSession(this.sessionManager.getSessionId())}))}alreadyListeningForUserActivity(){return!!this.throttledUserActivitySubscriber}alreadyPollingSession(){return!!this.scheduleHandle}startListenForUserActivity(e){this.alreadyListeningForUserActivity()||(this.throttledUserActivitySubscriber=d.default(6e4,(()=>setTimeout(e,5e3))),g.forEach((e=>{window.addEventListener(e,this.throttledUserActivitySubscriber,!0)})))}}},98799:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1}))},68989:function(e,t,r){"use strict";var n=r(95775),o=r(42282),s=r(69309),i=r(6573);e.exports=n(2,(function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),o(e))return e.concat(t);if(s(e)){for(var r=i(0,e.length,e),n=0;n<t.length;n++)r.push(t[n]);return r}return e+t}))},24034:function(e,t,r){"use strict";var n=r(95775),o=r(58960);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=0;n<e.length;n++)o(e[n],t)<0&&r.push(e[n]);return r}))},15434:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)e(t[r],r,t)}))},62491:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}))},44831:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return t[r]}))},97939:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return r;return-1}))},30353:function(e,t,r){"use strict";var n=r(69309);e.exports=function e(t){void 0===t&&(t=[]);for(var r=[],o=0;o<t.length;o++){var s=t[o];if(n(s))for(var i=e(s),a=0;a<i.length;a++)r.push(i[a]);else r.push(s)}return r}},18542:function(e,t,r){"use strict";var n=r(95775),o=r(58960);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),-1!==o(e,t)}))},58960:function(e,t,r){"use strict";var n=r(95775),o=r(4216);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),o(t)?t.indexOf(e):Array.prototype.indexOf.call(t,e)}))},37093:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=e(t[o],o,t);return n}))},60694:function(e,t,r){"use strict";var n=r(95775);e.exports=n(3,(function(e,t,r){void 0===r&&(r=[]);for(var n=r.length,o=0;o<n;o++)t=e(t,r[o],o,r);return t}))},6573:function(e,t,r){"use strict";var n=r(95775),o=r(4216);e.exports=n(3,(function(e,t,r){return void 0===r&&(r=[]),o(r)?r.slice(e,t):Array.prototype.slice.call(r,e,t)}))},5103:function(e,t,r){"use strict";var n=r(42282),o=r(69309);e.exports=function(e){return n(e)?e:o(e)?Array.prototype.slice.call(e):[e]}},7605:function(e){"use strict";e.exports=function(e){void 0===e&&(e=[]);for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}},8621:function(e,t,r){"use strict";var n=r(42282);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t[0])?Object.assign.apply(Object,[[]].concat(t)):Object.assign.apply(Object,[{}].concat(t))}},65165:function(e){"use strict";e.exports=function(){return!1}},84056:function(e){"use strict";e.exports=function(){return!0}},84762:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0;o<e.length;o++)if(!e[o].apply(e,r))return!1;return!0}))},77367:function(e){"use strict";e.exports=function(e){return function(){return e}}},22422:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return"function"==typeof t?t.apply(void 0,e):t}))},40367:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)&&t.apply(void 0,arguments)}}))},54794:function(e){"use strict";e.exports=function(e){return function(){return!e.apply(void 0,arguments)}}},63119:function(e){"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=t.length-1,r=t[e].apply(t,arguments),n=e-1;n>=0;n--)r=t[n](r);return r}}},78705:function(e){"use strict";e.exports=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=0;o<e.length;o++)if(e[o][0].apply(this,r))return e[o][1].apply(this,r)}}},58111:function(e,t,r){"use strict";var n=r(95775);e.exports=function(e){return n(e.length,e)}},95775:function(e){"use strict";e.exports=function(e,t){return function r(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e?t.apply(this,o):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,o.concat(t))}}}},27714:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){var r;function n(){var n=this,o=arguments;clearTimeout(r),r=setTimeout((function(){return t.apply(n,o)}),e)}return n.cancel=function(){return clearTimeout(r)},n}))},17848:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)||t.apply(void 0,arguments)}}))},79436:function(e){"use strict";e.exports=function(e){return e}},24970:function(e,t,r){"use strict";var n=r(95775);e.exports=n(3,(function(e,t,r){return function(){return e.apply(void 0,arguments)?t.apply(void 0,arguments):r.apply(void 0,arguments)}}))},98873:function(e,t,r){"use strict";var n=r(52158);e.exports=function(e,t){void 0===t&&(t=n);var r,o=[],s=!1,i=function(e,r){return t(e,o[r])};return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return s&&n.length===o.length&&n.every(i)||(r=e.apply(void 0,n),s=!0,o=n),r}}},64805:function(e){"use strict";e.exports=function(){}},8152:function(e){"use strict";e.exports=function(){}},46226:function(e){"use strict";e.exports=function(e){var t,r=!1;return function(){return r||(t=e.apply(void 0,arguments),r=!0),t}}},53175:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){var r,n;return function(){for(var o=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var c=Date.now(),u=r+e-c;r&&u>0?(clearTimeout(n),n=setTimeout((function(){r=c,t.apply(o,i)}),u)):(r=c,t.apply(this,i))}}))},15779:function(e,t,r){"use strict";var n=r(95775);e.exports=n(3,(function(e,t,r){return e(r)?t(r):r}))},42282:function(e){"use strict";e.exports=function(e){return!!e&&Array.isArray(e)}},69309:function(e,t,r){"use strict";var n=r(42282),o=r(4216),s=r(77125);e.exports=function(e){switch(!0){case n(e):return!0;case!e:case"object"!=typeof e:case o(e):return!1;case 1===e.nodeType:return!!e.length;case 0===e.length:return!0;case e.length>0:return s("0",e)&&s(String(e.length-1),e)}return!1}},92877:function(e,t,r){"use strict";var n=r(13641),o=r(42282),s=r(4216),i=r(34770);e.exports=function(e){switch(!0){case n(e):return!0;case s(e):return""===e;case o(e):return 0===e.length;case i(e):return 0===Object.keys(e).length}return!1}},52158:function(e,t,r){"use strict";var n=r(58111),o=r(42282),s=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||e!==Object(e)||!e||!t)return!1;if(o(e)&&o(t))return function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(!s(e[n],t[n]))return!1;return!0}(e,t);var r=Object.prototype.toString.call(e);return"[object Object]"===r&&Object.prototype.toString.call(t)===r?function(e,t){var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(var o=0;o<n;o++){var i=r[o];if(!Object.prototype.hasOwnProperty.call(t,i)||!s(e[i],t[i]))return!1}return!0}(e,t):"function"==typeof e?e===t:function(e,t){return e.toString()===t.toString()}(e,t)};e.exports=n(s)},70430:function(e){"use strict";e.exports=function(e){return"function"==typeof e}},13641:function(e){"use strict";e.exports=function(e){return null==e}},20596:function(e){"use strict";e.exports=function(e){return"number"==typeof e||e instanceof Number}},34770:function(e){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},39609:function(e,t,r){"use strict";var n=r(33689),o=r(41974),s=r(34770);e.exports=function(e){if(!s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype&&(!n(e)&&!o(e))}},92366:function(e,t,r){"use strict";var n=r(34770),o=r(70430);e.exports=function(e){return(n(e)||o(e))&&o(e.then)}},41974:function(e,t,r){"use strict";var n,o=r(77125);try{n=r(36899).isValidElementType}catch(e){}n||(n=function(e){return"string"==typeof e||"function"==typeof e||!!e&&o("$$typeof",e)}),e.exports=n},33689:function(e,t,r){"use strict";var n,o=r(77125);try{n=r(36899).isElement}catch(e){}n||(n=function(e){return!!e&&o("$$typeof",e)}),e.exports=n},5881:function(e,t,r){"use strict";var n=r(34770),o=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if(!n(e)||!n(t))return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var s=0;s<r.length;s++){var i=r[s];if(!o.call(t,i)||e[i]!==t[i])return!1}return!0}},4216:function(e){"use strict";e.exports=function(e){return"string"==typeof e||e instanceof String}},63472:function(e){"use strict";e.exports=function(e){return!e}},6073:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&!e(t[r],r,t))return!1;return!0}))},96105:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t))return!0;return!1}))},49103:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}))},147:function(e){"use strict";e.exports=function(e){void 0===e&&(e=[]);for(var t={},r=0;r<e.length;r++)t[e[r][0]]=e[r][1];return t}},77125:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))},55500:function(e,t,r){"use strict";var n=r(34770);e.exports=function(e){return n(e)?Object.keys(e):[]}},57801:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===t&&(t={});var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n],n,t));return r}))},99454:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}))},28288:function(e,t,r){"use strict";var n=r(95775),o=r(39609),s=r(55500),i=r(8621);e.exports=n(2,(function e(){for(var t=i((arguments.length<=0?void 0:arguments[0])||{}),r=1;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];if(n)for(var a=s(n),c=0;c<a.length;c++){var u=a[c],l=n[u],d=t[u];o(d)&&o(l)?t[u]=e(d,l):t[u]=l}}return t}))},56274:function(e,t,r){"use strict";var n=r(95775),o=r(55500),s=r(8621);e.exports=n(3,(function(e){for(var t=s(arguments.length<=1?void 0:arguments[1]),r=1;r<(arguments.length<=1?0:arguments.length-1);r++)for(var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1],i=o(n),a=0;a<i.length;a++){var c=i[a];Object.prototype.hasOwnProperty.call(t,c)?t[c]=e(t[c],n[c],c,t,n):t[c]=n[c]}return t}))},23629:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){var r;return(r={})[e]=t,r}))},52141:function(e,t,r){"use strict";var n=r(95775),o=r(55500);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=Object.create(null),n=0;n<e.length;n++)r[e[n]]=!0;for(var s={},i=o(t),a=0;a<i.length;a++){var c=i[a];r[c]||(s[c]=t[c])}return s}))},60028:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;n<e.length;n++){if(null==r)return;r=r[e[n]]}return r}))},8958:function(e,t,r){"use strict";var n=r(95775),o=r(60028);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),t(o(e,r),e,r)}))},67826:function(e,t,r){"use strict";var n=r(95775),o=r(60028);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),o(e,r)===t}))},33057:function(e,t,r){"use strict";var n=r(95775),o=r(60028);e.exports=n(3,(function(e,t,r){void 0===e&&(e=[]),void 0===r&&(r={});var n=o(e,r);return null!=n?n:t}))},28296:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return null!=t?t[e]:void 0}))},81510:function(e,t,r){"use strict";var n=r(95775),o=r(28296);e.exports=n(3,(function(e,t,r){return o(e,r)===t}))},38507:function(e,t,r){"use strict";var n=r(95775),o=r(28296);e.exports=n(3,(function(e,t,r){var n=o(e,r);return null!=n?n:t}))},53170:function(e,t,r){"use strict";var n=r(55500);e.exports=function(e){for(var t=n(e),r=t.length,o=new Array(r),s=0;s<r;s++)o[s]=e[t[s]];return o}},72446:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return Promise.resolve().then((function(){return e(t)})).then((function(){return t}))}))},11712:function(e,t,r){"use strict";var n=r(81542),o=r(44317);e.exports=function(e){return n(e).map((function(e,t){return 0===t?e.toLowerCase():o(e.toLowerCase())})).join("")}},21461:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}))},18826:function(e){"use strict";var t=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=function(e){return r[e]};e.exports=function(e){return void 0===e&&(e=""),e.replace(t,n)}},83958:function(e,t,r){"use strict";var n=r(81542);e.exports=function(e){return n(e).map((function(e){return e.toLowerCase()})).join("-")}},87300:function(e,t,r){"use strict";var n=r(95775),o=r(4216);e.exports=n(2,(function(e,t){if(void 0===e&&(e=0),!o(t))return"";for(var r="",n=0;n<e;n++)r+=t;return r}))},63609:function(e,t,r){"use strict";var n=r(95775);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),r.replace(e,t)}))},56257:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.split(e)}))},67744:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(0,e.length)===e}))},14033:function(e,t,r){"use strict";var n=r(95775);e.exports=n(2,(function(e,t){return void 0===e&&(e=/()/),void 0===t&&(t=""),e.test(t)}))},94905:function(e){"use strict";e.exports=function(e){return void 0===e&&(e=""),e.toLowerCase()}},44317:function(e){"use strict";e.exports=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)}},81542:function(e){"use strict";var t=/([a-z])([A-Z])/g,r=/[^a-zA-Z]+/g;e.exports=function(e){return e.replace(t,(function(e,t,r){return t+" "+r})).split(r)}},10950:function(e,t){"use strict";t.A=void 0,t.A=function(){return new Promise((function(e){var t=window.tracking;t&&t.fullfill?t.trackingReady?t.trackingReady().then(e):e(t):window.addEventListener("tracking-created",(function(t){t instanceof CustomEvent&&e(t.detail||window.tracking)}))}))}},18422:function(e,t){"use strict";t.x4=t.OR=void 0,t.OR=function(e,t){var r=t.event,n=t.config,o=void 0===n?{}:n,s=t.payload,i=r,a=void 0===s?{}:s;"pushTrack"===o.type&&(i=o.type,a.pageAction?a._event=r:a.pageAction=r),e.event.call({isSendContext:!0,fromEventea:!0},i,a)},t.x4=function(e,t){var r=t.payload,n=void 0===r?{}:r;e.extend(n)}},72478:function(e,t,r){"use strict";var n=r(80476),o=r(49593),s=(0,n.__importDefault)(r(88511)),i=function(){function e(){var e=this;this.utils={},this.proxy=!0,this.addUtil=this.createProxiedMethod((function(e){return e.addUtil})),this.updateLocation=this.createProxiedMethod((function(e){return e.updateLocation})),this.addPixel=this.createProxiedMethod((function(e){return e.addPixel})),this.addEventsHandler=this.createProxiedMethod((function(e){return e.addEventsHandler})),this.use=this.createProxiedMethod((function(e){return e.use})),this._clearAllListeners=this.createProxiedMethod((function(e){return e._clearAllListeners})),this._event=this.createProxiedMethod((function(e){return e.event})),this._stateAcc={},this._listeners=Object.create(null),this.ready=new Promise((function(t){e._readyResolve=t})),this.trackingReady=new Promise((function(t){e._trackingResolve=t}))}return Object.defineProperty(e.prototype,"_version",{get:function(){return this.tracking?this.tracking._version:"proxy-5.71.6"},enumerable:!1,configurable:!0}),e.prototype.setTracking=function(e){var t=this;this.tracking=e;var r=Object.keys(e.state).length>0;this._trackingResolve(e),e.ready.then(this._readyResolve),e.extend(this._stateAcc),r&&this._listeners.change&&this._listeners.change.forEach((function(r){r(e.state,t._stateAcc)})),this._listeners=Object.create(null)},e.prototype.addPixels=function(e){return this.tracking?this.tracking.addPixels(e):this.trackingReady.then((function(t){return t.addPixels(e)}))},e.prototype.resolve=function(e){var t=this;return Promise.resolve(e).then((function(e){return t.setTracking(e),e}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.tracking?this.tracking.state:this._stateAcc},enumerable:!1,configurable:!0}),e.prototype.callUtil=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return this.tracking?(t=this.tracking).callUtil.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){return t.callUtil.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.fullfill=function(e){return this.tracking?this.tracking.fullfill(e):this.trackingReady.then((function(t){return t.fullfill(e)}))},e.prototype.extend=function(e){if(this.tracking)return this.tracking.extend(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.assoc)(t,n,e[r])}),this._stateAcc);return this.update(t)},e.prototype.extendDeep=function(e){if(this.tracking)return this.tracking.extendDeep(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.update)(t,n,(function(e,t){return(0,s.default)(e)&&(0,s.default)(t)?(0,o.deepMerge)(e,t):t}),e[r])}),this._stateAcc);return this.update(t)},e.prototype.update=function(e){return this.tracking?this.tracking.update(e):(this._stateAcc!==e&&(this._stateAcc=e),this)},e.prototype.remove=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.tracking)return(e=this.tracking).remove.apply(e,t);var s=o.dissoc.apply(void 0,(0,n.__spreadArray)([this._stateAcc],t.map((function(e){return e.split(".")})),!1));return this.update(s)},e.prototype.on=function(e,t){this.tracking?this.tracking.on(e,t):("change"===e&&(this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)),this.trackingReady.then((function(r){r.on(e,t)})))},e.prototype.event=function(e,t){return"u"!=="object"[0]?this._event(e,t):this},e.prototype.off=function(e,t){this.tracking?this.tracking.off(e,t):("change"===e&&this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t}))),this.trackingReady.then((function(r){r.off(e,t)})))},e.prototype.emit=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];this.tracking?(t=this.tracking).emit.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){t.emit.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.waitFor=function(e){return this.trackingReady.then((function(t){return t.waitFor(e)}))},e.prototype.createProxiedMethod=function(e){var t=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.tracking?e(t.tracking).apply(t.tracking,r):t.trackingReady.then((function(t){e(t).apply(t,r)})),t}},e}();t.Z=i},88511:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype}},95493:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});const n=(0,r(44121).createContext)({loader:void 0})},10831:function(e,t,r){"use strict";r.d(t,{Y:function(){return i}});var n=r(21461),o=r.n(n);const s={config:{},navigate:{url:{query:{}}},params:{}},i=(e,t)=>{if(!e)return s;const r=(e=>{var t;const{path:r,parentName:n,properties:s,...i}=null!==(t=e.config)&&void 0!==t?t:{};return{...i,...s,path:o()("/",r)?r:`${r}/`,parent:n}})(e);return{...e,config:r,navigate:{url:t},url:r.path,query:t.query,parsedUrl:t}}},8837:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});const n=(e,t)=>"string"==typeof e?{[e]:t}:"object"==typeof e?e:null},48001:function(e,t,r){"use strict";r.d(t,{C:function(){return g}});var n=r(44121),o=r(13873),s=r(12098),i=r.n(s);function a(e){return!!e.synchronized}function c(e){return!!e.supposed}function u(e){return!!e.retina}function l(e){return e.width<=i().PHONE_SMALL}function d(e){return e.width>=i().TABLET_S}function p(e){return e.width>=i().TABLET_L}function h(e){return e.width>=i().DESKTOP_S}function f(e){return e.width>=i().DESKTOP_M}function m(e){return e.width>=i().DESKTOP_MD}function v(e){return e.width>=i().DESKTOP_L}function g(){const e=(0,o.GS)();return(0,n.useMemo)((()=>function(e){return{fromClientHints:a(e),supposed:c(e),isRetina:u(e),isPhone:!d(e),isPhoneSmall:l(e),isTablet:d(e),isTabletS:d(e),isTabletL:p(e),isMobile:!h(e),isDesktop:h(e),isDesktopS:h(e),isDesktopM:f(e),isDesktopMd:m(e),isDesktopL:v(e)}}(e)),[e])}},38461:function(e,t,r){"use strict";r.d(t,{nm:function(){return F},Op:function(){return V}});var n=r(80476),o=r(80283),s=r(59999),i=r(29256),a=r(87514),c=r(8479),u=r(73212),l=r(23436),d=r(90130),p=r(44121),h=r(63119),f=r.n(h),m=r(37527),v=r(8837),g=r(26294),y=r(29772),b=r(29376),w=r(98873),E=r.n(w),S=r(79436),_=r.n(S),k=r(10831),T=r(44488),C=r(77125),R=r.n(C),x=r(33057),M=r.n(x),P=r(48001),O=r(17173);const A=(0,s.V3)("HEADER_MENU_TRANSFORM_TOKEN"),N=(0,s.V3)("HEADER_CONFIG_TRANSFORM_TOKEN"),I=f()(R()("auth"),M()(["query"],{})),L=E()(((e,t)=>{var r;const n=(0,k.Y)(e,t);return{...n,url:null===(r=n.parsedUrl)||void 0===r?void 0:r.path}}),((e,t)=>e===t)),D=({featureToggle:e,router:{currentRoute:t,currentUrl:r},roles:n,environment:{TINKOFF_API:o,SME_URL:s},menuCounters:i})=>({authorized:(0,b.QO)(n),isPreAuth:I(t.parsedUrl)||!1,currentRoute:L(t,r)||{currentRoute:{config:{}}},featureToggle:e,userRoles:n,tinkoffApi:o,smeUrl:s,menuCounters:i}),j=f()(p.memo,(e=>function(t){const{appInfo:r,transformMenu:n,transformConfig:o,pubsub:s}=(0,T.x)({appInfo:y.Qo,pubsub:O.k3,transformMenu:{token:A,optional:!0},transformConfig:{token:N,optional:!0}}),i=(0,P.C)(),a=(0,g.v)(["featureToggle","router","environment",{store:"menuCounters",optional:!0},{store:"roles",optional:!0},{store:"region",optional:!0}],D),{appName:c}=null!=r?r:{},u=(0,p.useMemo)((()=>null!=n?n:_()),[n]),l=(0,p.useMemo)((()=>null!=o?o:_()),[o]);return(0,d.jsx)(e,{...t,...a,transformMenu:u,transformConfig:l,media:i,appId:c,pubsub:s})}))((({variation:e,...t})=>(0,d.jsx)(m.Y,{moduleName:"header",moduleProps:{...t,variation:(0,v.P)(e,t)}}))),F=(0,s.V3)("HEADER_COMPONENT_TOKEN");let V=class{};V=(0,n.__decorate)([(0,o.Y)({imports:[i.Gz],providers:[{provide:c.zS,multi:!0,useValue:[{type:u.LO.asIs,slot:l.X9,payload:'<input id="menuPrimaryToggle" type="checkbox" class="h-menu-primary-toggle" hidden />'}]},{provide:F,useValue:j},{provide:a.l,multi:!0,useValue:"headerConfig"}]})],V)},21789:function(e,t,r){"use strict";r.d(t,{E:function(){return o},Kf:function(){return i},OZ:function(){return c},nN:function(){return a},se:function(){return s}});var n=r(59999);const o=(0,n.V3)("STATIST_API_CLIENT"),s=(0,n.V3)("STATIST_EVENT_API_CLIENT"),i=(0,n.V3)("STATIST_METRIC_API_CLIENT"),a=(0,n.V3)("TRACK_AND_UPDATE_SSO_ID_FLAG"),c=(0,n.V3)("STATIST_ENRICHMENT")},29256:function(e,t,r){"use strict";r.d(t,{Gz:function(){return d}});var n=r(80476),o=r(80283),s=r(37621),i=r(42353),a=r(58426);const c=(0,i.y)("UPDATE_UI_MODULES_CONFIG"),u=(0,a.L)("uiModulesConfig",{}).on(c,((e,t)=>t)),l=[{provide:s.Ym,useValue:u,multi:!0}];let d=class{};d=(0,n.__decorate)([(0,o.Y)({providers:[...l]})],d)},87514:function(e,t,r){"use strict";r.d(t,{l:function(){return n}});const n=(0,r(59999).V3)("UIMODULE_CONFIG_KEYS",{multi:!0})},84287:function(e,t,r){"use strict";r.d(t,{l:function(){return d}});var n=r(63119),o=r.n(n),s=r(67744),i=r.n(s),a=r(60694),c=r.n(a);const u=[/<link[^>]+>/gi,/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script\s*>/gi],l="https://secure.tcsbank.ru/acs/auth/finish.do",d=o()(((e="")=>i()(l,e)?l:e),((e="")=>c()(((e,t)=>e.replace(t,"")),e,u)))},67570:function(e,t,r){"use strict";r.d(t,{Bv:function(){return s},X9:function(){return v},Yw:function(){return l},eW:function(){return i},g3:function(){return p},gk:function(){return o},j5:function(){return u},lb:function(){return m},nM:function(){return c},q2:function(){return d},qJ:function(){return f},qq:function(){return h},rF:function(){return a}});var n=r(59999);const o=(0,n.V3)("EVENTEA_PROJECT_ROUTING",{multi:!0}),s=(0,n.V3)("EVENTEA_TOKEN"),i=(0,n.V3)("EVENTEA_PROJECT_HANDLERS",{multi:!0}),a=(0,n.V3)("EVENTEA_ROUTING"),c=(0,n.V3)("EVENTEA_ERROR_HANDLERS"),u=(0,n.V3)("EVENTEA_DEFAULT_LOG_HANDLER"),l=(0,n.V3)("EVENTEA_STATIST_HANDLER"),d=(0,n.V3)("EVENTEA_DEFAULT_TRACKING_HANDLER"),p=(0,n.V3)("EVENTEA_TWT_DATA_HANDLER"),h=(0,n.V3)("EVENTEA_DEFAULT_EVENT_HANDLER",{multi:!0}),f=(0,n.V3)("EVENTEA_DEFAULT_DATA_HANDLER",{multi:!0}),m=(0,n.V3)("EVENTEA_CLIENT_LOADER_TIMEOUT"),v=(0,n.V3)("EVENTEA_PRELOAD_PROJECTS_SELECTOR")},35351:function(e,t,r){"use strict";r.d(t,{Ti:function(){return s},aP:function(){return i},h_:function(){return o},u4:function(){return a}});var n=r(59999);const o=(0,n.V3)("FOOTER_COMPONENT_TOKEN"),s=(0,n.V3)("FOOTER_CONFIG_TRANSFORM_TOKEN"),i=(0,n.V3)("FOOTER_OPEN_MODEL_CALLBACK_TOKEN"),a=(0,n.V3)("FOOTER_HANDLE_METRICS_TOKEN")},20689:function(e,t){"use strict";t.Z={routes:{},pages:{},layouts:{},errorBoundaries:{},wildcards:{}}},71341:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(68989),o=r.n(n),s=r(56274),i=r.n(s),a=r(52141),c=r.n(a);const u=(e,t)=>Array.isArray(e)&&Array.isArray(t)?o()(e,t):"object"==typeof e&&"object"==typeof t?i()(u,e,t):t,l=i()(u),d=e=>{if(!e||!e.length)return{};const t=e.map((e=>l(d(e.presets),c()(["presets"],e))));return 1===t.length?t[0]:l(...t)};function p(e){let t={};return e.presets&&(t=d(e.presets)),l(t,e)}},13873:function(e,t,r){"use strict";r.d(t,{GS:function(){return o}});var n=r(26294);function o(){return(0,n.v)("media",(({media:e})=>e))}},96115:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});class n{constructor(){this.isResolved=()=>void 0!==this.resolveData,this.isRejected=()=>void 0!==this.rejectReason,this.reset=()=>{this.resolveData=void 0,this.rejectReason=void 0,this.promise=this.initPromise()},this.initPromise=()=>new Promise(((e,t)=>{this.resolve=t=>{this.resolveData=t,e(t)},this.reject=e=>{this.rejectReason=e,t(e)}})),this.promise=this.initPromise()}}},37527:function(e,t,r){"use strict";r.d(t,{Y:function(){return Y}});var n=r(90130),o=r(92366),s=r.n(o),i=r(44121),a=r.n(i),c=r(82342),u=r(44488),l=r(13516),d=r(95493),p=r(8479),h=r(96115);const f=()=>(0,n.jsx)("div",{});var m=r(37621),v=r(70430),g=r.n(v),y=r(4216),b=r.n(y),w=r(33689),E=r.n(w),S=r(77367),_=r.n(S),k=r(78705),T=r.n(k),C=r(79436),R=r.n(C),x=r(64805),M=r.n(x),P=r(84056),O=r.n(P);const A=e=>t=>{const[r,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(!t.current||r)return;const o=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),n(!0))}))}),e);return o.observe(t.current),()=>{o.disconnect()}}),[t]),r},N={__html:""},I=A({root:null,rootMargin:"200px 0px 0px 0px"}),L=({mode:e,children:t,useObserver:r=I,wrapper:n="div",wrapperProps:o={},serverCache:s,cacheKey:c,cacheEnabled:u})=>{const l=(0,i.useRef)(null);return r(l)||"static"===e?a().createElement(n,{...o},t):a().createElement(n,{ref:l,suppressHydrationWarning:!0,dangerouslySetInnerHTML:N,...o})};L.displayName="LazyRender";const D=T()([[g(),a().createElement],[E(),a().cloneElement],[b(),R()],[O(),_()("")]]);class j extends i.Component{constructor(e,t){super(e,t);const{loader:r,serverFailed:n}=this.props,o=null==r?void 0:r(e.moduleName,e.moduleVersion,{lazy:!!e.lazy}),i=s()(o);this.state={module:i||!o||n?null:o.default,failed:!o}}componentDidMount(){const{loader:e,serverFailed:t,moduleName:r,moduleVersion:n,lazy:o}=this.props,i=null==e?void 0:e(r,n,{lazy:!!o});s()(i)?i.then((e=>this.setState({module:e.default}))).catch((()=>this.setState({failed:!0}))):t&&i&&this.setState({module:i.default})}render(){const{error:e,loading:t,moduleProps:r,moduleInitialState:o,moduleInnerStore:s}=this.props,{module:i,failed:a}=this.state;return i?(0,n.jsx)(i,{...r,moduleInnerStore:s,moduleInitialState:o}):D(a?e:t)}}j.displayName="ModuleWrapper",j.defaultProps={error:(0,n.jsx)("div",{}),loading:(0,n.jsx)("div",{})};const F={root:null,rootMargin:"200px 0px 0px 0px"},V=e=>{const{moduleName:t,moduleVersion:r,loader:o,lazyMode:s,lazyObserverOptions:a,lazyWrapper:c,lazyWrapperProps:u}=e,l=(0,i.useMemo)((()=>(({moduleName:e,moduleVersion:t,loader:r,lazyObserverOptions:n})=>{const o=A(n||F);return n=>{const s=o(n),[a,c]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{s&&r&&Promise.resolve(r(e,t)).catch(M()).then((()=>{c(!0)}))}),[s]),a}})({moduleName:t,moduleVersion:r,loader:o,lazyObserverOptions:a})),[t,r,o,a]);return(0,n.jsx)(L,{useObserver:l,wrapper:c,wrapperProps:u,mode:s,children:(0,n.jsx)(j,{...e})})},B=e=>(0,n.jsx)(d._.Consumer,{children:({loader:t})=>e.lazy?(0,n.jsx)(V,{...e,loader:t,lazyMode:void 0}):(0,n.jsx)(j,{...e,loader:t})});var U=r(36840),q=r(46669),$=r(7519);const H=e=>{var t;const{moduleName:r,moduleProps:o}=e,s=(0,u.x)(c.Fp),a=(0,u.x)(m.kR),l=(0,u.x)(p.hM),d=(0,i.useMemo)((()=>"streaming"===l?a.getState(q.jB).modulesState[r]:void 0),[]),{modulesState:h,modulesInnerStore:f}=(0,U.o)(q.jB),v={moduleInitialState:null!==(t=h[r])&&void 0!==t?t:d,moduleInnerStore:f[r]instanceof $.N?f[r]:new $.N(f[r])};return(0,n.jsx)(B,{...e,...v,serverFailed:a.getState().module.serverFailedModules.includes(r),moduleProps:{logger:s,...o}})};H.displayName="ModuleInnerWrapper";const J=({deferred:e,children:t})=>{if(e.isResolved())return t;if(e.isRejected())throw e.rejectReason;throw e.promise},z=({name:e,logger:t,fallback:r})=>r?(0,n.jsx)(r,{}):null,G=({children:e,reactRenderMode:t,moduleName:r,logger:o,fallback:s,deferred:a})=>(0,n.jsx)(i.Suspense,{fallback:"streaming"===t?null:(0,n.jsx)(z,{name:r,logger:o,fallback:s}),children:"streaming"===t?(0,n.jsx)(J,{deferred:a,children:e}):e}),Y=(0,i.memo)((e=>{var t;const{moduleName:r,moduleVersion:o,fallback:a}=e,m=(0,u.x)(c.Fp),v=(0,u.x)(p.hM),{loader:g}=(0,i.useContext)(d._),y=(0,i.useMemo)((()=>new h.B),[]);return(0,i.useMemo)((()=>{if("streaming"===v){const t=null==g?void 0:g(r,o,{lazy:!!e.lazy});s()(t)?t.then(y.resolve).catch(y.reject):t?y.resolve(t):y.reject(new Error(`${r}@${o} module loading failed`))}}),[]),(0,n.jsx)(l.E,{fallback:null!==(t=e.error)&&void 0!==t?t:f,children:G({children:(0,n.jsx)(H,{...e}),reactRenderMode:v,logger:m,moduleName:r,deferred:y,fallback:a})})}));Y.displayName="ModuleWrapper"},7519:function(e,t,r){"use strict";r.d(t,{N:function(){return n}});class n{constructor(e=Object.create(null)){this.state=e}get(e){return this.state[e]}set(e){this.state={...this.state,...e}}clear(){this.state=Object.create(null)}getState(){return this.state}}},46669:function(e,t,r){"use strict";r.d(t,{jB:function(){return h},tF:function(){return u}});var n=r(57801),o=r.n(n),s=r(42353),i=r(58426),a=r(7519);const c=(0,s.y)("LOAD_MODULES_CONFIG"),u=(0,s.y)("SET_MODULE_STATE"),l=(0,s.y)("ADD_SERVER_FAILED_MODULE"),d=(0,s.y)("CLEAR_SERVER_FAILED_MODULE"),p=(0,s.y)("CLEAR_MODULE_STATE"),h=(0,i.L)("module",{modulesConfig:{},modulesState:{},modulesInnerStore:{},serverFailedModules:[]}).on(c,((e,t)=>({...e,modulesConfig:t,modulesInnerStore:o()(((e,t)=>new a.N),t)}))).on(u,((e,{name:t,state:r})=>({...e,modulesState:{...e.modulesState,[t]:{...e.modulesState[t],...r}}}))).on(p,((e,t)=>({...e,modulesState:{...e.modulesState,[t]:void 0}}))).on(l,((e,t)=>e.serverFailedModules.includes(t)?e:{...e,serverFailedModules:[...e.serverFailedModules,t]})).on(d,((e,t)=>e.serverFailedModules.includes(t)?{...e,serverFailedModules:e.serverFailedModules.filter((e=>e!==t))}:e));h.prototype.rehydrate=function(e){const{modulesInnerStore:t}=e;this.state={...e,modulesInnerStore:o()((e=>new a.N(e.state)),t)}}},3566:function(e,t,r){"use strict";r.d(t,{$:function(){return n}});const n=(0,r(59999).V3)("webUserId")},43158:function(e,t,r){"use strict";r.d(t,{n:function(){return n}});const n=(0,r(44121).createContext)(null)},44488:function(e,t,r){"use strict";r.d(t,{x:function(){return u}});var n=r(44121),o=r(57801),s=r.n(o),i=r(43158);const a=()=>{const e=(0,n.useContext)(i.n);if(!e)throw new Error("DI container not found");return e},c=e=>"token"in e&&(1===Object.keys(e).length||"boolean"==typeof e.optional||"boolean"==typeof e.multi);function u(e){const t=a();return(0,n.useMemo)((()=>"[object Object]"!==e.toString()||c(e)?t.get(e):s()((e=>t.get(e)),e)),[e,t])}},13516:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(90130),o=r(44121);const s=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{textAlign:"center",marginBottom:11,paddingTop:26,fontSize:30,lineHeight:"36px",fontWeight:200},children:"An error occurred :("}),(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:17,color:"#9299a2",fontSize:20,lineHeight:"24px"},children:["Try"," ",(0,n.jsx)("a",{href:"",onClick:()=>window.location.reload(),children:"reloading the page"})]})]});s.displayName="FallbackError";class i extends o.Component{constructor(e){super(e),this.state={error:e.error||null,url:e.url}}static getDerivedStateFromProps(e,t){return void 0===e.url?{error:e.error||t.error}:e.url!==t.url?{error:e.error||null,url:e.url}:{error:e.error||t.error,url:t.url}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallback:t,fallbackFromDi:r}=this.props,{url:o,error:i}=this.state;return i?t?(0,n.jsx)(t,{url:o,error:i}):r||(0,n.jsx)(s,{}):e}}i.displayName="UniversalErrorBoundary"},7349:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});const n=(e,t,r)=>{try{return JSON.stringify(e,t,r)}catch(n){return((e,t,r)=>{const n=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?n.has(t)?"[~Circular~]":(n.add(t),o(t)):o(t)),r)})(e,t,r)}}},90794:function(e,t,r){"use strict";r.d(t,{N:function(){return s},h:function(){return o}});var n=r(44121);const o=(0,n.createContext)(null),s=(0,n.createContext)(null)},16615:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(44121),o=r(90794);const s=()=>{const e=(0,n.useContext)(o.h);if(!e)throw new Error('CONSUMER_CONTEXT not found, have you added "@tramvai/module-common"?\nAlso, you can check "@tramva/state" library duplicates in project lock file.');return e}},26294:function(e,t,r){"use strict";r.d(t,{v:function(){return y}});var n=r(5881),o=r.n(n),s=r(44121);const i=e=>{const t=(0,s.useRef)(e);return o()(t.current,e)||(t.current=e),t.current};var a=r(96980),c=r(25692),u=r.n(c),l=r(5103),d=r.n(l),p=r(66426),h=r(16615);class f{constructor(e){this.handleStateChange=()=>{this.onStateChange&&this.onStateChange()},this.stores=e,this.unsubscribe=void 0}isSubscribed(){return Boolean(this.unsubscribe)}setOnStateChange(e){this.onStateChange=e}trySubscribe(){this.unsubscribe||(this.unsubscribe=this.stores.filter(Boolean).map((e=>(e.on("change",this.handleStateChange),()=>{e.removeListener("change",this.handleStateChange)}))))}tryUnsubscribe(){this.unsubscribe&&(this.unsubscribe.forEach((e=>e())),this.unsubscribe=void 0),this.onStateChange=void 0}}var m=r(75633),v=r(90794);const g=(0,m.R)();function y(e,t,r=o()){u()(t,"You must pass a selector to useSelectors");const n=(0,h.x)(),c=(0,s.useContext)(v.N),l=(0,s.useRef)(!1),m=i(e),y=(0,s.useMemo)((()=>new f(d()(m).map(n.getStore))),[m,n]),b=(0,s.useRef)(),w=(0,s.useCallback)((e=>(y.setOnStateChange((()=>{l.current||(l.current=!0,g((()=>{e(),l.current=!1})))})),y.trySubscribe(),()=>y.tryUnsubscribe())),[y]);let E;try{E=(0,p.useSyncExternalStoreWithSelector)(w,n.getState,c?()=>c:n.getState,t,r)}catch(e){let t=`An error occurred while selecting the store state: ${e.message}.`;throw b.current&&(t+=`\nThe error may be correlated with this previous error:\n${b.current.stack}\n\nOriginal stack trace:`),new Error(t)}return(0,a.L)((()=>{b.current=void 0})),E}},36840:function(e,t,r){"use strict";r.d(t,{o:function(){return a}});var n=r(44121),o=r(86949),s=r(90794),i=r(16615);function a(e){const t=(0,i.x)(),r=(0,n.useContext)(s.N),a=(0,n.useRef)(e),c=(0,n.useRef)(null);t.hasStore(e)||(t.registerStore(e),c.current=e.storeName);const u=(0,n.useCallback)((r=>{const n=t.subscribe(e,r);return a.current=e,()=>{n(),c.current&&(t.unregisterStore(a.current),c.current=null)}}),[e,t]);return(0,o.useSyncExternalStore)(u,(()=>t.getState(e)),r?()=>r[e.storeName]:()=>t.getState(e))}},75633:function(e,t,r){"use strict";r.d(t,{R:function(){return o}});const n=window;function o(){return"requestAnimationFrame"in n?requestAnimationFrame:"setImmediate"in n?n.setImmediate:setTimeout}},42353:function(e,t,r){"use strict";r.d(t,{b:function(){return i},y:function(){return s}});var n=r(79436),o=r.n(n);function s(e,t=o()){const r=e,n=(...e)=>({type:r,payload:t(...e),store:n.store});return n.getType=()=>r,n.toString=()=>r,n}const i=e=>"function"==typeof e&&"getType"in e},58426:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var n=r(42353),o=r(24069);function s(e,t){const{name:r,initialState:s}="object"==typeof e?e:{name:e,initialState:t},i={};class a extends o.Z{constructor(){super(),this.state=s}static createEvents(e){const t=Object.keys(e),r={};return t.forEach((t=>{const o=e[t],s=(0,n.y)(`${this.storeName}_${t}`);r[t]=s,a.on(s,o)})),r}static on(e,t){if(Array.isArray(e))return e.forEach((e=>a.on(e,t))),a;(0,n.b)(e)&&!e.store&&(e.store=a);const r=e.toString();return a.handlers[r]="handle",i[r]=t,a}getState(){return this.state}setState(e){this.state=e,this.emit("change")}dehydrate(){return this.state}rehydrate(e){this.state=e}handle(e,t){const r=i[t];r&&(this.state=r(this.state,e),this.emit("change"))}}return a.storeName=r,a.events=void 0,a.handlers={},"object"==typeof e&&e.events&&(a.events=a.createEvents(e.events)),a}},24069:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});class n{constructor(){this.listeners=new Set}emit(e){this.listeners.forEach((e=>{e()}))}addListener(e,t){this.listeners.add(t)}on(e,t){this.addListener(e,t)}removeListener(e,t){this.listeners.delete(t)}off(e,t){this.removeListener(e,t)}}},82571:function(e,t,r){"use strict";r.d(t,{sQ:function(){return i},vC:function(){return s}});var n=r(59999),o=r(67584);const s=(0,n.V3)("environmentManager",{scope:o.s.SINGLETON}),i=(o.s.REQUEST,(0,n.V3)("envUsed",{multi:!0}));o.s.SINGLETON},82342:function(e,t,r){"use strict";r.d(t,{DV:function(){return i},Fp:function(){return o},J0:function(){return s},yV:function(){return a}});var n=r(59999);const o=(0,n.V3)("logger"),s=(0,n.V3)("loggerHook",{multi:!0}),i=(0,n.V3)("remoteReporter"),a=(0,n.V3)("tramvai logger shared context")},17173:function(e,t,r){"use strict";r.d(t,{Tm:function(){return i},eP:function(){return o},k3:function(){return s}});var n=r(59999);const o=(0,n.V3)("pubsubFactory"),s=(0,n.V3)("pubsub"),i=(0,n.V3)("rootPubsub")},82912:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});const n=(0,r(59999).V3)("requestManager")},37621:function(e,t,r){"use strict";r.d(t,{E6:function(){return l},PU:function(){return u},Ym:function(){return a},jm:function(){return i},kR:function(){return c},qb:function(){return s}});var n=r(59999),o=r(67584);const s=(0,n.V3)("dispatcher"),i=(0,n.V3)("dispatcherContext"),a=(0,n.V3)("combineReducers",{multi:!0,scope:o.s.SINGLETON}),c=(0,n.V3)("store"),u=(0,n.V3)("storeMiddleware",{multi:!0}),l=(0,n.V3)("initialAppState")},10776:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});const n=(0,r(59999).V3)("cookieManager")},29772:function(e,t,r){"use strict";r.d(t,{I7:function(){return s},Qo:function(){return a},mJ:function(){return i},om:function(){return o}});var n=r(59999);const o=(0,n.V3)("bundleList"),s=(0,n.V3)("actionsList"),i=(0,n.V3)("modulesList"),a=(0,n.V3)("appInfo")},9056:function(e,t,r){"use strict";r.d(t,{FB:function(){return o},FF:function(){return s},J2:function(){return l},Z0:function(){return i},bV:function(){return a},pW:function(){return d},s:function(){return u},zn:function(){return c}});var n=r(59999);const o=(0,n.V3)("HTTP_CLIENT_FACTORY"),s=(0,n.V3)("DEFAULT_HTTP_CLIENT_FACTORY_OPTIONS"),i=(0,n.V3)("DEFAULT_HTTP_CLIENT_INTERCEPTORS",{multi:!0}),a=(0,n.V3)("HTTP_CLIENT"),c=(0,n.V3)("HTTP_CLIENT_AGENT"),u=(0,n.V3)("apiClientPassHeaders",{multi:!0}),l=(0,n.V3)("papi service"),d=(0,n.V3)("disable circuit breaker")},8479:function(e,t,r){"use strict";r.d(t,{$j:function(){return u},Cj:function(){return b},IF:function(){return a},Ky:function(){return y},MV:function(){return h},OQ:function(){return g},QH:function(){return l},Qv:function(){return p},d6:function(){return d},fT:function(){return f},hM:function(){return w},mc:function(){return m},p6:function(){return c},uf:function(){return i},yX:function(){return v},zS:function(){return s}});var n=r(59999),o=r(67584);const s=(0,n.V3)("RENDER_SLOTS",{multi:!0}),i=(0,n.V3)("HTML_ATTRS",{multi:!0}),a=(0,n.V3)("RENDERER_CALLBACK",{multi:!0}),c=(0,n.V3)("CUSTOM_RENDER"),u=(0,n.V3)("resourcesRegistry"),l=(0,n.V3)("RENDER_MODE"),d=(0,n.V3)("useReactStrictMode"),p=(0,n.V3)("EXTEND_RENDER",{multi:!0}),h=(0,n.V3)("defaultLayoutComponent",{scope:o.s.SINGLETON}),f=(0,n.V3)("defaultHeaderComponent",{scope:o.s.SINGLETON}),m=(0,n.V3)("defaultFooterComponent",{scope:o.s.SINGLETON}),v=(0,n.V3)("defaultErrorBoundaryComponent"),g=(0,n.V3)("layoutOptions",{multi:!0,scope:o.s.SINGLETON}),y=(o.s.SINGLETON,(0,n.V3)("tramvaiRenderMode")),b=(0,n.V3)("modernSatisfies"),w=(0,n.V3)("reactServerRenderMode");o.s.SINGLETON,o.s.SINGLETON,o.s.SINGLETON},23436:function(e,t,r){"use strict";r.d(t,{TF:function(){return n},X9:function(){return s},fu:function(){return o}});const n="head:meta",o="head:core-styles",s="body:start"},56873:function(e,t,r){"use strict";r.d(t,{$d:function(){return d},Dk:function(){return s},Dv:function(){return h},S3:function(){return l},TL:function(){return u},Y9:function(){return a},_Q:function(){return c},aP:function(){return f},fw:function(){return p},l1:function(){return o},sU:function(){return i}});var n=r(59999);const o=(0,n.V3)("router router"),s=(0,n.V3)("router routes",{multi:!0}),i=(0,n.V3)("router guard",{multi:!0}),a=(0,n.V3)("router pageService"),c=(0,n.V3)("router pageRegistry"),u=(0,n.V3)("router routeResolve"),l=(0,n.V3)("router routeTransform",{multi:!0}),d=(0,n.V3)("router spaRunMode"),p=(0,n.V3)("link prefetch manager"),h=(0,n.V3)("link prefetch handler",{multi:!0}),f=(0,n.V3)("router mode")},8729:function(e){"use strict";const{AbortController:t,AbortSignal}="undefined"!=typeof self?self:window;e.exports=t,e.exports.AbortSignal=AbortSignal,e.exports.default=t},40021:function(e,t,r){"use strict";r.r(t),r.d(t,{camelCase:function(){return d},camelCaseTransform:function(){return u},camelCaseTransformMerge:function(){return l}});var n=r(80476);function o(e){return e.toLowerCase()}var s=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function a(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function c(e,t){var r=e.charAt(0),n=e.substr(1).toLowerCase();return t>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function u(e,t){return 0===t?e.toLowerCase():c(e,t)}function l(e,t){return 0===t?e.toLowerCase():function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}(e)}function d(e,t){return void 0===t&&(t={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?s:r,c=t.stripRegexp,u=void 0===c?i:c,l=t.transform,d=void 0===l?o:l,p=t.delimiter,h=void 0===p?" ":p,f=a(a(e,n,"$1\0$2"),u,"\0"),m=0,v=f.length;"\0"===f.charAt(m);)m++;for(;"\0"===f.charAt(v-1);)v--;return f.slice(m,v).split("\0").map(d).join(h)}(e,(0,n.__assign)({delimiter:"",transform:c},t))}(e,(0,n.__assign)({transform:u},t))}},48385:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},49593:function(e,t,r){"use strict";r.r(t),r.d(t,{assoc:function(){return d},deepMerge:function(){return E},dissoc:function(){return m},get:function(){return c},merge:function(){return b},update:function(){return y}});var n=Array.prototype.slice;function o(e){return"object"==typeof e}function s(e){if(Array.isArray(e))return e.slice();var t={};for(var r in e)t[r]=e[r];return t}function i(e,t,r){return o(e)&&null!==e&&t in e?e[t]:r}function a(e,t,r){var n=t[0],o=t.slice(1);return i(e,n)&&o.length?a(e[n],o,r):i(e,n,r)}function c(e,t,r){return Array.isArray(t)?a(e,t,r):i(e,t,r)}function u(e,t,r){if(e[t]===r)return e;var n=s(e);return n[t]=r,n}function l(e,t,r){if(a(e,t)===r)return e;var n=t[0],o=t.slice(1),i=s(e);return o.length?i[n]=l(n in i?i[n]:{},o,r):i[n]=r,i}function d(e){for(var t,r,n=arguments,o=arguments.length,s=e,i=1;i<o;i+=2)t=n[i],r=n[i+1],s=Array.isArray(t)?l(s,t,r):u(s,t,r);return s}function p(e,t){if(!(t in e))return e;var r=s(e);return delete r[t],r}function h(e,t){var r=t[0],n=t.slice(1);return n.length?r in e&&h(e[r],n):r in e}function f(e,t){if(!h(e,t))return e;var r=t[0],n=t.slice(1),o=s(e);return 0!==n.length?(o[r]=f(e[r],n),0===Object.keys(o[r]).length&&delete o[r]):delete o[r],o}function m(e){for(var t,r=arguments,n=arguments.length,o=0,s=e;++o<n;)t=r[o],s=Array.isArray(t)?f(s,t):p(s,t);return s}function v(e,t,r){var o=i(e,t);return u(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function g(e,t,r){var o=a(e,t);return l(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function y(e,t){return Array.isArray(t)?g.apply(this,arguments):v.apply(this,arguments)}function b(){for(var e,t=arguments,r=arguments.length,n=0,o=arguments[0];++n<r;)for(var s in e=t[n])o=u(o,s,e[s]);return o}function w(e,t){for(var r,n,i=Object.keys(t),a=i.length,c=-1,l=e;++c<a;)l=o(r=t[n=i[c]])&&null!==r?u(l,n,n in l?w(l[n],r):s(r)):u(l,n,r);return l}function E(){for(var e=arguments,t=arguments.length,r=0,n=arguments[0];++r<t;)n=w(n,e[r]);return n}},87346:function(e,t,r){"use strict";var n=r(7047),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return n.isMemo(e)?i:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var o=h(r);o&&o!==f&&e(t,o,n)}var i=l(r);d&&(i=i.concat(d(r)));for(var a=c(t),m=c(r),v=0;v<i.length;++v){var g=i[v];if(!(s[g]||n&&n[g]||m&&m[g]||a&&a[g])){var y=p(r,g);try{u(t,g,y)}catch(e){}}}}return t}},25692:function(e){"use strict";e.exports=function(e,t,r,n,o,s,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,s,i,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},53188:function(e){var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||u||i(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},58483:function(e,t){"use strict";var r,n=Symbol.for("react.element"),o=(Symbol.for("react.portal"),Symbol.for("react.fragment")),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=(Symbol.for("react.server_context"),Symbol.for("react.forward_ref")),l=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen");r=Symbol.for("react.module.reference"),t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===i||e===s||e===l||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===p||e.$$typeof===a||e.$$typeof===c||e.$$typeof===u||e.$$typeof===r||void 0!==e.getModuleId)}},36899:function(e,t,r){"use strict";e.exports=r(58483)},48161:function(e){"use strict";var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"==typeof e&&!!e.trim()}function n(e,n){var o=e.split(";").filter(r),s=function(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}(o.shift()),i=s.name,a=s.value;n=n?Object.assign({},t,n):t;try{a=n.decodeValues?decodeURIComponent(a):a}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+a+"'. Set options.decodeValues to false to disable this feature.",e)}var c={name:i,value:a};return o.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?c.expires=new Date(n):"max-age"===r?c.maxAge=parseInt(n,10):"secure"===r?c.secure=!0:"httponly"===r?c.httpOnly=!0:"samesite"===r?c.sameSite=n:"partitioned"===r?c.partitioned=!0:c[r]=n})),c}function o(e,o){if(o=o?Object.assign({},t,o):t,!e)return o.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var s=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];s||!e.headers.cookie||o.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=s}return Array.isArray(e)||(e=[e]),o.map?e.filter(r).reduce((function(e,t){var r=n(t,o);return e[r.name]=r,e}),{}):e.filter(r).map((function(e){return n(e,o)}))}e.exports=o,e.exports.parse=o,e.exports.parseString=n,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,n,o,s,i=[],a=0;function c(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,s=!1;c();)if(","===(r=e.charAt(a))){for(n=a,a+=1,c(),o=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(s=!0,a=o,i.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!s||a>=e.length)&&i.push(e.substring(t,e.length))}return i}},9773:function(e,t,r){"use strict";var n=r(44121),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),o=n[0].inst,l=n[1];return a((function(){o.value=r,o.getSnapshot=t,u(o)&&l({inst:o})}),[e,r,t]),i((function(){return u(o)&&l({inst:o}),e((function(){u(o)&&l({inst:o})}))}),[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},21579:function(e,t,r){"use strict";var n=r(44121),o=r(86949),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,a=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=u((function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==o&&p.hasValue){var t=p.value;if(o(t,e))return a=t}return a=e}if(t=a,s(i,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(i=e,a=r)}var i,a,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,o]);var h=i(e,d[0],d[1]);return c((function(){p.hasValue=!0,p.value=h}),[h]),l(h),h}},86949:function(e,t,r){"use strict";e.exports=r(9773)},66426:function(e,t,r){"use strict";e.exports=r(21579)},18010:function(e,t,r){"use strict";r.d(t,{B:function(){return c}}),r(44121);var n=r(10521),o=r.n(n),s=r(15320),i=r.n(s),a=r(90130);const c=({caption:e,children:t,preset:r,className:n})=>(0,a.jsxs)("figure",{"data-preset":r,className:o()(i().figure,n),"data-testid":"figure",children:[t,!!e&&(0,a.jsx)("figcaption",{className:i().caption,children:e})]})},84768:function(e,t,r){"use strict";r.d(t,{JS:function(){return i},RQ:function(){return o},zY:function(){return s}});var n=r(77164);const o=n.Sk.Col9,s=n.Aq.main,i=n.cM.small},77164:function(e,t,r){"use strict";r.d(t,{Aq:function(){return n},Sk:function(){return s},cM:function(){return o}});let n=function(e){return e.main="main",e.additional="additional",e.none="none",e}({}),o=function(e){return e.small="small",e.large="large",e.none="none",e}({}),s=function(e){return e.Mobile="mobile",e.Col9="col-9",e.Col12="col-12",e}({})},9891:function(e,t,r){"use strict";r.d(t,{L:function(){return p},Z:function(){return c}});var n=r(44121),o=r(18010),s=r(15320),i=r.n(s),a=r(90130);let c=function(e){return e.Cycled="cycled",e.Youtube="youtube",e}({});function u(e){if(void 0===e)return 1;const t=Number(e);return Number.isNaN(t)?1:Math.max(1,t)}const l=({videoId:e,ratio:t=1.77777})=>{const r=(0,n.useMemo)((()=>({paddingTop:100/u(t)+"%"})),[t]);return(0,a.jsx)("div",{className:i().youtubeContainer,style:r,children:(0,a.jsx)("iframe",{allowFullScreen:!0,className:i().youtube,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0"})})},d=({videoId:e,height:t})=>(0,a.jsx)("video",{src:e,height:t,className:i().cycled,autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),p=({type:e,ratio:t,caption:r,videoId:n,height:s})=>(0,a.jsx)(o.B,{caption:r,children:e===c.Cycled?(0,a.jsx)(d,{videoId:n,height:s}):(0,a.jsx)(l,{videoId:n,ratio:t})})},89025:function(e,t,r){"use strict";r.d(t,{Z:function(){return l},h:function(){return d}});var n=r(44121),o=r(44488),s=r(82571),i=r(50153),a=r(29198),c=r(9019),u=r(90130);let l=function(e){return e.SurveyHeight="survey_iframe_height",e.AppFramePageRedirect="appFramePageRedirect",e}({});const d=({url:e,height:t,width:r})=>{const{env:d}=(0,o.x)({env:s.vC}),p=d.get(c.y9),{device:h}=(0,i.F)(),[f,m]=(0,n.useState)(Number(t)||200),v=(0,n.useMemo)((()=>"/"===e[0]?`${p}${e}`:e),[p,e]);return(0,n.useEffect)((()=>{const e=async e=>{const t=(e=>{var t;if("undefined"!=typeof document)return null==(t=Array.from(document.getElementsByTagName("iframe")).filter((t=>t.contentWindow===e.source)))||null==(t=t[0])?void 0:t.id})(e);if(!e.data||!t||t!==v)return;const r=await JSON.parse(e.data);if(r.type===l.SurveyHeight&&r.height){const e=h!==a.Yi.Mobile?0:56;m(r.height+e)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[h,v]),(0,u.jsx)("iframe",{title:"wrapper",src:v,height:`${f}px`,width:r?`${r}px`:"100%",id:v})}},50153:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});var n=r(13873),o=r(52675),s=r(29198);function i(){return{device:(0,n.GS)().width<o.media.TABLET_S?s.Yi.Mobile:s.Yi.Desktop}}},9019:function(e,t,r){"use strict";r.d(t,{BC:function(){return p},Ks:function(){return c},Ot:function(){return o},RZ:function(){return l},f7:function(){return n},gz:function(){return u},iC:function(){return h},kr:function(){return a},lZ:function(){return d},oc:function(){return m},qk:function(){return s},uA:function(){return f},y9:function(){return i}});const n="PLUTO_PUBLIC_API_BASE_URL",o="PLUTO_PUBLIC_API_CLIENT_BASE_URL",s="PROCESS_FEEDBACK_DELAY",i="IFRAME_DOMAIN",a="STATIST_CLIENT_URL",c="#0000008A",u=64,l=360,d=312,p={desktop:{"12col":768},phone:{"12col":d,details:296,list:288,listInDetails:272}},h="pwahelp",f="fragment",m={customNavigation:"pwahelpp-custom-navigation-0ry1-6b877c781717",breadcrumbs:"pwahelpp-ageq-uest-1on2-6b877c78170",question:"pwahelpp-ageq-uest-1on1-6b877c781701",title:"pwahelpp-age--t1tle-sadf11wda-ad",popularThemes:"pwahelpp-agee-xter-nalp--r0ductp0pula",product:"pwahelpp-ageq-uest-1on1-6b877c781720",productGroup:"pwahelpp-ageq-uest-1on1-6b877c781721",category:"pwahelpp-agec-ateg-0ry1-6b877c781701",article:"pwahelpp-agec-ateg-0ry1-6b877c781717",fallbackHeader:"pwahelpp-f@llb@ck-header-424random-id112",fallbackFooter:"pwahelp-f@llb@ck-header-424random-id112",container:"pwahelpp-age--c0nr@1ner-fadgf11wda-a12d"}},78658:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});const n={article:"pluto-front-page-article",question:"pluto-front-page-question",category:"pluto-front-page-category",product:"pluto-front-page-product",container:"pluto-front-page-container",externalProductPopularThemes:"pluto-front-page-external-product-popular-themes",productGroup:"pluto-front-page-product-group",title:"pluto-front-page-title",fallbackHeader:"pluto-front-fallback-header",fallbackFooter:"pluto-front-fallback-footer",customNavigation:"pluto-front-custom-navigation",breadcrumbs:"pluto-front-breadcrumbs"};Object.values(n)},25496:function(e,t,r){"use strict";var n=r(80283);function o({name:e,providers:t=[],imports:r=[],extend:n={}}){class o{}const s={};for(const e in n){const t=n[e];s[e]=(...e)=>({mainModule:o,providers:t(...e)})}return Object.assign(o,{_module_parameters_:{name:e,id:`${e}-${Math.random()}`,providers:t,imports:r}},s),o}const s=o({name:"PreconnectResourcesModule",providers:[],extend:{forRoot:()=>[]}});var i=r(97570),a=r(59999);const c=(0,a.V3)("_tramvai_error_interceptor_filter"),u=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:c,useValue:e=>"Uncaught ReferenceError: processRandomSelector is not defined"===e.message||"ResizeObserver loop limit exceeded"===e.message||"ResizeObserver loop completed with undelivered notifications."===e.message})]})(class{});var l=r(29772),d=r(67584),p=r(48945),h=r(4216),f=r.n(h);const m=e=>{if(!e)return"value should not be empty";let t;try{t=e.startsWith("/")?new URL(e,"http://localhost:3000"):new URL(e)}catch(e){return"URL is not valid"}return"http:"!==t.protocol&&"https:"!==t.protocol&&`Invalid protocol ${t.protocol}`},v=e=>t=>t?!!t.endsWith(e)||`value should ends with ${e}`:"value should not be empty",g=e=>t=>e.reduce(((e,r)=>{const n=r(t);return f()(n)?f()(e)?`${e}; ${n}`:n:f()(e)?e:e&&n}),!0);var y=r(7349);const b=window.fetch.bind(window),w=(e,t)=>t instanceof Error?{message:t.message,stack:t.stack,...t}:t;var E=r(82342),S=r(82571),_=r(3566);const k={filter(e){const{remote:t,error:r}=e;return null==t||!r||"ERR_HTTP_ERROR"!==r.code||!/NetworkError when attempting to fetch resource/.test(r.message)}},T=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:E.J0,multi:!0,useFactory:e=>{const t=(({appInfo:e,envManager:t,wuid:r})=>{const{appName:n}=e,o=t.get("APP_VERSION"),s=t.get("APP_RELEASE"),i=t.get("FRONT_LOG_SYSTEM");return{extend:e=>({...e,component:`tramvai-${n}-${e.name||"unknown"}`,wuid:r,release:s,system:i,appVersion:o,appName:n,appType:"tramvai",from:"browser",userAgent:window.navigator.userAgent,href:window.location.href})}})(e);return e=>{e.addFilter(k),e.addExtension(t)}},deps:{appInfo:l.Qo,envManager:S.vC,wuid:{token:_.$,optional:!0}}}),(0,i.J)({provide:E.DV,useFactory:({envManager:e})=>{const t=e.get("FRONT_LOG_API");return new p.RemoteReporter({requestCount:1/0,emitLevels:{error:!0,fatal:!0},makeRequest:e=>(({logApi:e,payload:t})=>b(`${e}collect`,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:(0,y.K)(t,w)}).catch((e=>e)))({logApi:t,payload:e})})},scope:d.s.SINGLETON,deps:{envManager:S.vC}}),(0,i.J)({provide:S.sQ,useValue:[{key:"FRONT_LOG_API",dehydrate:!0,validator:m},{key:"FRONT_LOG_SYSTEM",dehydrate:!0,value:"client_logs"}],multi:!0})]})(class{}),C=(0,n.Y)({imports:[],providers:[]})(class{}),R={multi:!0},x=(0,a.V3)("commandLineRunner"),M=(0,a.V3)("commandLines"),P={init:(0,a.V3)("init",{multi:!0,scope:d.s.SINGLETON}),listen:(0,a.V3)("listen",{multi:!0,scope:d.s.SINGLETON}),customerStart:(0,a.V3)("customer_start",R),resolveUserDeps:(0,a.V3)("resolve_user_deps",R),resolvePageDeps:(0,a.V3)("resolve_page_deps",R),generatePage:(0,a.V3)("generate_page",R),clear:(0,a.V3)("clear",R),spaTransition:(0,a.V3)("spa_transition",R),afterSpaTransition:(0,a.V3)("after_spa_transition",R),close:(0,a.V3)("close",{multi:!0,scope:d.s.SINGLETON})};var O=r(37621);let A;const N=new Uint8Array(16);function I(){if(!A){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");A=crypto.getRandomValues.bind(crypto)}return A(N)}const L=[];for(let e=0;e<256;++e)L.push((e+256).toString(16).slice(1));function D(e,t=0){return(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase()}const j={};function F(e,t,r,n,o=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(o<0||o+16>n.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`)}else n=new Uint8Array(16),o=0;return null!=t||(t=Date.now()),null!=r||(r=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9]),n[o++]=t/1099511627776&255,n[o++]=t/4294967296&255,n[o++]=t/16777216&255,n[o++]=t/65536&255,n[o++]=t/256&255,n[o++]=255&t,n[o++]=112|r>>>28&15,n[o++]=r>>>20&255,n[o++]=128|r>>>14&63,n[o++]=r>>>6&255,n[o++]=r<<2&255|3&e[10],n[o++]=e[11],n[o++]=e[12],n[o++]=e[13],n[o++]=e[14],n[o++]=e[15],n}const V={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},B=function(e,t,r){var n,o;if(V.randomUUID&&!t&&!e)return V.randomUUID();const s=null!=(n=null!=(o=(e=e||{}).random)?o:null==e.rng?void 0:e.rng())?n:I();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=s[e];return t}return D(s)};var U,q,$=function(){return $=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$.apply(this,arguments)},H=function(e){return null!==e&&"object"==typeof e},J=function(e){switch(!0){case function(e){return null==e}(e):return!0;case function(e){return"string"==typeof e||e instanceof String}(e):return""===e;case function(e){return!!e&&Array.isArray(e)}(e):return 0===e.length;case H(e):return 0===Object.keys(e).length}return!1};!function(e){e[e.Essential=1]="Essential",e[e.Functionality=2]="Functionality",e[e.Statistics=4]="Statistics",e[e.Marketing=8]="Marketing"}(U||(U={})),function(e){e[e.PersonalDataProcessing=16]="PersonalDataProcessing"}(q||(q={}));var z=/^\d+(0|s|t)\d+$/,G=["internal_source"],Y=0xfffffffffffff,K={Essential:U.Essential,Functionality:U.Functionality,Statistics:U.Statistics,Marketing:U.Marketing,PersonalDataProcessing:q.PersonalDataProcessing};function W(e,t){for(var r={},n=0,o=e;n<o.length;n++){var s=o[n];s in t&&(r[s]=t[s])}return r}var Q=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var r=this;return function(){for(var n,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{return(n=r.storage)[e].apply(n,o)}catch(e){}return t}},e}();new Q("local");var Z,X=new Q("session"),ee=5184e3,te=U.Marketing|U.Statistics,re={utmSource:{name:"utm_source",category:te,expires:ee,subdomains:!0},utmContent:{name:"utm_content",category:te,expires:ee,subdomains:!0},utmCampaign:{name:"utm_campaign",category:te,expires:ee,subdomains:!0},utmMedium:{name:"utm_medium",category:te,expires:ee,subdomains:!0},utmTerm:{name:"utm_term",category:te,expires:ee,subdomains:!0},utmDateSet:{name:"utm_date_set",category:te,expires:ee,subdomains:!0},sid:{name:"sid",category:te,expires:ee,subdomains:!0},wm:{name:"wm",category:te,expires:ee,subdomains:!0},visitorNewOrReturn:{name:"s_nr",category:te,expires:31536e3,subdomains:!0}},ne={ctxSource:{name:"ctx_source",category:te,expires:ee,subdomains:!0},ctxPosition:{name:"ctx_position",category:te,expires:ee,subdomains:!0},ctxBlock:{name:"ctx_block",category:te,expires:ee,subdomains:!0}},oe=function(e){void 0===e&&(e={});for(var t=function(e){return H(e)?Object.keys(e):[]}(e),r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n},se=function(e){void 0===e&&(e=[]);for(var t={},r=0;r<e.length;r++)t[e[r][0]]=e[r][1];return t};function ie(e,t){var r=oe(t).map((function(t){var r=t[0],n=t[1];return"string"!=typeof n?[r,n]:[r,ae(n,r in e?e[r]:e.default)]}));return se(r)}function ae(e,t){var r=e;return r.length>255&&(r=function(e,t){return e.slice(0,251)}(r)),encodeURIComponent(r).length>t&&(r=function(e,t){for(var r=0,n=e.length+1;r+1<n;){var o=Math.floor((r+n)/2);encodeURIComponent(e.slice(0,o)).length>t?n=o:r=o}return e.slice(0,r)}(r,t-4)),r===e?e:"".concat(r).concat(".cut")}var ce,ue=((Z={})[re.utmSource.name]=255,Z.session_utm_source=255,Z[re.utmTerm.name]=600,Z[re.utmContent.name]=600,Z[re.utmCampaign.name]=255,Z[re.utmMedium.name]=255,Z[re.sid.name]=140,Z[re.wm.name]=100,Z),le=$($({},ue),{default:72});!function(e){e.source="source",e.position="position",e.block="block"}(ce||(ce={}));var de="session_utm_source",pe=[re.utmSource,re.utmContent,re.utmCampaign,re.utmMedium,re.utmTerm,re.sid,re.wm],he=[ne.ctxPosition,ne.ctxBlock,ne.ctxSource];var fe="undefined"!=typeof globalThis?globalThis:window,me=fe.document,ve=fe.window,ge=fe.navigator,ye=fe.XMLHttpRequest;function be(e,t){var r={},n=function(t,r){e.set(t.name,r,t.expires,t.subdomains)};return t.on("update",(function(){for(var e=0,o=Object.keys(r);e<o.length;e++){var s=o[e],i=r[s],a=i.cookie,c=i.value;t.isAllowed(a.category)&&(n(a,c),delete r[s])}})),{get:function(t){return e.get(t)},getAll:function(){return e.getAll()},set:function(e,o){var s=t.isAllowed(e.category);return s?n(e,o):r[e.name]={cookie:e,value:o},s},remove:function(t,n){delete r[t],e.remove(t,n)}}}function we(e){void 0===e&&(e={});var t,r=e.defaults,n=void 0===r?Y:r,o=e.alwaysEnabled,s=void 0===o?U.Essential:o,i=n,a=(t=t||Object.create(null),{on:function(e,r){(t[e]||(t[e]=[])).push(r)},off:function(e,r){t[e]&&t[e].splice(t[e].indexOf(r)>>>0,1)},emit:function(e){var r=[].slice.call(arguments,1);(t[e]||[]).map((function(e){e.apply(void 0,r)})),(t["*"]||[]).map((function(t){t.apply(void 0,[e].concat(r))}))}});return Object.assign(a,{once:function(e,t){var r=function(){a.off(e,r),t()};a.on(e,r)},isAllowed:function(e){return(this.getAllowedMask()&e)===e},resetAllTo:function(e){i=e,a.emit("update")},update:function(e,t){void 0===t&&(t="keep"),"enable"===t?i|=Y:"disable"===t&&(i=0);for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],s=Number(o);e[s]?i|=s:i&=~s}a.emit("update")},getAllowedMask:function(){return(null!=i?i:n)|s},categories:K})}var Ee,Se=(Ee=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;n<e.length;n++){if(null==r)return;r=r[e[n]]}return r},function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.length>=2?Ee.apply(this,r):function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(this,r.concat(n))}}),_e="undefined"!=typeof globalThis?globalThis:window,ke=_e.document,Te=_e.window;_e.navigator,_e.XMLHttpRequest;var Ce,Re,xe,Me=function(e,t){return Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Me(e,t)},Pe=function(){return Pe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pe.apply(this,arguments)};(xe=Ce||(Ce={}))[xe.Essential=1]="Essential",xe[xe.Functionality=2]="Functionality",xe[xe.Statistics=4]="Statistics",xe[xe.Marketing=8]="Marketing",function(e){e[e.PersonalDataProcessing=16]="PersonalDataProcessing"}(Re||(Re={})),Ce.Essential,Ce.Functionality,Ce.Statistics,Ce.Marketing,Re.PersonalDataProcessing,Ce.Marketing,Ce.Statistics;var Oe,Ae=((Oe={}).utm_source=255,Oe.session_utm_source=255,Oe.utm_term=600,Oe.utm_content=600,Oe.utm_campaign=255,Oe.utm_medium=255,Oe.sid=140,Oe.wm=100,Oe),Ne=Pe(Pe({},Ae),{default:72}),Ie=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,Le=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,De=function(){function e(e,t){this.limits=e,this.logger=t,this.isCookieAvailable=null,this.hasSamesiteNoneSupport=null,this.localState=Object.create(null)}return e.prototype.get=function(e){return this.checkCookieAvailability()?this.getCookie(e):this.getLocalState(e)},e.prototype.getAll=function(){return this.checkCookieAvailability()?this.getAllCookies():this.getAllLocalState()},e.prototype.set=function(e,t,r,n){this.checkCookieAvailability()&&this.setCookie(e,t,r,n),this.setLocalState(e,t)},e.prototype.remove=function(e,t){this.checkCookieAvailability()?this.removeCookie(e,t):this.removeLocalState(e)},e.prototype.checkCookieAvailability=function(){if(null!=this.isCookieAvailable)return this.isCookieAvailable;if(null==ke.cookie)return this.isCookieAvailable=!1,this.isCookieAvailable;var e="test_cookie_sqJPwCiceI";ke.cookie="".concat(e,"=true");var t=this.getCookie(e);return this.isCookieAvailable="true"===t,ke.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.isCookieAvailable},e.prototype.checkSamesiteNoneSupport=function(){if(null!=this.hasSamesiteNoneSupport)return this.hasSamesiteNoneSupport;if(!this.checkCookieAvailability())return this.hasSamesiteNoneSupport=!1,this.hasSamesiteNoneSupport;var e="test_cookie_yIKsyPp4Fh";ke.cookie="".concat(e,"=true; samesite=none; secure");var t=this.getCookie(e);return this.hasSamesiteNoneSupport="true"===t,ke.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.hasSamesiteNoneSupport},e.prototype.getCookie=function(e){var t=this.getRawCookie(e);return t?decodeURIComponent(t):null},e.prototype.getAllCookies=function(){return function(e){void 0===e&&(e={});for(var t=function(e){return null!==(t=e)&&"object"==typeof t?Object.keys(e):[];var t}(e),r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n}(this.getAllRawCookies()).reduce((function(e,t){var r=t[0],n=t[1];return e[r]=decodeURIComponent(n),e}),{})},e.prototype.setCookie=function(e,t,r,n){var o;void 0===r&&(r="session"),void 0===n&&(n=!1);try{!function(e,t,r){var n=encodeURIComponent(r),o=e[t]||e.default;if(n.length>o)throw new Error("ECookieTooLarge: cookie ".concat(t," exceeds maximum length of ").concat(o," bytes"))}(this.limits,e,String(t))}catch(e){return void(null===(o=this.logger)||void 0===o||o.error(e))}var s=[];if(s.push("".concat(e,"=").concat(encodeURIComponent(t)),"path=/","domain=".concat(n?function(e){return t=e,Ie.test(t)||Le.test(t)?e:e.indexOf("localhost")>=0?"localhost":".".concat(e.split(".").slice(-2).join("."));var t}(Te.location.hostname):Te.location.hostname)),"session"!==r){var i=0===r?new Date(0):new Date(Date.now()+1e3*r);s.push("expires=".concat(i.toUTCString()))}this.checkSamesiteNoneSupport()&&s.push("samesite=none","secure"),ke.cookie=s.join("; ")},e.prototype.removeCookie=function(e,t){null!==this.getCookie(e)&&this.setCookie(e,"",0,t)},e.prototype.getLocalState=function(e){return this.localState[e]||null},e.prototype.getAllLocalState=function(){return this.localState},e.prototype.setLocalState=function(e,t){return this.localState[e]=t.toString(),t},e.prototype.removeLocalState=function(e){e in this.localState&&delete this.localState[e]},e.prototype.getRawCookie=function(e){return ke.cookie.split("; ").reduce((function(t,r){var n=r.split("="),o=n[0],s=n[1];return o===e?s:t}),"")||null},e.prototype.getAllRawCookies=function(){return ke.cookie.split("; ").reduce((function(e,t){var r=t.split("="),n=r[0],o=r[1];return n?(e[n]=o,e):e}),{})},e}(),je=(new De(Ne),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Me(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.get=function(t){try{return e.prototype.get.call(this,t)}catch(r){return e.prototype.getRawCookie.call(this,t)}},t.prototype.getAll=function(){try{return e.prototype.getAll.call(this)}catch(t){return e.prototype.getAllRawCookies.call(this)}},t}(De));function Fe(e){var t=ke.createElement("a");return t.href=e,function(e){void 0===e&&(e=ke.location);var t={get query(){return function(e,t,r){void 0===t&&(t="&"),void 0===r&&(r="=");for(var n={},o=0,s=e.split(t);o<s.length;o++){var i=s[o],a=String(i).split(r),c=a[0],u=a.slice(1);if(c){var l=u.join(r);try{l=decodeURIComponent(l)}catch(e){}n[decodeURIComponent(c)]=l}}return n}(e.search.slice(1))},get pathname(){return"/"!==e.pathname.charAt(0)?"/".concat(e.pathname):e.pathname}};return["hash","host","hostname","href","port","protocol","search","origin"].forEach((function(r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){"origin"!==r&&(e[r]=t)},enumerable:!0})})),t}(t)}function Ve(){return ke.referrer?Fe(ke.referrer):void 0}new je(Ne);var Be=["tinkoff.ru","tinkoffinsurance.ru","dolyame.ru","tbank.ru"],Ue=r(11712),qe=r.n(Ue),$e=r(28288),He=r.n($e),Je=function(e,t){return Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Je(e,t)};function ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Ge=function(){return Ge=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ge.apply(this,arguments)};function Ye(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function Ke(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function We(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||t)}var Qe=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:B()}}},Ze=15768e4,Xe={sessionId:{name:"vIdUid",category:U.Essential,expires:Ze,subdomains:!0},wuid:{name:"__P__wuid",category:U.Essential,expires:Ze,subdomains:!0},webviewWuid:{name:"deviceId",category:U.Essential,expires:Ze,subdomains:!0},deviceId:{name:"stDeIdU",category:U.Essential,expires:Ze,subdomains:!0},lastEventTime:{name:"stLaEvTi",category:U.Essential,expires:Ze,subdomains:!0},sessionStartTime:{name:"stSeStTi",category:U.Essential,expires:Ze,subdomains:!0}},et=function(){function e(){}return e.prototype.isConnected=function(){if(void 0!==this.nativeSDK)return!0;var e=ve.statistNativeSdk;if("object"!=typeof e)return!1;var t=e.version;return"string"==typeof t&&"1"===t.split(".")[0]&&(this.nativeSDK=e,!0)},e.prototype.getSessionId=function(){return this.isConnected()?this.nativeSDK.getSessionId():null},e.prototype.notifyEventHappened=function(){if(this.isConnected())return this.nativeSDK.notifyEventHappened()},e}(),tt=function(){return ve.statistQueue=ve.statistQueue||[],ve.statistQueue};function rt(){var e,t;if(function(){try{return window.self!==window.top}catch(e){return!0}}()){var r=ve.location.href;t=null!==(e=Fe(r).query.parent_url)&&void 0!==e?e:r}else t=ve.location.href;return function(e){return e.hostname+e.pathname}(Fe(t))}var nt=function(){function e(){this.listeners=Object.create(null)}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.listeners[e];if(n)for(var o=0,s=n;o<s.length;o++)s[o].apply(void 0,t)},e}(),ot=be(new De(le),we()),st=/^[0-9a-f]{16}$/,it=/^[0-9a-f]{32}$/,at=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,ct=function(e){var t,r,n;if((n="cookies"===e.from?e.isWebview?null!==(r=null===(t=ot.get(Xe.webviewWuid.name))||void 0===t?void 0:t.toLowerCase())&&void 0!==r?r:null:ot.get(Xe.wuid.name):new URLSearchParams(ve.location.search).get("wuid"))&&function(e){return st.test(e)||it.test(e)||at.test(e)}(n))return n},ut=function(e){return"function"==typeof e?e():e},lt={test:atob("aHR0cHM6Ly9hcGktc3RhdGlzdC5kZXYtdGNzZ3JvdXAuaW8="),prod:"https://api-statist.tinkoff.ru"},dt="0.4.141",pt="__statist_saved_messages",ht=function(e){try{return ve.localStorage.getItem(e)}catch(e){return null}},ft=function(){var e=ht(pt);if(null===e)return[];try{return JSON.parse(e)}catch(e){return[]}},mt=function(){return function(e){try{return ve.localStorage.removeItem(e),!0}catch(e){return!1}}(pt)},vt=function(){function e(e,t){var r,n,o=this;this.timer=null,this.eventEmitter=new nt,this.destroy=function(){me.removeEventListener("visibilitychange",o.handleVisibilityChange),ve.removeEventListener("pagehide",o.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===me.visibilityState?o.sendByBeacon():o.processSavedMessages()},this.handlePageHide=function(){o.sendByBeacon()},this.pushEventsUrl="".concat(e,"/gateway/v1/events"),this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=null!==(r=t.pushTimeout)&&void 0!==r?r:t.pushInterval,this.savedMessagesSize=t.savedMessagesSize,this.eventsJsonSizeLimit=t.eventsJsonSizeLimit,this.gzipDisabled=!("true"===ht("_statist_enable_gzip")),this.apiKey=null!==(n=t.apiKey)&&void 0!==n?n:"","visibilityState"in me&&me.addEventListener("visibilitychange",this.handleVisibilityChange,!1),ve.addEventListener("pagehide",this.handlePageHide,!1),this.events=this.excludeOutdatedMessages(ft()),this.sequence=this.getMaxSequence(this.events),this.events.length>0&&(mt(),this.startPush())}return e.prototype.handleApiError=function(e){var t,r,n=this;if(e.status<200||e.status>=500)return this.saveMessages(e.events),void this.startPush();if(e.response)try{var o=JSON.parse(e.response);if(o.message&&(null===(t=o.details)||void 0===t?void 0:t.errors))return void o.details.errors.forEach((function(t){t&&n.eventEmitter.emit("error",Object.assign(new Error(o.message),{status:e.status,response:t}))}))}catch(e){}this.eventEmitter.emit("error",Object.assign(new Error(null!==(r=e.response)&&void 0!==r?r:e.message),{status:e.status}))},e.prototype.saveMessages=function(e){if(0===e.length)return!0;var t=We(We([],ft(),!0),e,!0);if(t.length>this.savedMessagesSize){var r=t.length-this.savedMessagesSize;t.splice(0,r)}return function(e){try{return function(e,t){try{return ve.localStorage.setItem(e,t),!0}catch(e){return!1}}(pt,JSON.stringify(e))}catch(e){return!1}}(t)},e.prototype.excludeOutdatedMessages=function(e){var t=Date.now();return e.filter((function(e){var r=e.eventParameters.clientEventTimestamp;return t-r<5184e6}))},e.prototype.processSavedMessages=function(){this.events=We(We([],ft(),!0),this.events,!0),this.events.length>0&&(mt(),this.sequence=this.getMaxSequence(this.events),this.startPush())},e.prototype.getEventsJsonSize=function(){var e=JSON.stringify(this.events);return new Blob([e]).size},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.startPush=function(){var e=this;if(0!==this.events.length){var t=function(t){return(e.isReady()?e.pushEvents(t):Promise.resolve()).then((function(){e.timer=null,e.startPush()}),(function(t){e.timer=null,e.handleApiError(t)}))};this.getEventsJsonSize()>=this.eventsJsonSizeLimit?t(this.events.length):this.timer||(this.timer=setTimeout((function(){return t(e.batchSize)}),this.pushInterval))}},e.prototype.pushEvents=function(e){return Ye(this,void 0,void 0,(function(){var t;return Ke(this,(function(r){return t=this.events.splice(0,e),[2,this.sendByXhr(t)]}))}))},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),r=0,n=e;r<n.length;r++)n[r].eventParameters.clientUploadTimestamp=t},e.prototype.updateSequence=function(e){e.eventParameters.sequence=++this.sequence},e.prototype.getMaxSequence=function(e){var t=0;return e.forEach((function(e){var r=e.eventParameters.sequence;r>t&&(t=r)})),t},e.prototype.sendByXhr=function(e){var t=this;return ye?e.length?(this.updateTimestamp(e),new Promise((function(r,n){var o=new ye,s=function(){if(o.status>=200&&o.status<=204)r();else{var t=Object.assign(new Error(o.responseText),{status:o.status,response:o.responseText,events:e});n(t)}};o.onerror=s,o.onload=s,o.ontimeout=s,o.timeout=t.pushTimeout;var i=JSON.stringify(e);t.gzipDisabled?t.sendEventsJSON(i,o):t.sendEventsGZip(i,o)}))):Promise.resolve():Promise.reject()},e.prototype.sendEventsJSON=function(e,t){t.open("POST",this.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.apiKey&&t.setRequestHeader("X-Api-Key",this.apiKey),t.send(e)},e.prototype.sendEventsGZip=function(e,t){var r=this;(function(e){return Ye(void 0,void 0,void 0,(function(){return Ke(this,(function(t){return[2,Promise.resolve().then((function(){return new Blob([e],{type:"application/json"}).stream().pipeThrough(new ve.CompressionStream("gzip"))})).then((function(e){return new Response(e)})).then((function(e){return e.blob()}))]}))}))})(e).then((function(e){try{t.open("POST",r.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/gzip"),t.setRequestHeader("Content-Encoding","gzip"),r.apiKey&&t.setRequestHeader("X-Api-Key",r.apiKey),t.send(e)}catch(e){}})).catch((function(){r.sendEventsJSON(e,t)}))},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(ge.onLine?(this.updateTimestamp(e),ge.sendBeacon(this.pushEventsUrl,JSON.stringify(e))||this.saveMessages(e)):this.saveMessages(e))},e.prototype.forceSend=function(){this.sendByBeacon()},e.prototype.send=function(e){this.updateSequence(e),this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),gt=function(e){console.error(e)},yt=function(){function e(e,t,r,n){void 0===n&&(n=18e5),this.clientParameters=e,this.transport=t,this.eventParameters=r,this.sessionTimeout=n,this.nativeBridge=new et,this.deviceId=function(){var e,t="true"===new URLSearchParams(ve.location.search).get("iswebview"),r=ct({from:"query"}),n=ct({from:"cookies"}),o=ct({from:"cookies",isWebview:t});return t&&o?(e=o,ot.set(Xe.wuid,e)):r?(e=r,n&&!t||ot.set(Xe.wuid,e)):e=n,e||(e=function(e){var t="";if("undefined"!=typeof crypto){var r=Math.ceil(16),n=new Uint8Array(r);crypto.getRandomValues(n),n.forEach((function(e){t+=e.toString(16).padStart(2,"0")}))}else for(var o=0;o<32;o++)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return t.substring(0,32)}(),ot.set(Xe.wuid,e)),function(e){ot.get(Xe.deviceId.name)!==e&&ot.set(Xe.deviceId,e)}(e),e}(),this.screenWidth=ve.screen.width,this.screenHeight=ve.screen.height,this.codegenVersion="",this.eventEmitter=new nt,this.eventEmitter.on("message",(function(e){var t;!function(e){var t=tt();t.history||(t.history=[]),t.history.length>=1e3||t.history.push(e)}(e),(t=tt(),t.listeners||(t.listeners=[]),t.listeners).forEach((function(t){try{t(e)}catch(e){gt(e)}}))}));var o,s,i=this.processStatistQueue.bind(this);o=i,(s=tt()).handlerApplied||(s.handlerApplied=!0,s.forEach((function(e){return o(e)})),s.length=0,s.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.forEach((function(e){return o(e)})),0})}return e.prototype.processStatistQueue=function(e){try{if(!e||!Array.isArray(e))return;var t=e;switch(t[0]){case"getMessagesHistory":return t[0],void(0,t[1])((r=tt(),r.history||(r.history=[]),r.history));case"onMessage":t[0],function(e){var t=tt();t.listeners||(t.listeners=[]),t.listeners.push(e)}(t[1])}}catch(e){gt(e)}var r},e.createTransport=function(e){var t=e.apiKey,r=e.transportOptions,n=e.environment,o=r||{},s=o.batchSize,i=void 0===s?100:s,a=o.pushInterval,c=void 0===a?5e3:a,u=o.pushTimeout,l=void 0===u?3e4:u,d=o.savedMessagesSize,p=void 0===d?1e3:d,h=o.eventsJsonSizeLimit,f=void 0===h?32e3:h,m=o.endpointUrl,v=void 0===m?lt[n||"prod"]:m,g=o.gzip,y=void 0===g||g,b=fe._statistTransports||(fe._statistTransports={});fe._statistTransport&&!b[lt.prod]&&(b[lt.prod]=fe._statistTransport),fe._statistDevTransport&&!b[lt.test]&&(b[lt.test]=fe._statistDevTransport);var w=b[v];if(w)return w;var E=new vt(v,{apiKey:t,batchSize:i,pushInterval:c,pushTimeout:l,preconnect:!1,savedMessagesSize:p,eventsJsonSizeLimit:f,gzip:y});return b[v]=E,v===lt.prod?fe._statistTransport=E:v===lt.test&&(fe._statistDevTransport=E),E},e.prototype.getSessionId=function(){var e=this.nativeBridge.getSessionId();if(null!==e)return e;var t=ot.get(Xe.sessionId.name),r=Number(ot.get(Xe.lastEventTime.name))||null;if(null!==t&&null!==r&&Date.now()-r<this.sessionTimeout)return t;var n=function(e,t,r){let n;if(e){var o,s;n=F(null!=(o=null!=(s=e.random)?s:null==e.rng?void 0:e.rng())?o:I(),e.msecs,e.seq,t,r)}else{const e=Date.now(),o=I();!function(e,t,r){null!=e.msecs||(e.msecs=-1/0),null!=e.seq||(e.seq=0),t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++)}(j,e,o),n=F(o,j.msecs,j.seq,t,r)}return t?n:D(n)}();return ot.set(Xe.sessionId,n),ot.remove(Xe.lastEventTime.name,!0),ot.remove(Xe.sessionStartTime.name,!0),n},e.prototype.getSessionStartTime=function(){return null===ot.get(Xe.sessionStartTime.name)?Date.now():Number(ot.get(Xe.sessionStartTime.name))},e.prototype.resolveClientParameters=function(e){return Ge(Ge({},null!=e?e:this.clientParameters),{sessionId:this.getSessionId(),deviceId:this.deviceId,sessionStartTime:this.getSessionStartTime(),screenWidth:this.screenWidth,screenHeight:this.screenHeight,sdkVersion:dt,codegenVersion:this.codegenVersion})},e.prototype.resolveFullClientParameters=function(e){var t=function(e){var t=e.referrer,r=e.location,n=e.internalDomains,o=1===Se(["performance","navigation","type"],Te)?r:t;if(o){var s=o.hostname;if(!function(e,t,r){return void 0===r&&(r=[]),e!==t&&[e,t].some((function(e){return r.every((function(t){return e!==t&&!e.endsWith(".".concat(t))}))}))}(r.hostname,s,n))return o.href.split("?")[0]}}({location:Fe(ve.location.href),referrer:Ve(),internalDomains:Be});return Ge(Ge(Ge(Ge({},this.resolveClientParameters(e)),this.getUtmMarkers()),t&&{referrer:t}),{pageUrl:rt()})},e.prototype.transportSend=function(e){this.transport.send(e),ot.set(Xe.lastEventTime,Date.now()),this.nativeBridge.notifyEventHappened(),null===ot.get(Xe.sessionStartTime.name)&&ot.set(Xe.sessionStartTime,e.clientParameters.sessionStartTime)},e.prototype.sendUserProperties=function(e,t,r,n){var o,s,i=((o={kind:"userProperties",project:e,eventParameters:ut(this.eventParameters),clientParameters:this.resolveClientParameters()})[r]=((s={})["$".concat(t)]=n,s),o);this.transportSend(i),this.eventEmitter.emit("message",{type:"userProperties",message:i})},e.prototype.send=function(e,t,r,n){var o={project:e,name:t,parameters:r,eventParameters:ut(this.eventParameters),clientParameters:this.resolveFullClientParameters(n)};this.transportSend(o),this.eventEmitter.emit("message",{type:"event",message:o})},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.updateUserProperties=function(e,t,r){this.sendUserProperties(e,t,"userProperties",null!=r?r:{})},e.prototype.updateFeatureFlags=function(e,t){this.sendUserProperties(e,"set","featureFlags",null!=t?t:{})},e.prototype.updateABGroups=function(e,t){this.sendUserProperties(e,"set","ABGroups",null!=t?t:{})},e.prototype.on=function(e,t){"message"===e?this.eventEmitter.on(e,t):this.transport.on(e,t)},e.prototype.off=function(e,t){"message"===e?this.eventEmitter.off(e,t):this.transport.off(e,t)},e.prototype.forceSend=function(){var e,t;null===(t=(e=this.transport).forceSend)||void 0===t||t.call(e)},e.prototype.fork=function(e){var t=(void 0===e?{}:e).enrich,r=Object.create(this);if(t){var n=this.send.bind(this);r.send=function(e,r,o,s){var i=o,a=t?t({project:e,name:r,parameters:o,overrideClientParameters:s}):{};return a&&"object"==typeof a?i=Object.assign(a,o):gt("Statist: enrichment is corrupted - enrichment result must be object"),n(e,r,i,s)}}return r},e.prototype.getUtmMarkers=function(){return function(){var e=Fe(ve.location.href),t=function(e){var t=e.referrer,r=e.locationHostname,n="";return t&&t.hostname!==r&&(n=t.hostname),n}({referrer:Ve(),locationHostname:e.hostname});return function(e){return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].reduce((function(t,r){var n,o=e[r];return o&&(t[(n=r,qe()(n))]=o),t}),{})}(function(e){var t,r,n=e.cookies,o=e.location,s=e.referrer,i=e.parseUrl,a=e.internalDomains,c=pe.map((function(e){return e.name})),u=he.map((function(e){return e.name})),l=o.query.parent_url,d=l?i(l):void 0,p=o.query.utm_source||!d?o.query:d.query,h=o.hash.replace("#",""),f=h?function(e,t,r){void 0===t&&(t="&"),void 0===r&&(r="=");for(var n={},o=0,s=e.split(t);o<s.length;o++){var i=s[o],a=String(i).split(r),c=a[0],u=a.slice(1);if(c){var l=u.join(r);try{l=decodeURIComponent(l)}catch(e){}n[decodeURIComponent(c)]=l}}return n}(h):{},m=W(G,p),v=W(c,p),g=W(c,f),y=J(v)?g:v;function b(e,t){for(var r=0,o=e;r<o.length;r++){var s=o[r],i=t[s.name];i?n.set(s,i):n.remove(s.name,!0)}}function w(e){return W(e,n.getAll())}function E(){return $({internal_source:""},m)}var S=!1,_=!1;return function(){var e,i,u,l,d;if(y.utm_source)return t=$($({collectionMethod:"get",cookieDate:Date.now(),utm_source:"",session_utm_source:y.utm_source||""},E()),y),r=function(){var e=p[ce.position];if("string"!=typeof e)return{};var t,r={};return z.test(e)?(t=e.split(/\D/),r.ctx_position=t.length>1?t[1]:"",r.ctx_block=t[0]+e.replace(/\d/g,"")):(r.ctx_position=e,r.ctx_block=p[ce.block]),r.ctx_source=p[ce.source]||"",r}(),void(S=!0);if(i=w(c),u=Number(n.get("utm_date_set"))||null,l=X.getItem(de)||"",d=null,i.utm_source&&(d="cookie"),t=$($({collectionMethod:d,cookieDate:u,utm_source:"",session_utm_source:l},E()),i),s&&function(e,t,r){return void 0===r&&(r=[]),e!==t&&[e,t].some((function(e){return r.every((function(t){return e!==t&&!e.endsWith(".".concat(t))}))}))}(o.hostname,s,a)){var h,f=null===(e=t.utm_source)||void 0===e?void 0:e.includes(".");if(!t.utm_source||f)return t=$({utm_source:h=s,session_utm_source:h,collectionMethod:"referrer",cookieDate:Date.now()},E()),r={},void(S=!0);t.session_utm_source||(t.session_utm_source=s,S=!0,_=!0)}}(),t=ie(le,t),r=ie(le,null!=r?r:{}),S&&function(e,t,r){void 0===r&&(r=!1),r||(n.set(re.utmDateSet,e.cookieDate||Date.now()),b(pe,e),b(he,t||{})),e.session_utm_source&&X.setItem(de,e.session_utm_source)}(t,r,_),r&&(r=w(u)),$($({},r),{utmMarkers:t})}({cookies:be(new je(le),we()),location:e,referrer:t,parseUrl:Fe,internalDomains:Be}).utmMarkers)}()},e.prototype.getDeviceId=function(){return Ye(this,void 0,void 0,(function(){return Ke(this,(function(e){return[2,this.deviceId]}))}))},e.prototype._setCodegenVersion=function(e){this.codegenVersion=e},e}(),bt=function(e){return fe._statistClientInitOptions?He()(e,fe._statistClientInitOptions):e},wt=function(e){function t(t){var r=bt(t);return e.call(this,r.clientParameters,yt.createTransport(r),r.eventParameters||Qe(),r.sessionTimeout)||this}return ze(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n||{},o)},t}(yt),Et=(function(e){function t(t){var r=bt(t);return e.call(this,r.clientParameters,yt.createTransport(t),r.eventParameters||Qe(),r.sessionTimeout)||this}ze(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n,o)}}(yt),function(e){return new Promise((function(t,r){var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=e,o.crossOrigin="anonymous",n.appendChild(o),o.onload=function(){return t(o)},o.onerror=function(){return r(new Error("error when loading ".concat(e," script")))}}))}),St="_statistClientInitializer";!function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;this.resolveClient=function(){},this.clientPromise=new Promise((function(e){r.resolveClient=e})),this.updateUserProperties=this.createEnqueuedClientMethod("updateUserProperties"),this.updateABGroups=this.createEnqueuedClientMethod("updateABGroups"),this.updateFeatureFlags=this.createEnqueuedClientMethod("updateFeatureFlags"),this.on=this.createEnqueuedClientMethod("on"),this.off=this.createEnqueuedClientMethod("off"),this.forceSend=this.createEnqueuedClientMethod("forceSend");var n=function(t){var n=t.apply(void 0,e);r.client=n,r.resolveClient(n)},o=window[St];o?n(o):(this.interceptClientInitialization(n),Ye(void 0,void 0,void 0,(function(){var e,t,r;return Ke(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=dt.split(".")[0],t="https://statist-web-sdk.t-static.ru/v".concat(e,"/client.js"),!ve||function(e){return!!me.querySelector('script[src="'.concat(e,'"'))}(t)?[2]:[4,Et(t)];case 1:return n.sent(),[3,3];case 2:return r=n.sent(),console.error(r instanceof Error?r.message:r),[3,3];case 3:return[2]}}))})))}e.prototype.interceptClientInitialization=function(e){var t=Object.getOwnPropertyDescriptor(window,St);Object.defineProperty(window,St,{configurable:!0,set:function(r){var n;null===(n=null==t?void 0:t.set)||void 0===n||n.call(t,r),e(r)}})},e.prototype.enqueueCall=function(e){return this.client?Promise.resolve(e(this.client)):this.clientPromise.then(e)},e.prototype.createEnqueuedClientMethod=function(e){var t=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.enqueueCall((function(t){var n;null===(n=t[e])||void 0===n||n.call.apply(n,We([t],r,!1))}))}},e.prototype.send=function(e,t,r,n){this.enqueueCall((function(o){return o.send(e,t,r,n)}))}}();var _t=r(21789),kt=r(42353),Tt=r(58426);const Ct=(0,kt.y)("UPDATE_SESSION"),Rt=(0,Tt.L)("session",{}).on(Ct,((e,t)=>t)),xt=(0,n.Y)({providers:[(0,i.J)({provide:S.sQ,multi:!0,useValue:[{key:"APP_VERSION",optional:!0,dehydrate:!0},{key:"STATIST_CLIENT_URL",optional:!0,dehydrate:!0}]}),(0,i.J)({provide:_t.E,useFactory:({appInfo:e,logger:t,envManager:r,enrichment:n})=>{const o=((e,t)=>{var r;return{clientParameters:{client:e.appName,clientVersion:null!==(r=t.get("APP_VERSION"))&&void 0!==r?r:"1.0.0",ssoId:null},transportOptions:{endpointUrl:t.get("STATIST_CLIENT_URL")}}})(e,r),s=t({name:"statist:event",defaults:{remote:!0}});let i=new wt(o);return n&&(i=i.enrichFork(n)),i.on("error",(e=>{0!==e.status&&s.error({event:"send-failed",error:e,status:e.status,response:e.response})})),i},deps:{appInfo:l.Qo,store:O.kR,logger:E.Fp,envManager:S.vC,enrichment:(0,a.jt)(_t.OZ)}}),(0,i.J)({provide:_t.se,useFactory:({statistClient:e})=>e,deps:{statistClient:_t.E}}),(0,i.J)({provide:_t.Kf,useFactory:({statistClient:e})=>e,deps:{statistClient:_t.E}}),(0,i.J)({provide:_t.nN,useValue:!0}),(0,i.J)({provide:P.init,useFactory:({store:e,statistClient:t,trackAndUpdateSsoIdFlag:r})=>()=>{if(!r)return;const n=e=>{t.updateClientParameters({ssoId:e.ssoId||null})};e.subscribe(Rt,n),n(e.getState(Rt))},deps:{store:O.kR,statistClient:_t.E,trackAndUpdateSsoIdFlag:_t.nN}})]})(class e{static forRoot({trackAndUpdateSsoId:t=!0,enrichment:r}){const n=[];return n.push((0,i.J)({provide:_t.nN,useValue:t})),r&&n.push((0,i.J)({provide:_t.OZ,useValue:r})),{mainModule:e,providers:n}}});var Mt=r(56873);const Pt=(0,n.Y)({imports:[xt],providers:[(0,i.J)({provide:P.init,useFactory:({statistClient:e,pageService:t,logger:n})=>()=>{if(e){const o=n("tinkoff-performance");((e,t)=>r.e("tramvai-web-performance-rum").then(r.bind(r,68348)).then((({initClientPerformanceMonitoring:r})=>{r({statistClient:e,resolveUrlMask:()=>{var e;return null===(e=t.getCurrentRoute())||void 0===e?void 0:e.path}})})))(e,t).catch((e=>{o.error({event:"init-failed",message:"@tinkoff/web-performance-rum package initialization failed",error:e})}))}},multi:!0,deps:{statistClient:{token:_t.Kf,optional:!0},pageService:Mt.Y9,logger:E.Fp}})]})(class{}),Ot=o({name:"TinkoffRetryModule",providers:[]}),At=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:S.sQ,useValue:[{key:"SENTRY_SDK_URL",dehydrate:!0,optional:!0,value:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/sentry/5.17.0/bundle.min.js",validator:m}],multi:!0})]})(class{}),Nt=(0,a.V3)("metaDefaultPack"),It=(0,a.V3)("metaWalk"),Lt=(0,a.V3)("metaUpdater",{multi:!0}),Dt=(0,a.V3)("applyMeta"),jt=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:Nt,useValue:{title:"     ,      ",ogTitle:"        .        .",ogDescription:"       5 .       .  -    .",ogSiteName:" ",ogImage:"http://static2.tinkoff.ru/portal/share/tinkoffru.png",ogImageSecure:"https://static2.tinkoff.ru/portal/share/tinkoffru.png"}})]})(class{}),Ft=(0,a.V3)("serverModulePapiPublicUrl",{scope:d.s.SINGLETON}),Vt=(0,a.V3)("serverModulePapiPrivateUrl",{scope:d.s.SINGLETON}),Bt=(d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,(0,a.V3)("liveness path",{scope:d.s.SINGLETON})),Ut=(0,a.V3)("readiness path",{scope:d.s.SINGLETON}),qt=(d.s.SINGLETON,d.s.SINGLETON,(0,a.V3)("early hints enabled"));var $t=r(49103),Ht=r.n($t);const Jt=(0,kt.y)("FEATURE_TOGGLE"),zt=(0,Tt.L)("featureToggle",{__values:{}}).on(Jt,((e,t)=>{const r={},n={};return Ht()((({status:e,value:t},o)=>{!1!==e&&(r[o]=e),null!==e&&e===t||(n[o]=t)}),t),{...r,__values:n}})),Gt=o({name:"FeatureToggleModule",providers:[(0,i.J)({provide:O.Ym,useValue:zt,multi:!0})]}),Yt=(0,n.Y)({imports:[Gt],providers:[(0,i.J)({provide:qt,useFactory:({envManager:e,store:t})=>()=>{var r,n;return null!==(n=(null!==(r=t.getState().featureToggle)&&void 0!==r?r:{}).early_hints_enabled)&&void 0!==n&&n||"true"===e.get("EARLY_HINTS_ENABLED")},deps:{envManager:S.vC,store:O.kR}})]})(class{});var Kt=r(80476);const Wt=(0,a.V3)("fastify request"),Qt=(0,a.V3)("fastify response"),Zt=(0,a.V3)("tramvai server response stream"),Xt=(0,a.V3)("tramvai server response task manager");d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON;var er=r(10776),tr=r(82912);const rr=/^[0-9a-f]{16}$/,nr=/^[0-9a-f]{32}$/,or=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,sr=(e,t)=>{const r="cookies"===t.from?(n=e.cookie,t.isWebview?null===(o=n.get("deviceId"))||void 0===o?void 0:o.toLowerCase():n.get("__P__wuid")):(e=>{const{wuid:t}=e.getParsedUrl().query;if("string"==typeof t)return t})(e.requestManager);var n,o;if(r&&(e=>rr.test(e)||nr.test(e)||or.test(e))(r))return r},ir=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:_.$,useFactory:e=>{const t="true"===e.requestManager.getParsedUrl().query.iswebview,r=sr(e,{from:"query"}),n=sr(e,{from:"cookies",isWebview:t}),o=sr(e,{from:"cookies"});return t&&n?n:null!=r?r:o},deps:{cookie:er.T,requestManager:tr.G}})]})(class{});let ar=class{};ar=(0,Kt.__decorate)([(0,n.Y)({imports:[ir],providers:[(0,i.J)({provide:P.customerStart,useFactory:({loggerSharedContext:e,request:t,wuid:r})=>function(){e.set("path",t.url),e.set("host",t.headers.host),e.set("x-original-host",t.headers["x-original-host"]),e.set("user-agent",t.headers["user-agent"]),e.set("x-request-id",t.headers["x-request-id"]),e.set("x-real-ip",t.headers["x-real-ip"]),e.set("wuid",r)},deps:{loggerSharedContext:E.yV,request:Wt,wuid:_.$}})]})],ar);const cr=(0,n.Y)({imports:[u,T,ar,C,Pt,Ot,At,jt,Yt,s.forRoot(["https://www.cdn-tinkoff.ru","https://acdn.tinkoff.ru","https://cdn.tbank.ru","https://unic-cdn-prod.cdn-tinkoff.ru"])],providers:[]})(class{}),ur=(0,a.V3)("di");var lr=r(437);const dr=(0,a.V3)("context");var pr=r(67570),hr=r(86499),fr=r(19434),mr=r(8751);const vr=(0,a.V3)("analytics"),gr=(0,a.V3)("analyticsConfig"),yr=(0,a.V3)("analyticsTagManagerContainer"),br=(0,a.V3)("analyticsTTM"),wr=(0,a.V3)("analyticsTwtBundle"),Er=(0,a.V3)("analyticsEventeaReady"),Sr=(0,a.V3)("ANALYTICS_MODE"),_r={trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},kr=(0,i.J)({provide:pr.j5,useFactory:({logger:e,analytics:t})=>{const r=e({name:"eventea-logger",defaults:{remote:!0}});let n="hasNotFetchedYet";return t&&(null==t||t.waitFor("personalizedLandingMetrics").then((()=>{const{personalizedLandingMetrics:e}=t.state;if(!e)return void r.error("Unable to resolve personalizedLandingMetrics in analytics module.");const{state:{dcoGeneralId:o=""}}=e;o&&(n=o)})).catch((e=>{r.error({event:"eventea-dco-monitoring-error",error:e})}))),function({event:e,payload:t,config:o,project:s,handlersData:i}){var a;const c=(null==o?void 0:o.level)||o,u=null!==(a=null==o?void 0:o.samplingRate)&&void 0!==a?a:1;var l;if("string"==typeof c&&_r[c]&&c in r){if(0===(l=u)||1===l?l:Math.random()<=l){const o=i?{...i,statist:void 0}:i;r[c]({event:e,eventeaProject:s,payload:t,handlersData:o,dcoGeneralId:n})}}else r.error({event:"eventea-wrong-logs-config",originalEvent:e,originalLevel:c})}},deps:{logger:E.Fp,analytics:{token:vr,optional:!0}}});var Tr=r(18422);const Cr="5.71.6",Rr=(0,i.J)({provide:pr.q2,useFactory:({analytics:e,logger:t})=>{const r=t({name:"eventea-logger-tracking",defaults:{remote:!0}});if(!e)return void t.warn("There is no analytics module, EVENTEA_TRACKING_HANDLER WILL NOT WORK");const n=e.callUtil("makeEventeaHandler");let o=!1;return t=>{o?(0,Tr.OR)(e,t):n.then((e=>{e(t)})).catch((e=>{o=!0,r.error({event:`Unable to resolve makeEventeaHandler. Fallback to twt-eventea-handler v${Cr}`,error:e})}))}},deps:{analytics:{token:vr,optional:!0},logger:E.Fp}}),xr=(0,i.J)({provide:pr.g3,useFactory:({analytics:e,logger:t})=>{const r=t({name:"eventea-logger-twt-data",defaults:{remote:!0}});if(!e)return void t.warn("There is no analytics module, EVENTEA_TWT_DATA_HANDLER WILL NOT WORK");const n=e.callUtil("makeEventeaDataHandler");let o=!1;return t=>{o?(0,Tr.x4)(e,t):n.then((e=>{e(t)})).catch((e=>{o=!0,r.error({event:`Unable to resolve makeEventeaDataHandler util. Fallback to twt-eventea-data-handler v${Cr}`,error:e})}))}},deps:{analytics:{token:vr,optional:!0},logger:E.Fp}}),Mr=(0,kt.y)("set routing map"),Pr=(0,Tt.L)("eventea",{routingMap:{}}).on(Mr,((e,t)=>({routingMap:t}))),Or=[{provide:O.Ym,multi:!0,useValue:[Pr]}];var Ar;const Nr={routingMap:pr.rF,errorHandlers:pr.nM,projectHandlersList:{token:pr.eW,multi:!0},envManager:S.vC,appInfo:l.Qo,defaultEventHandlers:{token:pr.qq,multi:!0},defaultDataHandlers:{token:pr.qJ,multi:!0},clientLoaderTimeout:pr.lb,selectPreloadProjects:pr.X9};let Ir=Ar=class{static forRoot({projects:e}){const t=e.map((({project:e,fallbackForServer:t})=>(0,i.J)({provide:pr.eW,multi:!0,useFactory:({logger:r})=>(t&&r("eventea-logger-module-forRoot").error([`You passed fallbackForServer to the client for project ${e}, this will bloat your client build.`,"See eventea documentation on how this can be avoided."].join("\n")),{project:e}),deps:{logger:E.Fp}})));return{mainModule:Ar,providers:t}}};Ir=Ar=(0,Kt.__decorate)([(0,n.Y)({imports:[],providers:[...Or,(0,i.J)({provide:pr.X9,useFactory:({envManager:e})=>{const t="true"===e.get("TRAMVAI_FORCE_CLIENT_SIDE_RENDERING");return function(e){return t?e:[]}},deps:{envManager:S.vC}}),{provide:pr.Bv,useFactory({routingMap:e,errorHandlers:t,projectHandlersList:r,envManager:n,appInfo:o,defaultEventHandlers:s,defaultDataHandlers:i,clientLoaderTimeout:a,selectPreloadProjects:c}){const u=(()=>{const e=Object.create(null);return{useEvent:({project:t,event:r})=>{e[t]||(e[t]=Object.create(null)),e[t][r]=!0},getUsedEvents:()=>Object.keys(e).map((t=>({projectName:t,eventList:Object.keys(e[t])})))}})(),l=null==n?void 0:n.get("EVENTEA_PROJECTS"),d=([...r,...(l&&l.match(/[a-zA-Z0-9\-\_]+/g)||[]).map((e=>({project:e})))]||[]).reduce(((t,r)=>(t[r.project]={eventHandlers:r.eventHandlers,dataHandlers:r.dataHandlers,routing:e[r.project]},t)),{}),p=s.reduce(((e,{name:t,handler:r})=>({...e,[t]:r})),{}),h=i.reduce(((e,{name:t,handler:r})=>({...e,[t]:r})),{}),f=c(Object.keys(d)),m=n.get("EVENTEA_BEER_URL")?new mr.EventeaBeerClient({baseUrl:n.get("EVENTEA_BEER_URL")}):void 0,v=new fr.ClientLoader({preloadProjects:f,handleRequestError:({project:e,status:t})=>{m&&m.event({project:"eventea",event:"client-loader-error",payload:{projectName:e,status:t},handlersData:{appName:o.appName}})},baseUrl:null==n?void 0:n.get("EVENTEA_LOADER_URL"),timeout:a}),g=new lr.Eventea({projectConfigurationMap:d,errorHandlers:t,beerBaseUrl:n.get("EVENTEA_BEER_URL"),handlersData:{appName:o.appName,appVersion:n.get("APP_VERSION"),appRelease:n.get("APP_RELEASE")},handleAnyEvent:e=>{u.useEvent(e)},defaultEventHandlers:p,defaultDataHandlers:h,routingClientLoader:v,batchingConfig:{batchingEnable:"true"===n.get("EVENTEA_CLIENT_BATCHING_ENABLE"),batchSize:Number(n.get("EVENTEA_CLIENT_BATCH_SIZE")),batchDelay:Number(n.get("EVENTEA_CLIENT_BATCH_DELAY"))}});return window.addEventListener("pagehide",(()=>{const e=u.getUsedEvents();e.length&&e.forEach((({projectName:e,eventList:t})=>{g.sendOnce({project:"eventea",event:"usage-stats",payload:{projectName:e,eventList:t}},e)}))})),window.__eventea=g,g},deps:Nr},{provide:pr.rF,useFactory:({context:e})=>e.getState(Pr).routingMap,deps:{context:dr}},{provide:pr.nM,useFactory({logger:e}){const t=e("eventea-error-handlers");return{handleMissedEvent:({event:e,project:r})=>{t.error({event:"eventea-missed-event",project:r,eventName:e})},handleMissedEventHandler:({event:e,routeHandlerName:r,project:n})=>{t.error({event:"eventea-missed-event-handler",eventName:e,project:n,routeHandlerName:r})},handleMissedProject:({event:e,project:r})=>{t.error({event:"eventea-missed-project",project:r,eventName:e})},handleMissedRouting:({project:e})=>{t.error({event:"eventea-missed-routing",project:e})},handleMissedDataHandler:({project:e,handlerName:r})=>{t.error({event:"eventea-missed-data-handler",project:e,handlerName:r})},handleMissedDataProject:({project:e})=>{t.error({event:"eventea-missed-data-project",project:e})},handleMissedRoutes:({project:e,event:r})=>{t.error({event:"eventea-missed-routes",project:e,eventName:r})},handleDeprecatedEvent:({project:e,event:r})=>{t.info({event:"eventea-deprecated-event",project:e,eventName:r})},handleEventHandlerError:(e,r,{project:n,event:o})=>{t.error({event:"eventea-handler-error",project:n,eventName:o,handlerName:r,error:e})}}},deps:{logger:E.Fp}},Rr,xr,kr,{provide:pr.lb,useValue:5e3},(0,i.J)({provide:pr.eW,multi:!0,useValue:{project:"eventea"}}),(0,i.J)({provide:pr.Yw,useFactory:({statistClient:e,logger:t})=>{if(e)return(0,hr.I)({statistClient:e});t.warn("There is no statist event api client, EVENTEA_STATIST_HANDLER WILL NOT WORK")},deps:{statistClient:{token:_t.se,optional:!0},logger:E.Fp}}),(0,i.J)({provide:pr.qq,useFactory:({statistHandler:e})=>({name:"statist",handler:e}),deps:{statistHandler:pr.Yw},multi:!0}),(0,i.J)({provide:pr.qq,useFactory:({logsHandler:e})=>({name:"logs",handler:e}),deps:{logsHandler:pr.j5},multi:!0}),(0,i.J)({provide:pr.qq,useFactory:({trackingHandler:e})=>({name:"tracking",handler:e}),deps:{trackingHandler:pr.q2},multi:!0}),(0,i.J)({provide:pr.qJ,useFactory:({twtDataHandler:e})=>({name:"twt",handler:e}),deps:{twtDataHandler:pr.g3},multi:!0}),(0,i.J)({provide:P.init,useFactory:({di:e})=>()=>{e.get(pr.Bv)},deps:{di:ur}})]})],Ir);let Lr=class{};Lr=(0,Kt.__decorate)([(0,n.Y)({imports:[Ir],providers:[(0,i.J)({provide:pr.eW,multi:!0,useValue:{project:"boxy"}})]})],Lr);var Dr=r(44831),jr=r.n(Dr),Fr=r(22422),Vr=r.n(Fr);const Br=["init","addBreadcrumb","captureMessage","captureException","captureEvent","configureScope","withScope"];function Ur(){return window.Sentry}var qr=r(98799),$r=r.n(qr),Hr=r(34770),Jr=r.n(Hr),zr=r(92366),Gr=r.n(zr);const Yr=(0,a.V3)("reactErrorBoundaryHandlers",{multi:!0}),Kr=(0,a.V3)("errorBoundaryFallbackComponent"),Wr=(0,a.V3)("sentry",{scope:d.s.SINGLETON}),Qr=(0,a.V3)("sentryDSNToken",{scope:d.s.SINGLETON}),Zr=(0,a.V3)("sentryOptions",{scope:d.s.SINGLETON,multi:!0}),Xr=(d.s.SINGLETON,(0,a.V3)("sentryLazyLoading",{scope:d.s.SINGLETON})),en=(0,a.V3)("SENTRY_FILTER_ERRORS",{scope:d.s.SINGLETON,multi:!0}),tn=(d.s.SINGLETON,[{provide:P.init,multi:!0,useFactory:({sentry:e,multiOptions:t,envManager:r,sentryDsn:n,filterErrors:o})=>{const s=e=>{const s={maxBreadcrumbs:20,enabled:!0,environment:r.get("SENTRY_ENVIRONMENT"),dsn:n,release:r.get("SENTRY_RELEASE"),beforeSend:(e,t)=>$r()((r=>r(e,t)),null!=o?o:[])?null:Gr()(null==t?void 0:t.originalException)?t.originalException.catch((t=>(e.extra={...e.extra,...t},e))):(Jr()(null==t?void 0:t.originalException)&&(e.extra={...e.extra,...null==t?void 0:t.originalException}),e)};return(null!=t?t:[]).reduce(((t,r)=>({...t,...Vr()([e,t],r)})),s)};return function(){e.init(s)}},deps:{sentry:Wr,multiOptions:{token:Zr,optional:!0},envManager:S.vC,sentryDsn:Qr,filterErrors:{token:en,optional:!0}}},{provide:Yr,multi:!0,useFactory:({sentry:e})=>function(t,r){e.withScope((n=>{n.setExtras(r),e.captureException(t)}))},deps:{sentry:Wr}}]);var rn;const nn=e=>(e=>"UnhandledRejection"===e.type&&/promise rejection captured with value: (undefined|null)/g.test(e.value))(e)||(e=>"Error"===e.type&&/Problem with the file loading/g.test(e.value))(e);let on=rn=class{static forRoot(e){return{mainModule:rn,providers:[{provide:Zr,multi:!0,useValue:e}]}}};on=rn=(0,Kt.__decorate)([(0,n.Y)({providers:[...tn,{provide:Wr,scope:d.s.SINGLETON,useFactory:({envManager:e,logger:t,sentryLazyLoading:r})=>{let n;return t&&(n=e=>{t.info({event:"global-errors",value:e})}),function({sdkBundleUrl:e,lazyInjecting:t=!1,sendGlobalErrorsCount:r}){var n;const o=null!==(n=window.__SENTRY_MODULE_INLINE_ERROR_INTERCEPTOR__)&&void 0!==n?n:{},s=o.onError,i=[];let a=Ur(),c=a?"loaded":null,u=0;function l(){var e,t;if(null===(e=o.clear)||void 0===e||e.call(o),r&&(window.onerror=()=>{u+=1},window.onunhandledrejection=()=>{u+=1},window.addEventListener("pagehide",(()=>{u&&r(u)}))),a=Ur(),!a)return;const n=a.init;a.init=e=>{n(Vr()([a],e))},i.forEach((({method:e,args:t})=>{a[e](...t)}));const s=window.onerror,c=window.onunhandledrejection;null===(t=o.errorsQueue)||void 0===t||t.forEach((e=>{"error"in e&&s?s.apply(window,e.error):"promise"in e&&c&&c.apply(window,e.promise)}))}function d(){c="loading";const t=document.createElement("script");t.async=!0,t.src=e,t.crossOrigin="anonymous",t.onerror=()=>{c="fail"},t.onload=()=>{c="loaded",l()},document.head.appendChild(t)}function p(){null==c&&d()}function h(){(function(){var e;if(null!=c)return!1;const t=(null===(e=o.errorsQueue)||void 0===e?void 0:e.length)>0,r=!!jr()((({method:e})=>"withScope"===e||e.indexOf("capture")>-1),i);return t||r})()&&d()}o.onError=(...e)=>{null==s||s(...e),h()};const f=Br.reduce(((e,t)=>(e[t]=(...e)=>{if(a)return a[t](...e);i.push({method:t,args:e}),h()},e)),{});return f.forceLoad=()=>{p()},"loaded"===c?l():t?h():p(),f}({sdkBundleUrl:e.get("SENTRY_SDK_URL"),lazyInjecting:r,sendGlobalErrorsCount:n})},deps:{envManager:S.vC,logger:{token:E.Fp,optional:!0},sentryLazyLoading:Xr}},{provide:Qr,useFactory:({envManager:e})=>e.get("SENTRY_DSN_CLIENT")||e.get("SENTRY_DSN"),deps:{envManager:S.vC}},{provide:en,multi:!0,useValue:(e,t)=>{var r,n;return null===(n=null===(r=null==e?void 0:e.exception)||void 0===r?void 0:r.values)||void 0===n?void 0:n.every(nn)}},{provide:Xr,useValue:!0}]})],on);var sn=r(87300),an=r.n(sn);function cn(e){const t=new URLSearchParams(e||"");return t.forEach(((e,r)=>{if(/sessionid/i.test(r)){const[n,o=""]=e.split("."),s=n.slice(0,12)+an()(n.slice(12).length,"*");t.set(r,`${s}.${o}`)}else"ticket"===r&&t.set(r,an()(e.length,"*"))})),t.toString()}function un(e){const[t,r=""]=(e||"").split("?"),[n,o]=r.split("#");return n?`${t}?${cn(n)}${o?`#${o}`:""}`:e}function ln(e,t){const r=null==e?void 0:e.category;return"http"===r||"fetch"===r||"xhr"===r?e.data.url=un(e.data.url):"navigation"===r&&(e.data.from=un(e.data.from),e.data.to=un(e.data.to)),e}let dn=class{};dn=(0,Kt.__decorate)([(0,n.Y)({imports:[on],providers:[{provide:Zr,multi:!0,useFactory:({envManager:e,appInfo:t,requestManager:r,wuid:n,filterErrors:o})=>{const{appName:s}=t,i=e.get("APP_VERSION");return function(t,o){var a,c;return{beforeSend:function(e,t){var a;const{tags:c={},contexts:u={},user:l={},request:d={}}=e,{host:p,search:h,pathname:f,href:m}=window.location;return null===(null===(a=o.beforeSend)||void 0===a?void 0:a.call(o,e,t))?null:(e.transaction=f,e.request={...d,url:un(m),query_string:cn(h.slice(1))||void 0},e.environment||(e.environment=p),e.tags={wuid:n,"app.name":s,"app.version":i,"app.platform":"browser",...c},e.contexts={app:{app_name:s,app_version:i},...u},e.user={wuid:n,ip_address:r.getClientIp()||void 0,...l},e)},beforeBreadcrumb:ln,release:null!==(c=null!==(a=o.release)&&void 0!==a?a:e.get("APP_RELEASE"))&&void 0!==c?c:e.get("APP_VERSION")}}},deps:{appInfo:l.Qo,envManager:S.vC,requestManager:tr.G,wuid:{token:_.$,optional:!0}}}]})],dn);const pn=(e,t)=>{const r=new Error(e);return Object.assign(r,{...t,stack:t.stack?`${r.stack}\n---- caused by: ----\n${t.stack}`:r.stack})},hn="__NOT_YET__MARKER",fn="__CIRCULAR__MARKER";function mn(e){return e.isModernToken?e.name:Symbol.for(e.toString())}function vn(e,t,r,n,o,s){return{factory:e,resolvedDeps:t,scope:r,multi:n?[]:void 0,stack:o,staticValue:s}}class gn{constructor(e,t){this.records=new Map,this.recordValues=new Map,e&&e.forEach((e=>this.register(e))),this.fallback=t,this.register({provide:ur,useValue:this,scope:d.s.SINGLETON})}get(e){var t,r;let n,o=!1,s=!1;"string"==typeof e?n=e:"token"in e?(n=e.token,o=e.optional,s=(null===(t=n.options)||void 0===t?void 0:t.multi)||!1):n=e,n=mn(n);const i=this.getRecord(n);return!i&&(null===(r=this.fallback)||void 0===r?void 0:r.getRecord(n))?this.fallback.get(e):!i&&o?s?[]:null:(function(e,t){if(void 0===e){const e=(0,a.HY)(t);throw pn(`Token not found "${e}"`,{type:d.D.NOT_FOUND})}}(i,n),this.hydrate(i,n,o))}getOfDeps(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=this.get(e[r]));return t}getRecord(e){return this.records.get(e)}has(e){return!!this.getRecord(mn(e))}borrowToken(e,t){const r=mn(t);if(!this.getRecord(r)){const t=e.getRecord(r);if(t){if(t.multi)for(const e of t.multi)this.recordValues.set(e,hn);this.records.set(r,t),this.recordValues.set(t,hn)}}}getValue(e){return this.recordValues.get(e)}register(e){return function(e){if("string"==typeof e.provide)return;const t=e.provide.options;if(!e.provide.isModernToken&&t&&t.multi&&!e.multi)throw pn(`Token ${e.provide.toString()} require multi providers`,{type:d.D.REQUIRE_MULTI,stack:e.__stack})}(e),this.processProvider(e)}processProvider(e){var t;const r=mn(e.provide),n=function(e){var t;let r,n,o=null!==(t=e.provide.isModernToken&&e.provide.options.scope)&&void 0!==t?t:d.s.REQUEST,s=!1;return"useFactory"in e?(r=t=>e.useFactory(t),"deps"in e&&(n=e.deps),e.scope?o=e.scope:e.provide.isModernToken&&e.provide.options.scope&&(o=e.provide.options.scope)):"useClass"in e?(r=t=>new e.useClass(t),"deps"in e&&(n=e.deps),e.scope?o=e.scope:e.provide.isModernToken&&e.provide.options.scope&&(o=e.provide.options.scope)):(r=()=>e.useValue,s=!0,e.scope?o=e.scope:e.provide.isModernToken&&e.provide.options.scope&&(o=e.provide.options.scope)),vn(r,n,o,!1,e.__stack,s)}(e),o=function(e){return"useValue"in e?e.useValue:hn}(e);if(e.provide.isModernToken&&(null===(t=e.provide.options)||void 0===t?void 0:t.multi)||e.multi){let t=this.getRecord(r);if(t){if(void 0===t.multi)throw pn(`Mixed multi-provider for ${(0,a.HY)(r)}`,{type:d.D.MIXED_MULTI,stack:e.__stack})}else t=vn(void 0,{},e.scope||e.provide.isModernToken&&e.provide.options.scope||d.s.REQUEST,!0,e.__stack),this.records.set(r,t),this.recordValues.set(t,hn);t.multi.push(n)}else this.records.set(r,n);this.recordValues.set(n,o)}hydrateDeps(e){return this.getOfDeps(e.resolvedDeps)}hydrate(e,t,r){let n=this.getValue(e);if(function(e,t,r){if(r===fn){const r=(0,a.HY)(t);throw pn(`Circular dep for "${r}"`,{type:d.D.CIRCULAR_DEP,stack:e.stack})}}(e,t,n),n!==hn)return n;if(e.multi){this.recordValues.set(e,fn);try{n=e.multi.map((e=>this.hydrate(e,t,!1)))}catch(t){throw this.recordValues.set(e,hn),t}}else{this.recordValues.set(e,fn);try{n=e.factory(this.hydrateDeps(e))}catch(n){if(this.recordValues.set(e,hn),r&&n.type===d.D.NOT_FOUND)return null;!function(e,t){const r=(0,a.HY)(e);throw t.__extendedWithStack?t.message+=` < ${r}`:(t.__extendedWithStack=!0,t.message=`${t.message} at "${r}"`),Object.hasOwnProperty.call(t,"stack")&&"string"==typeof t.stack&&(t.stack=t.stack.replace(/^.+\n/,`${t.name}: ${t.message}\n`)),t}(t,Object.assign(n,{stack:!e.stack||/---- caused by: ----/g.test(n.stack)?n.stack:`${n.stack}\n---- caused by: ----\n${e.stack||""}`}))}}return this.recordValues.set(e,n),n}}const yn=e=>!1!==Boolean(e)&&(n.e in e||"mainModule"in e&&yn(e.mainModule)),bn=e=>!!e.mainModule,wn=e=>{let t;if(bn(e)){t={...e.mainModule[n.e]},t.providers=t.providers.concat(e.providers||[]);const r=t.imports||[];t.imports=r.concat(e.imports||[])}else t=e[n.e];return t};class En{constructor({name:e,modules:t=[],bundles:r={},actions:n=[],providers:o}){this.di=new gn(void 0),this.modulesToResolve=new Set,this.walkOfProviders(function(e,t,r,n){return[{provide:l.Qo,scope:d.s.SINGLETON,useValue:{appName:e}},{provide:l.om,scope:d.s.SINGLETON,useValue:t},{provide:l.I7,scope:d.s.SINGLETON,useValue:r,multi:!0},{provide:l.mJ,scope:d.s.SINGLETON,useValue:n}]}(e,r,n,t)),(e=>{const t=[],r=new Set,n=new Set,o=e=>{if(!yn(e))throw new Error("An invalid module was passed in the list of modules");const s=wn(e);r.has(s.id)||(r.add(s.id),n.add(s.name),s.imports&&s.imports.forEach((e=>{o(e)})),t.push(e))};return e.forEach((e=>{o(e)})),t})(t).forEach((e=>{const t=wn(e);this.modulesToResolve.add(bn(e)?e.mainModule:e),this.walkOfProviders(t.providers)})),o&&this.walkOfProviders(o)}async initialization(e,t="init"){!window.__TRAMVAI_HTML_READY__&&window.__TRAMVAI_HTML_READY_PROMISE__&&await Promise.race([window.__TRAMVAI_HTML_READY_PROMISE__,new Promise((e=>{"complete"===document.readyState?e():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))}))]);const r=this.di.get({token:E.Fp,optional:!0}),n=null==r?void 0:r("tramvai-core"),o=this.di.get({token:x,optional:!0});if(!o)throw new Error("`COMMAND_LINE_RUNNER_TOKEN` is not defined, have you added `@tramvai/module-common` to your dependency list?");null==n||n.warn({event:"tramvai-app-init",message:"Initializing. Run CommandLineRunner."});const s=await o.run(e,t);return null==n||n.warn({event:"tramvai-app-init",message:"CommandLineRunner executed successfully. Resolving modules."}),this.resolveModules(),null==n||n.warn({event:"tramvai-app-init",message:"Modules resolved successfully. Tramvai App initialized"}),s}walkOfProviders(e){e.forEach((e=>{this.di.register(e)}))}resolveModules(){this.modulesToResolve.forEach((e=>{new e(this.resolveModuleDeps(e))}))}resolveModuleDeps(e){const{deps:t}=e[n.e];if(t)return this.di.getOfDeps(t)}}var Sn=r(72478),_n=r(10950);const kn=(0,a.V3)("ADMIN_SERVICE"),Tn=(0,a.V3)("ADMIN_RESOURCES_SERVICE"),Cn=(0,a.V3)("ADMIN_PAGE_ENRICHMENT_SERVICE"),Rn=(0,a.V3)("INTEGRATION_ADMIN_SERVICE"),xn=(0,a.V3)("ADMIN_API_HTTP_CLIENT_FACTORY"),Mn=(0,a.V3)("ADMIN_API_DEFAULT_OPTIONS_FACTORY"),Pn=(0,a.V3)("TINKOFF_API_SERVICE"),On=(0,a.V3)("COMMON_API_HTTP_CLIENT_FACTORY"),An=(0,a.V3)("COMMON_API_DEFAULT_OPTIONS_FACTORY"),Nn=(0,a.V3)("apiOriginService"),In=(0,a.V3)("apiOriginServiceDecorator",{multi:!0});var Ln=r(38507),Dn=r.n(Ln);const jn=(0,kt.y)("Set analytics config"),Fn=(0,Tt.L)("analytics",{}).on(jn,((e,t)=>({...e,config:t}))),Vn=[{provide:O.Ym,multi:!0,useValue:[Fn]},(0,i.J)({provide:P.resolvePageDeps,multi:!0,useFactory:({tracking:e,pageService:t})=>function(){e.extend(Dn()("analytics",{},t.getMeta()))},deps:{tracking:vr,pageService:Mt.Y9}}),(0,i.J)({provide:gr,useFactory:({store:e})=>{const{config:t={}}=e.getState(Fn);return t},deps:{store:O.kR}})],Bn=(0,a.V3)("DPP_SERVICE");var Un=r(29376);const qn=(0,kt.y)("UPDATE_ROLES"),$n={[Un.$d]:(0,Un.Me)()},Hn=(0,Tt.L)("roles",$n).on(qn,((e,t)=>t)),Jn="userType",zn={Visitor:0,"Client-Light":10,Applicant:20,"Client-Heavy":30},Gn=e=>zn[e]||0;let Yn=!1;const Kn=(e,t)=>{const{tracking:r,logger:n,cookies:o}=t,s=n("analytics:tracking:user-type"),i=o.get(Jn)||"Visitor",a=Gn(i),c=(e=>{let t;switch(!0){case(0,Un.o2)(e):t="Client-Light";break;case(0,Un.C5)(e):t="Client-Heavy";break;default:t="Visitor"}return t})(e),u=Gn(c);let l=i;u>=a&&(l=c,((e,t,r)=>{t.debug({message:"New user level",userType:r}),e.set({name:Jn,value:r,expires:63072e3,noSubdomains:!0})})(o,s,c)),r.extend({userType:l,userStatus:(0,Un.QO)(e)?"Logged In":"Not Logged In"}),!Yn&&u>a&&(0,Un.QO)(e)&&(Yn=!0,r.event("ibSuccess"))},Wn=(e,t)=>{e.requested&&t.extend({userId:e.userId||"1111",ssoId:e.ssoId||null})},Qn={essentials:"Essential",functional:"Functionality",analytics:"Statistics",marketing:"Marketing"},Zn=[(0,i.J)({provide:P.init,useFactory:({store:e,tracking:t,cookies:r,logger:n})=>()=>{const o=e.getState(Hn);o&&(Kn(o,{tracking:t,cookies:r,logger:n}),e.subscribe(Hn,(e=>Kn(e,{tracking:t,cookies:r,logger:n}))))},deps:{store:O.kR,tracking:vr,logger:E.Fp,cookies:er.T}}),(0,i.J)({provide:P.init,useFactory:({tracking:e,store:t})=>()=>{const r=t.getState(Rt);r&&(Wn(r,e),t.subscribe(Rt,(t=>Wn(t,e))))},deps:{store:O.kR,tracking:vr}}),(0,i.J)({provide:P.customerStart,deps:{dppService:{token:Bn,optional:!0},tracking:vr},useFactory:({dppService:e,tracking:t})=>async()=>{if(!e)return;const r=await t.callUtil("getConsentVault");if(!r)return;let n=()=>{};n=e.subscribeToAccept((async e=>{r.update(((e,t)=>Object.entries(e).reduce(((e,[r,n])=>(e[t[Qn[r]]]=n,e)),{}))(e,r.categories),"keep"),n()}))}})],Xn={prefix:"platform/stable",integrity:{client:"",express:"",tramvai:""}};var eo;let to=eo=class{static forRoot({atmContainer:e,ttm:t,twtBundle:r,mode:n}){const o=[];return e&&o.push({provide:yr,useValue:e}),t&&o.push({provide:br,useValue:t}),r&&o.push({provide:wr,useValue:r}),n&&o.push({provide:Sr,useValue:n}),{mainModule:eo,providers:o}}};to=eo=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:S.sQ,multi:!0,useValue:[{key:"CONFIG_API",dehydrate:!1,validator:g([m,v("/")])},{key:"APP_VERSION",optional:!0,dehydrate:!0}]}),(0,i.J)({provide:vr,useFactory:({logger:e,store:t,eventeaReady:r,appInfo:n,envManager:o})=>{const{config:s={}}=t.getState(Fn),i=window.twtConfig=window.twtConfig||{};i.logger=e("analytics:tracking"),i.disableUserInfo=!0;const{atmContainer:a,containers:c}=(null==s?void 0:s.atm)||{};a&&(i.atmContainerName=a),c&&(i.atmContainers=c);const u=null==s?void 0:s.ttm;u&&(i.ttm=u);const l=new Sn.Z;l.resolve((0,_n.A)());const d={appName:n.appName,appVersion:o.get("APP_VERSION"),proxyVersion:Cr,tramvaiVersion:"4.41.66",eventeaReady:r};l.event=(e,t)=>(l.callUtil("tramSendEvent",e,t,d),l);const p=l.extend;return l.extend=e=>{const t=p.call(l,e);return l.callUtil("tramPostData",e,d),t},l},deps:{logger:E.Fp,store:O.kR,eventeaReady:(0,a.jt)(Er),envManager:S.vC,appInfo:l.Qo}}),(0,i.J)({provide:"router afterNavigateHooks",multi:!0,useFactory:({tracking:e})=>()=>{e.updateLocation()},deps:{tracking:vr}}),{provide:P.init,useFactory:function(e){const{resourceLoader:t,logger:r,envManager:n,twtBundle:o,atmContainer:s,ttm:i,requestManager:a}=e,c=r("analytics:twt-loader");if("server"===(e=>{const{envManager:t,mode:r}=e;switch(!0){case"client"===r:case"server"!==r&&"true"===t.get("TRAMVAI_FORCE_CLIENT_SIDE_RENDERING"):return"client";default:return"server"}})(e)||"true"===a.getParsedUrl().query.disableAnalytics)return()=>Promise.resolve();return function(){(async function(){var e;let a;try{a=await t.getResources("analytics_config")}catch(e){a={},c.error(e,"Failed to load analytics_config")}const u=window.twtConfig=window.twtConfig||{};s&&(u.atmContainerName=s);const l=null===(e=null==a?void 0:a.atm)||void 0===e?void 0:e.containers;l&&(u.atmContainers=l),i&&(u.ttm=i),function(e,t,r,n){var o,s;const i=t||"platform",a=(null===(s=null===(o=null==r?void 0:r.twt)||void 0===o?void 0:o.bundles)||void 0===s?void 0:s[i])||Xn,c=n.get("TWA_CDN_URL")||(null==a?void 0:a.baseUrl)||"https://acdn.tinkoff.ru/twa/";if(!c)return void e.error("twt cdn url is not provided");const u={id:"twtScriptClient",onload:"this.setAttribute('loaded', 'true');",onerror:"this.setAttribute('loaded', 'error');",crossorigin:"anonymous"};a.integrity&&a.integrity.client&&(u.integrity=a.integrity.client);const l=document.createElement("script");l.src=`${c}${a.prefix}/client.js`;for(const e of Object.keys(u))l.setAttribute(e,u[e]);document.head.appendChild(l)}(r,o,a,n)})().catch((e=>{c.error(e,"Something wrong happened in analytics:registerScripts method")}))}},multi:!0,deps:{resourceLoader:Tn,logger:E.Fp,envManager:S.vC,requestManager:tr.G,atmContainer:(0,a.jt)(yr),ttm:(0,a.jt)(br),twtBundle:(0,a.jt)(wr),mode:(0,a.jt)(Sr)}},...Vn,...Zn]})],to);var ro=r(9056);const no=(0,a.V3)("common ExecutionContextManager"),oo=(0,a.V3)("common rootExecutionContext"),so=(0,a.V3)("common commandLineExecutionContext"),io=(0,a.V3)("createCache"),ao=(0,a.V3)("registerClearCache",{multi:!0}),co=(0,a.V3)("clearCache");var uo=r(13641),lo=r.n(uo),po=r(63119),ho=r.n(po);function fo(e,t,r){if(null==r?void 0:r.replace)return{...e,...t};const n={...e,...t,query:{...e.query,...t.query},headers:{...e.headers,...t.headers},interceptors:[...e.interceptors||[],...t.interceptors||[]]},o=r=>{e[r]&&t[r]&&(n[r]=ho()(t[r],e[r]))};return o("modifyRequest"),o("modifyResponse"),o("modifyError"),n}var mo,vo=r(17848),go=r.n(vo),yo=r(46226),bo=r.n(yo);!function(e){e.INIT="init",e.COMPLETE="complete",e.ERROR="error"}(mo||(mo={}));var wo=mo;class Eo{constructor(e){this.state={status:wo.INIT,request:null,response:null,error:null,...e},this.internalMeta={},this.externalMeta={}}getState(){return this.state}setState(e){const t=Vr()([this.state],e);t&&(this.state={...this.state,...t})}getInternalMeta(e){return this.getMeta(e,this.internalMeta)}getExternalMeta(e){return this.getMeta(e,this.externalMeta)}updateInternalMeta(e,t){this.internalMeta=this.extendMeta(e,t,this.internalMeta)}updateExternalMeta(e,t){this.externalMeta=this.extendMeta(e,t,this.externalMeta)}getStatus(){return this.state.status}getResponse(){return this.state.response}getRequest(){return this.state.request}getMeta(e,t=this.externalMeta){return e?t[e]:t}extendMeta(e,t,r=this.externalMeta){if(t)return{...r,[e]:{...r[e],...t}}}}const So={[wo.INIT]:wo.COMPLETE};var _o=r(28296),ko=r.n(_o),To=r(57801),Co=r.n(To),Ro=r(42282),xo=r.n(Ro);const Mo="log",Po=e=>{const t=e.getExternalMeta(Mo),r=Date.now(),n=r-t.start;e.updateExternalMeta(Mo,{end:r,duration:n})},Oo=e=>({debug:(...t)=>console.debug(e,...t),error:(...t)=>console.error(e,...t)}),Ao=(e,t)=>!0===t?e:Jr()(e)?!1===t?Co()((()=>"*"),e):Co()(((e,r)=>t.has(r)?e:"*"),e):"*",No="cache";var Io=No,Lo="PROTOCOL_HTTP",Do=(e,t)=>r=>{var n,o,s,i;const a=r.getRequest(),c=null!==(n=ko()("cacheForce",a))&&void 0!==n&&n,u=null!==(o=ko()(`${e}CacheForce`,a))&&void 0!==o?o:c,l=null!==(s=ko()("cache",a))&&void 0!==s?s:t,d=null!==(i=ko()(`${e}Cache`,a))&&void 0!==i?i:l;return r.getStatus()===wo.INIT&&r.updateExternalMeta(No,{forced:c,enabled:l,[`${e}Enabled`]:d,[`${e}Force`]:u}),u?r.getStatus()===wo.COMPLETE:d},jo=({httpMethod:e="GET",url:t,payload:r,query:n,rawQueryString:o="",additionalCacheKey:s=""})=>e.toLowerCase()+t+JSON.stringify(r||"")+JSON.stringify(n||"")+o+JSON.stringify(s),Fo=(e,t=jo)=>{let r=ko()("key",e.getInternalMeta(No));return r||(r=t(e.getRequest()),e.updateInternalMeta(No,{key:r})),r},Vo=({shouldExecute:e=!0,getCacheKey:t}={})=>{const r={},n=e=>{const n=e.getState(),o=Fo(e,t);if(o&&r[o]){const e=r[o];delete r[o],e.forEach((e=>{e({status:n.status,response:n.response,error:n.error})}))}};return{shouldExecute:Do("deduplicate",e),init:(e,n)=>{const o=Fo(e,t);if(r[o])return e.updateExternalMeta(Io,{deduplicated:!0}),void r[o].push(n);r[o]=[],n()},complete:(e,t)=>{n(e),t()},error:(e,t)=>{n(e),t()}}},Bo=r(77367),Uo=r.n(Bo),qo=Uo()({});const $o=e=>{const{requestTimeout:t,configTimeout:r}=e;return r||(t?2*t:void 0)},Ho=3e5;var Jo=({lruOptions:e={max:1e3,ttl:Ho},shouldExecute:t=!0,allowStale:n=!1,staleTtl:o=("ttl"in e?e.ttl:Ho),staleBackgroundRequestTimeout:s,memoryConstructor:i=(e=>new(r(56868))(e)),getCacheKey:a}={})=>{const c=i({...e,allowStale:!0});return{shouldExecute:Do("memory",t),init:(e,t,r)=>{const i=Fo(e,a);if(c.has(i)){e.updateExternalMeta(Io,{memoryCache:!0,memoryCacheOutdated:!1});const r=c.get(i);return r.status&&e.updateInternalMeta(Lo,{response:{status:r.status}}),t({status:wo.COMPLETE,response:r.response})}const u=Dn()("memoryCacheAllowStale",n,e.getRequest())&&c.peek(i);if(u){const n=e.getRequest();return e.updateExternalMeta(Io,{memoryCache:!0,memoryCacheOutdated:!0}),u.status&&e.updateInternalMeta(Lo,{response:{status:u.status}}),c.set(i,u,{ttl:o}),setTimeout((()=>r({...n,timeout:$o({requestTimeout:n.timeout,configTimeout:s}),memoryCacheForce:!0,memoryCacheBackground:!0,signal:void 0,abortPromise:void 0}).catch((()=>{}))),15),t({status:wo.COMPLETE,response:u.response})}t()},complete:(e,t)=>{var r;const n=Fo(e,a),o=ko()("memoryCacheTtl",e.getRequest()),s={response:e.getResponse()},i=e.getInternalMeta(Lo);(null===(r=null==i?void 0:i.response)||void 0===r?void 0:r.status)&&(s.status=i.response.status),c.set(n,s,{ttl:o}),e.updateExternalMeta(Io,{memoryCacheBackground:ko()("memoryCacheBackground",e.getRequest())}),t()}}},zo=r(8152),Go=r.n(zo);const Yo="validate";var Ko=r(8729),Wo=r.n(Ko),Qo=r(60694),Zo=r.n(Qo);const Xo=(e,t="")=>{const r=new URLSearchParams(t),n=(e,t=[])=>{Ht()(((e,o)=>{if(lo()(e))return;const s=t.length?[...t,o]:[o];Jr()(e)?n(e,s):r.set(Zo()(((e,t,r)=>r?`${e}[${t}]`:t),"",s),e)}),e)};return n(e),r.toString()};var es=r(94905),ts=r.n(es),rs=r(18542),ns=r.n(rs),os=r(15434),ss=r.n(os),is=r(48385),as=r.n(is);const cs="PROTOCOL_HTTP",us={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD",PATCH:"PATCH"},ls={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded","multipart/form-data":""},ds=e=>{const t=e.getInternalMeta(cs);return t&&t.response},ps=e=>{const t=(e=>ko()("headers",ds(e)))(e),r={};return t&&t.forEach(((e,t)=>{r[t]="set-cookie"===t?[]:e})),r},hs=e=>ko()("status",ds(e)),fs=e=>"ERR_HTTP_ERROR"===e.code,ms=e=>(e=>"ERR_HTTP_REQUEST_TIMEOUT"===e.code)(e)||fs(e)&&!e.status,vs=e=>fs(e)&&e.status>=500,gs="undefined"!=typeof self?self:window;class ys extends Error{constructor(){super(...arguments),this.code="ERR_HTTP_REQUEST_TIMEOUT",this.message="Request timed out"}}class bs extends Error{constructor(){super(...arguments),this.code="ABORT_ERR"}}var ws=Uo()({});const Es="retry";function Ss(e){const{logger:t,name:r,disableCache:n,enableCircuitBreaker:o,createCache:s,cacheTime:i=3e4,defaultTimeout:a,validator:c,errorValidator:u,errorModificator:l,circuitBreakerOptions:d={},getCacheKey:p,lruOptions:h={max:1e3,maxAge:i},allowStale:f=!0,agent:m,querySerializer:v,retryOptions:g,etagCacheOptions:y,interceptors:b,...w}=e,E=(t&&t(`${r}:initialization`),e=>"function"==typeof s?t=>s({name:`http-client${e?`-${e}`:""}-${r}`,...t}):void 0),S=[];S.push({init:(e,t)=>{t({request:{timeout:a,...e.getRequest()}})}}),S.push((({baseUrl:e="",transform:t=(({baseUrl:e,url:t})=>`${e}${t}`)}={})=>({init:(r,n)=>{const o=r.getRequest();n({request:{...o,url:t({...o,baseUrl:o.baseUrl||e})}})}}))({baseUrl:w.baseUrl,transform:({baseUrl:e,path:t,url:r})=>{if(r)return r;if(e&&t){const r=!("/"===e.slice(-1));return"/"===t.slice(0,1)&&(t=t.substring(1)),`${e}${r?"/":""}${t}`}return e||t||""}})),S.push((({name:e="",logger:t=Oo,showQueryFields:r=!1,showPayloadFields:n=!1})=>{const o=t(`request.${e}`),s=({url:e,query:t,payload:o,showQueryFields:s,showPayloadFields:i})=>{const a=null!=s?s:r,c=null!=i?i:n;return{url:e,query:t&&Ao(t,xo()(a)?new Set(a):a),payload:o&&Ao(o,xo()(c)?new Set(c):c)}};return{init:(e,t)=>{const r=e.getRequest(),n=Date.now();ko()("silent",r)||o.debug({event:"init",info:s(r)}),e.updateExternalMeta(Mo,{start:n}),t()},complete:(e,t)=>{Po(e);const r=e.getRequest();ko()("silent",r)||o.debug({event:"complete",info:s(r),meta:e.getExternalMeta()}),t()},error:(e,t)=>{const r=e.getRequest(),n=ko()("silent",r);Po(e),n||o.error({event:"error",info:s(r),error:e.getState().error,meta:e.getExternalMeta()}),t()}}})({logger:t,name:r,showQueryFields:!0,showPayloadFields:!0})),S.push(Jo({shouldExecute:!n,lruOptions:h,allowStale:f,getCacheKey:p,memoryConstructor:E()})),S.push(Vo({shouldExecute:!n,getCacheKey:p})),o&&S.push(ws({isSystemError:go()(vs,ms),...d})),S.push({error:(e,t)=>{const r=e.getState(),n=null==l?void 0:l(r);return n?t({error:n}):t()}}),(c||u)&&S.push((({validator:e=Go(),allowFallback:t=!0,errorValidator:r=Go()}={})=>({complete:(r,n)=>{const o=r.getState(),{request:s}=o,i=e(o);return r.updateExternalMeta(Yo,{validated:!i}),i?n({error:i,request:t?s:{...s,fallbackCache:!1},status:wo.ERROR}):n()},error:(e,t)=>{const n=e.getState(),o=r(n);return e.updateExternalMeta(Yo,{errorValidated:!!o}),o?(e.updateExternalMeta(Yo,{error:n.error}),t({error:null,status:wo.COMPLETE})):t()}}))({validator:c,errorValidator:u,allowFallback:!0})),g&&S.push((({retry:e=0,retryDelay:t=100,maxTimeout:r=6e4}={})=>({init:(e,t)=>{e.updateInternalMeta(Es,{startTime:Date.now()}),t()},error:(n,o,s)=>{var i,a;const c=n.getRequest(),u=c.timeout||r,l=null!==(i=c.retry)&&void 0!==i?i:e,d=null!==(a=c.retryDelay)&&void 0!==a?a:t,{startTime:p}=n.getInternalMeta(Es);let h=0;const f=()=>{h<l?setTimeout((()=>{const e=Date.now()-p;if(e>=u)return n.updateExternalMeta(Es,{attempts:h,timeout:!0}),o();s({...c,retry:0,timeout:u-e,silent:!0,retryDelay:void 0,cache:!1}).then((e=>(n.updateExternalMeta(Es,{attempts:h+1}),o({status:wo.COMPLETE,response:e}))),(()=>{h++,f()}))}),Vr()([h],d)):(l>0&&n.updateExternalMeta(Es,{attempts:h,timeout:!1}),o())};f()}}))(g)),(null==y?void 0:y.enabled)&&S.push(qo({shouldExecute:!n,getCacheKey:p,memoryConstructor:E("etag"),lruOptions:(null==y?void 0:y.lruOptions)||{max:1e3,ttl:6e5}})),S.push((({agent:e,querySerializer:t}={})=>({init:(e,r)=>{const{httpMethod:n=us.GET,url:o,query:s,queryNoCache:i,headers:a,type:c="form",payload:u,attaches:l=[],timeout:d,credentials:p,withCredentials:h,abortPromise:f,responseType:m,signal:v}=e.getRequest();let g=!1;const y=n.toUpperCase(),b=y===us.GET||y===us.HEAD;let w,E,S,_,k,T;if(l.length)w=((e,t=[])=>{const r=new(as()),n=(e,t)=>{if(xo()(e))return ss()((e=>n(e,t)),e);lo()(e)||r.append(t,e)};return Ht()(n,e),t.forEach((e=>{if(!(e instanceof window.Blob))return;const t=e.uploadName||e.name,n=e.fieldName||"file";r.append(n,e,encodeURIComponent(t))})),r})(u,l),E=w.getHeaders&&w.getHeaders();else{const e=Dn()(c,c,ls);E=e?{"Content-type":e}:{},b||(w=((e,t,r=Xo)=>{switch(e){case"form":case"urlencoded":case"form-data":return r(t);case"json":return JSON.stringify(t);default:return t}})(c,u,t))}if(Wo()){const t=new(Wo());_=t.signal;const n=e=>{g||(g=!0,t.abort(),r({status:wo.ERROR,error:e instanceof Error?e:Object.assign(new bs,{abortOptions:e||{}})}))};f&&f.then(n),d&&(S=setTimeout((()=>{n(new ys)}),d)),e.updateInternalMeta(cs,{requestAbort:n}),v&&(v.aborted?n():v.addEventListener("abort",(()=>{n()})))}else d&&(S=setTimeout((()=>{r({status:wo.ERROR,error:new ys}),g=!0}),d));((...e)=>gs.fetch(...e))(((e,t,r=Xo)=>{const[n,o]=e.split("?",2),s=r(t,o);return s?`${n}?${s}`:n})(o,{...b?u:{},...i,...s},t),{signal:_,method:y,headers:{...E,...a},agent:void 0,credentials:null!=p?p:h?"include":"same-origin",body:w,timeout:d}).then((t=>(k=t,e.updateInternalMeta(cs,{response:k}),k[m]?k[m]():(e=>{const t=ts()(e.headers.get("content-type")||"");return ns()("application/json",t)?e.json():ns()("application/octet-stream",t)?e.arrayBuffer():e.text()})(k)))).then((e=>{if(!g){if(T=e,!k.ok)throw new Error(k.statusText);r({status:wo.COMPLETE,response:T})}})).catch((e=>{if(!g){if(e&&"string"==typeof e.type&&/timeout/.test(e.type))return r({status:wo.ERROR,error:new ys});try{Object.assign(e,{code:"ERR_HTTP_ERROR",status:k&&k.status,body:T})}catch(t){Object.assign(e,{__response:{code:"ERR_HTTP_ERROR",status:k&&k.status,body:T}})}r({status:wo.ERROR,error:e,response:T})}})).then((()=>{g=!0,S&&clearTimeout(S)}))}}))({agent:m||void 0,querySerializer:v||void 0}));const _=function(e){const t=r=>{let n=-1;const o=e.length,s=new Eo;s.setState({request:r});const i=new Promise(((r,i)=>{const a=e=>{const t=s.getState(),n=t.status,o=So[n];return e?c(n,-1):o?(s.setState({status:o}),c(o,-1)):void(n===wo.COMPLETE?r(t.response):i(Object.assign(t.error||{},{url:t.request.url})))},c=(r,i)=>{const c=s.getState().status,u=l=>{if(s.setState(l),s.getState().status!==c)return a(!0);if(n+=i,n<0||n>=o)return a(!1);const d=e[n],p=d[r];if(!p||!Vr()([s],Dn()("shouldExecute",!0,d)))return u();try{p(s,bo()(u),t)}catch(e){return u({status:wo.ERROR,error:e})}};u()};c(wo.INIT,1)}));return Object.assign(i,{getState:s.getState.bind(s),getInternalMeta:s.getInternalMeta.bind(s),getExternalMeta:s.getExternalMeta.bind(s)})};return t}(S);return _}class _s{get(e,t,r){return this.request({path:e,...t,...r,method:"GET"})}post(e,t,r){return this.request({path:e,requestType:"json",...t,...r,method:"POST"})}put(e,t,r){return this.request({path:e,requestType:"json",...t,...r,method:"PUT"})}delete(e,t,r){return this.request({path:e,...t,...r,method:"DELETE"})}}class ks extends _s{constructor({options:e,makeRequest:t}){super(),this._processMakeRequest=async(e,{modifyRequest:t,modifyResponse:r,modifyError:n})=>{const{method:o,body:s,requestType:i,...a}=t?t(e):e;o&&(a.httpMethod=o),s&&(a.payload=s),i&&(a.type=i);const c=this.makeRequest(a);try{const e=await c,t={payload:e,status:hs(c),headers:ps(c)};return r?r(t):t}catch(e){const t=c.getExternalMeta(),r=hs(c),o=ps(c),s=Object.assign(e,{__meta:t,status:r,headers:o});throw n?n(s,a):s}},this.options=e,this.makeRequest=t}request(e){const t=fo(this.options,e),{modifyRequest:r,modifyResponse:n,modifyError:o,interceptors:s,...i}=t;let a=e=>this._processMakeRequest(e,{modifyRequest:r,modifyResponse:n,modifyError:o});return s&&Array.from(s).reverse().forEach((e=>{const t=a;a=r=>e(r,t)})),a(i)}fork(e={},t={}){return new ks({options:fo(this.options,e,t),makeRequest:this.makeRequest})}}const Ts=e=>e=>e,Cs={defaultTimeout:3e4};class Rs extends _s{constructor(e){super(),this.httpClient=e}request(e){return this.httpClient.request(e)}}const xs=(0,n.Y)({providers:[(0,i.J)({provide:ro.J2,scope:d.s.SINGLETON,useClass:class extends Rs{constructor({httpClientFactory:e,baseUrl:t}){super(e({name:"papi",baseUrl:t,validator:({response:e})=>{if(!e.resultCode||!e.payload)return e.error||new Error(JSON.stringify(e))},modifyResponse:e=>({...e,payload:ko()("payload",e.payload)})}))}},deps:{httpClientFactory:ro.FB,baseUrl:Ft}})]})(class{}),Ms=(0,a.V3)("httpClient createCache"),Ps=(0,n.Y)({imports:[xs],providers:[(0,i.J)({provide:ro.FB,useFactory:({logger:e,envManager:t,appInfo:r,requestManager:n,headersList:o,createCache:s,makeRequestRegistry:i,agent:a,querySerializer:c,disableCircuitBreaker:u=!1,defaultOptions:l,defaultInterceptors:d,commandLineExecutionContext:p})=>r=>{var n;if(!r.name)throw Error('You need to pass a unique field "name" for the HTTP client instance');const o=t.get("HTTP_CLIENT_CACHE_DISABLED"),h=t.get("HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED"),f={interceptors:d||[]},m=fo(fo({logger:e,agent:a,querySerializer:c,method:"GET",createCache:s?s.bind(null,"memory"):void 0,modifyRequest:ho()(Ts(),(e=>e)),circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10},signal:null===(n=null==p?void 0:p())||void 0===n?void 0:n.abortSignal,...Cs},l?fo(l,f):f),r);if(lo()(o)||(m.disableCache=!!o),u&&(m.enableCircuitBreaker=!1),lo()(h)||(m.enableCircuitBreaker=!h),!i.has(m.name)){const e={...m};delete e.signal,i.set(m.name,Ss(e))}const v=i.get(m.name);return new ks({options:m,makeRequest:v})},deps:{logger:E.Fp,envManager:S.vC,appInfo:l.Qo,createCache:Ms,makeRequestRegistry:"makeRequestRegistry",requestManager:{token:tr.G,optional:!0},headersList:{token:ro.s,optional:!0},agent:{token:ro.zn,optional:!0},disableCircuitBreaker:{token:ro.pW,optional:!0},defaultOptions:{token:ro.FF,optional:!0},defaultInterceptors:{token:ro.Z0,optional:!0},commandLineExecutionContext:{token:so,optional:!0}}}),(0,i.J)({provide:ro.bV,useFactory:({factory:e})=>e({name:"http-client",enableCircuitBreaker:!1}),deps:{factory:ro.FB}}),(0,i.J)({provide:S.sQ,useValue:[{key:"HTTP_CLIENT_CACHE_DISABLED",optional:!0,dehydrate:!1},{key:"HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED",optional:!0,dehydrate:!1}]}),(0,i.J)({provide:"makeRequestRegistry",scope:d.s.SINGLETON,useFactory:()=>new Map}),(0,i.J)({provide:Ms,scope:d.s.SINGLETON,useFactory:({createCache:e})=>e,deps:{createCache:io}}),(0,i.J)({provide:ro.s,useValue:["x-request-id"]})]})(class{});class Os extends Rs{constructor({httpClient:e}){super(e)}async getResources(e,t={}){const{query:r={}}=t,{payload:n}=await this.request({...t,path:"resources",query:{...r,name:e}});return n||{}}}class As extends Rs{constructor({httpClient:e}){super(e),this.pagesIntegrationApi="pages/api/integration/v1"}buildJsonRpcParams(e,t){return{path:`${this.pagesIntegrationApi}/${e}`,method:"POST",requestType:"json",body:{method:e,params:t,id:"null",jsonrpc:"2.0"}}}getRoutesByDomainAndAppId(e){return this.request(this.buildJsonRpcParams("getRoutesByDomainAndAppId",e))}}class Ns{constructor({httpClient:e}){this.httpClient=e}getResponse(e,t){return this.httpClient.request({...t,path:`${Ns.pageEnrichmentApi}/getResponse`,query:{...null==t?void 0:t.query,...e}})}getPreview(e,t){return this.httpClient.request({...t,path:`${Ns.pageEnrichmentApi}/getPreview`,query:{...null==t?void 0:t.query,...e}})}}Ns.pageEnrichmentApi="web-gateway";var Is=r(60028),Ls=r.n(Is);const Ds={cacheTime:6e5,defaultTimeout:3e4},js=e=>({...e,payload:e.payload.response||e.payload.result||Ls()(["error","message"],e.payload)}),Fs=e=>({...e,payload:Dn()("value",{},js(e).payload)}),Vs=({request:e})=>{var t,r;return null!==(r=null===(t=e.path)||void 0===t?void 0:t.split("/")[0])&&void 0!==r?r:""},Bs=(0,n.Y)({providers:[(0,i.J)({provide:S.sQ,scope:d.s.SINGLETON,useFactory:({dehydrateConfigApi:e,dehydrateResourcesApi:t})=>[{key:"CONFIG_API",validator:g([m,v("/")]),dehydrate:null===e||e},{key:"RESOURCES_API",validator:g([m,v("/")]),dehydrate:null===t||t},{key:"INTEGRATION_CONFIG_API",dehydrate:!1,validator:g([m,v("/")])}],deps:{dehydrateConfigApi:{token:"dehydrateConfigApi",optional:!0},dehydrateResourcesApi:{token:"dehydrateResourcesApi",optional:!0}},multi:!0}),(0,i.J)({provide:kn,useFactory:({factory:e,envManager:t})=>e({baseUrl:t.get("CONFIG_API"),circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0,getKey:Vs}}),deps:{factory:xn,envManager:S.vC}}),(0,i.J)({provide:Tn,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-resources-api",baseUrl:t.get("RESOURCES_API"),modifyResponse:Fs});return new Os({httpClient:r})},deps:{factory:xn,envManager:S.vC}}),(0,i.J)({provide:Rn,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-integration-api",baseUrl:t.get("INTEGRATION_CONFIG_API")});return new As({httpClient:r})},deps:{factory:xn,envManager:S.vC}}),(0,i.J)({provide:xn,useFactory:({factory:e,optionsFactory:t})=>r=>e({...t(r),...r}),deps:{factory:ro.FB,optionsFactory:Mn}}),(0,i.J)({provide:Mn,useValue:e=>({...Ds,name:"admin-api",validator:({request:e,response:t})=>{if(!t||!t.response&&!t.result)return Jr()(t)?Object.assign(new Error,Jr()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorValidator:({request:e,response:t,error:r})=>(404===r.status||400===r.status)&&!(!t||!t.error),errorModificator:({error:e})=>Object.assign(e,{errorId:"CONFIG_REQUEST_ERROR"}),modifyResponse:js,enableCircuitBreaker:!0,circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0}})}),{provide:Cn,useFactory:({httpClient:e})=>new Ns({httpClient:e}),deps:{httpClient:{token:kn,optional:!0}}}]})(class{}),Us=(0,a.V3)("hooks"),qs=(0,a.V3)("authenticator"),$s=(0,a.V3)("sessionManager"),Hs=(0,a.V3)("sessionCookieName"),Js=(0,a.V3)("sessionLifetimeController"),zs=(0,a.V3)("authStrategies",{multi:!0}),Gs=(0,a.V3)("authenticatorTimingCallbacks"),Ys=(0,a.V3)("logoutRedirectUrl"),Ks=(0,a.V3)("onResolveAuthenticate"),Ws=(0,a.V3)("onAccessDeniedRedirectToken"),Qs=(0,a.V3)("accessDeniedRedirectUrl"),Zs=(0,a.V3)("onHasAccessToken"),Xs=(0,a.V3)("onLogoutRedirectToken"),ei=(0,a.V3)("onRouteGuardRedirectToken"),ti=(0,a.V3)("isClientAuthenticationToken");var ri=r(67826),ni=r.n(ri);const oi=ni()(["resultCode"],"SESSION_IS_ABSENT"),si=ni()(["resultCode"],"INSUFFICIENT_PRIVILEGES");var ii=r(84762),ai=r.n(ii),ci=r(77125),ui=r.n(ci);const li={expired:oi,notAllowed:si,confirmation:ai()([ni()(["resultCode"],"WAITING_CONFIRMATION"),ui()("confirmations"),ui()("confirmationData")])},di=ni()(["resultCode"],"OK"),pi={defaultTimeout:6e4},hi=e=>({...e,payload:e.payload.payload});var fi=r(64805),mi=r.n(fi),vi=r(23629),gi=r.n(vi);class yi extends Rs{constructor({httpClient:e,context:t,hooks:r,apiOriginService:n,cookieManager:o,wuid:s,sessionCookieName:i}){super(e),this.context=t,this.hooks=r,this.customizeParams=ho()((e=>e),(e=>t=>{const r=e.getWhen({requestOrigin:t.origin});return{...t,query:{origin:r,...t.query}}})(n),(({cookieManager:e,sessionCookieName:t})=>r=>r.withoutSession?r:{...r,query:{sessionid:e.get(t||"psid"),...r.query}})({cookieManager:o,sessionCookieName:i}),(e=>t=>t.withoutSession||t.withoutWuid?t:{...t,query:{wuid:e,...t.query}})(s))}request(e){const{path:t,confirmHide:r,confirmSSR:n=!1,confirmViewType:o=null,onConfirm:s=mi()}=e;return this.httpClient.request(this.customizeParams(e)).then((e=>li.confirmation(e.payload)?this.hooks.runPromiseHooks("confirm",this.context)({viewType:o,onConfirmShowed:s,confirmHide:r,confirmSSR:n,data:e.payload}).then(gi()("payload")):e)).catch((r=>{switch(!0){case"session_status"!==t&&li.expired(r.response):return this.hooks.runPromiseHooks("sessionAbsent",this.context)({sessionExpired:!0,useCache:!1});case li.notAllowed(r.response):return this.hooks.runPromiseHooks("notAllowed",this.context)(void 0).then((()=>{throw new Error("Not Allowed")}));default:return this.hooks.runPromiseHooks("unknown",this.context,e)(r).then((()=>{throw r}))}}))}}const bi=e=>ko()("tinkoffApiOrigin",e)||Ls()(["properties","tinkoffApiOrigin"],e),wi=ho()(bi,Ls()(["currentRoute","config"]),("router",e=>e.getState().router));class Ei{constructor({context:e,defaultOrigin:t,decorators:r}){this.getRawOrigin=e=>wi(this.context)||e||this.defaultOrigin,this.getOrigin=e=>{const t=this.getRawOrigin(e);return this.decorators.reduce(((e,t)=>t(e)),t)},this.context=e,this.defaultOrigin=t,this.decorators=null!=r?r:[]}get(){return this.getOrigin()}getWhen({requestOrigin:e}){return this.getOrigin(e)}}const Si=(0,n.Y)({providers:[(0,i.J)({provide:S.sQ,useValue:[{key:"TINKOFF_API",validator:g([m,v("/")])}],multi:!0}),(0,i.J)({provide:"defaultOrigin",useValue:"web,ib5,platform"}),(0,i.J)({provide:Nn,useFactory:({context:e,defaultOrigin:t,decorators:r})=>new Ei({context:e,defaultOrigin:t,decorators:r}),deps:{context:dr,defaultOrigin:"defaultOrigin",decorators:{optional:!0,token:In}}}),(0,i.J)({provide:Pn,useFactory:({factory:e,envManager:t,appInfo:r,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})=>{const u=e({name:"tinkoff-api",baseUrl:t.get("TINKOFF_API"),disableCache:!0,query:{appName:r.appName,appVersion:t.get("APP_VERSION")},modifyResponse:e=>li.confirmation(e.payload)?e:{...e,payload:e.payload.payload}},{isResponseValid:e=>di(e)||li.confirmation(e)});return new yi({httpClient:u,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})},deps:{factory:On,envManager:S.vC,appInfo:l.Qo,hooks:Us,requestManager:tr.G,context:dr,apiOriginService:Nn,cookieManager:er.T,wuid:_.$,sessionCookieName:{token:Hs,optional:!0},headersList:{token:ro.s,optional:!0}}}),(0,i.J)({provide:On,useFactory:({factory:e,optionsFactory:t})=>(r,n)=>e({...t(r,n),...r}),deps:{factory:ro.FB,optionsFactory:An}}),(0,i.J)({provide:An,useValue:({modifyResponse:e=hi,disableCache:t},{isResponseValid:r=di}={})=>({name:"common-api",validator:({request:e,response:t})=>{if(!r(t))return Jr()(t)?Object.assign(new Error,Jr()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorModificator:({error:e})=>Object.assign(e,{errorId:"COMMON_API_REQUEST_ERROR"}),modifyRequest:e=>{const{query:r={},method:n="GET",serverGetSession:o=!1,roles:s,...i}=e,a={method:n,...i,query:r,additionalCacheKey:r.sessionid+JSON.stringify(s)};if(!t){const{cache:e="POST"!==n,cacheForce:t}=a,r=!0;a.cache=r&&e,a.cacheForce=r&&t}return a},modifyResponse:e,enableCircuitBreaker:!0,...pi})}),(0,i.J)({provide:In,multi:!0,useFactory:({context:e})=>t=>{var r,n;if(!(null===(n=null===(r=e.getState())||void 0===r?void 0:r.session)||void 0===n?void 0:n.isJunior))return t;const o=t.split(",");return o.push("junior"),o.filter(Boolean).join(",")},deps:{context:dr}})]})(class{}),_i=(0,n.Y)({imports:[ir],providers:[{provide:ro.s,multi:!0,useValue:["x-b3-traceid","x-b3-spanid","x-b3-parentspanid","x-b3-sampled","x-b3-flags","x-ot-span-context"]}]})(class{}),ki=(0,n.Y)({imports:[],providers:[(0,i.J)({provide:ro.FF,scope:d.s.SINGLETON,useValue:{modifyError:e=>{if(e.originalMessage)return e;const t=e.message,r=(e=>!0===(/network timeout at/i.test(e)||/request timed out/i.test(e))?" .     .":"-   .    .     .")(t);return Object.assign(e,{message:r,originalMessage:t})}}})]})(class{}),Ti=(0,n.Y)({imports:[ir,_i,Ps,ki,Bs,Si],providers:[]})(class{});let Ci=class{};Ci=(0,Kt.__decorate)([(0,n.Y)({providers:[]})],Ci);var Ri=r(17173),xi=r(60488);const Mi=(0,a.V3)("reactQuery queryClient");var Pi=r(8479);const Oi=(0,a.V3)("actionRegistry"),Ai=(0,a.V3)("actionExecution"),Ni=(0,a.V3)("actionPageRunner"),Ii=(0,a.V3)("actionConditionals",{multi:!0}),Li=(0,a.V3)("limitActionGlobalTimeRun"),Di=(0,a.V3)("tramvai deferred actions map");var ji=r(33057),Fi=r.n(ji),Vi=r(67744),Bi=r.n(Vi),Ui=r(62491),qi=r.n(Ui),$i=r(56257),Hi=r.n($i),Ji=r(7605),zi=r.n(Ji),Gi=r(68989),Yi=r.n(Gi),Ki=r(55500),Wi=r.n(Ki);const Qi=ho()(qi()((e=>!!e)),Hi()(","),Fi()(["config","requiredRoles"],"")),Zi=Fi()(["config","accessLevel"],0),Xi=Fi()(["config","authenticateFailureRedirectUrl"],""),ea=Fi()(["config","failureRedirectWithQueryParams"],!1);function ta(e,t=[]){const r=Wi()(e);return $r()((t=>$r()((r=>{var n;return!!(null===(n=e[r])||void 0===n?void 0:n[t])}),r)),t)}function ra(e,t){return 0===function(e,t){const r=[];return e===t||zi()(Yi()(Wi()(e),Wi()(t))).forEach((n=>{const o=Dn()(n,{},e),s=Dn()(n,{},t);zi()(Yi()(Wi()(o),Wi()(s))).forEach((e=>{(null==o?void 0:o[e])!==(null==s?void 0:s[e])&&r.push(e)}))})),r}(e,t).length}var na=r(96105),oa=r.n(na),sa=r(6073),ia=r.n(sa),aa=r(31565);const ca="DYNAMIC",ua=Dn()(ca,{}),la=e=>oa()(Boolean,ua(e));var da=r(14033);r.n(da)()(/^(?:[a-z]+:)?\/\//i);const pa=e=>{const t=Object.create(null);e.searchParams.forEach(((e,r)=>{Object.prototype.hasOwnProperty.call(t,r)?Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]:t[r]=e}));const r=e.toString(),n=(e=>e.pathname+e.search+e.hash)(e),o={href:n,origin:e.origin,protocol:e.protocol,username:e.username,password:e.password,port:e.port,pathname:e.pathname,path:n,search:e.search,hash:e.hash,query:t};return"localhost"!==e.host&&Object.assign(o,{href:e.href,host:e.host,hostname:e.hostname}),Object.defineProperty(o,"toString",{value:()=>r,enumerable:!1}),o},ha=(e,t=(()=>window.location.href)())=>new URL((e=>{if(e.length<2)return!1;for(let t=0;t<e.length;t++)switch(e[t]){case"?":return!0;case"/":break;default:return!1}return!0})(e)?e.replace(/^\/+/,"/"):e,t),fa=e=>pa(ha(e)),ma=/^(\/[^?\s]*)(\?[^\s]*)?(#[^s]*)?$/,va=(e,t)=>{Ht()(((t,r)=>{Array.isArray(t)?(e.delete(r),ss()((t=>e.append(r,t)),t)):void 0===t?e.delete(r):e.set(r,t)}),t)},ga=(e,t)=>{const r=ha(e.toString());return va(r.searchParams,t),pa(r)},ya=(e,t)=>{const r=Qi(e),n=(0,Un.mm)(Zi(e));return r.length?!ta(t,r):((e,t)=>{const r=la(e),n=la(t);return!(r||!n)||!(r&&!n)&&(0,Un.lw)(e,t)})(t,n)},ba=({route:e,url:t,roles:r,redirectType:n="",accessDeniedRedirectUrl:o})=>{const s=null==o?void 0:o();if(s)return s;if((0,Un.QO)(r))return"/mybank/";const{path:i,query:a}=t;if(Bi()("/login/",t.pathname))return;const c=ea(e),u=Xi(e);return u?ga(u,c?a:{}).path:ga("/login/",{redirectTo:i,redirectType:Fi()(["config","loginRedirectType"],n,e)}).path};var wa=r(5881),Ea=r.n(wa),Sa=r(30353),_a=r.n(Sa);class ka{constructor({strategies:e=[],timingCallbacks:t}){this.isAuthenticateFinishedPromise=null,this.isAuthenticateFinishedPromiseResolve=null,this.strategies=e,this.timingCallbacks=t}async authenticate(){var e,t,r,n,o,s,i,a,c,u,l;null===(t=null===(e=this.timingCallbacks)||void 0===e?void 0:e.onAuthStart)||void 0===t||t.call(e),this.isAuthenticateFinishedPromise=new Promise((e=>{this.isAuthenticateFinishedPromiseResolve=e}));for(let e=0,t=this.strategies.length;e<t;++e){const t=this.strategies[e],u=null!==(r=t.name)&&void 0!==r?r:`unknown:${e}`;null===(o=null===(n=this.timingCallbacks)||void 0===n?void 0:n.onAuthStrategyStart)||void 0===o||o.call(n,u);const{status:l,payload:d}=await this.authenticateBy(t);if(null===(i=null===(s=this.timingCallbacks)||void 0===s?void 0:s.onAuthStrategyResolved)||void 0===i||i.call(s,u,"success"===l),"success"===l)return null===(c=null===(a=this.timingCallbacks)||void 0===a?void 0:a.onAuthResolved)||void 0===c||c.call(a,!0),this.isAuthenticateFinishedPromiseResolve(),d}null===(l=null===(u=this.timingCallbacks)||void 0===u?void 0:u.onAuthResolved)||void 0===l||l.call(u,!1),this.isAuthenticateFinishedPromiseResolve()}async authenticateBy(e){return new Promise((t=>{const r={pass:()=>t({status:"pass"}),success:e=>t({status:"success",payload:e})};e.authenticate(r)}))}}class Ta{constructor({sessionManager:e}){this.sessionManager=e}authenticate({success:e,pass:t}){this.sessionManager.authenticate().then(e).catch(t)}get name(){return"SessionStrategy"}}class Ca extends ka{constructor({strategies:e,sessionManager:t,timingCallbacks:r}){super({strategies:e,timingCallbacks:r}),this.prolongateSession=async e=>this.sessionManager.prolongateSession(e),this.sessionManager=t,this.authenticateDeferred=(()=>{let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}})()}async logout(){return this.sessionManager.logout()}async runAuthenticateFlow(){return this.sessionManager.runAuthenticateFlow()}}const Ra="module:authenticate:auth",xa="AUTH_JUNIOR_MOCK_ENABLED",Ma=[{provide:O.Ym,useValue:Rt,multi:!0},{provide:O.Ym,useValue:Hn,multi:!0},{provide:Mt.sU,multi:!0,useFactory:({store:e,authenticateDeferred:t,onRouteGuardRedirect:r,accessDeniedRedirectUrl:n})=>async({to:o,url:s})=>{await t.promise;const{requested:i}=e.getState(Rt),a=e.getState(Hn);if(i&&ya(o,a)){const e=ba({route:o,url:s,roles:a,accessDeniedRedirectUrl:n});return r&&await r(e),e}},deps:{store:O.kR,authenticator:qs,authenticateDeferred:"authenticateDeferred",onRouteGuardRedirect:(0,a.jt)(ei),accessDeniedRedirectUrl:(0,a.jt)(Qs)}},{provide:Ii,useFactory:({context:e})=>({key:"auth",fn:t=>{const{requiredCoreRoles:r,requiredRoles:n=r}=t.conditions;if(n){const r=e.getState(Hn),o=e.getState(Rt);if(!ta(r,n))return t.forbid();const s=(({guid:e,accessLevel:t,campaign:r})=>{const n={guid:e,accessLevel:t};return r&&(n.campaignId=r.id),n})(o);Ea()(t.getState(),s)||(t.allow(),t.setState(s))}}}),multi:!0,deps:{context:dr}},{provide:qs,useFactory:function({strategies:e,sessionManager:t,timingCallbacks:r}){const n=_a()(e||[]);return new Ca({sessionManager:t,strategies:n.concat(new Ta({sessionManager:t})),timingCallbacks:r})},deps:{sessionManager:$s,strategies:{token:zs,optional:!0},timingCallbacks:{token:Gs,optional:!0}}},{provide:S.sQ,multi:!0,useValue:[{key:xa,optional:!0}]}];var Pa=r(92877),Oa=r.n(Pa),Aa=r(20596),Na=r.n(Aa),Ia=r(21461),La=r.n(Ia),Da=r(72446),ja=r.n(Da);const Fa={sessionId:void 0,sessionWillExpireIn:0,accessLevel:"ANONYMOUS",millisLeft:0,userId:null,requested:!1},Va={session:Fa};class Ba{constructor({apiClient:e,dispatcher:t,cookie:r,initialState:n,sessionCookieName:o}){this.state=Va,this.sessionRequestPromiseResolve=null,this.sessionRequestPromise=null,this.dispatcher=t,this.apiClient=e,this.cookie=r,this.sessionCookieName=o,n&&this.setState(n),this.setSessionRequestPromise()}async updateSessionStatus(e){return this.fetchOrCreateSession(e).then(ja()((e=>this.saveAndDispatchSession(e))))}getSessionId(){return this.getSessionIdFromCookie()}async authenticate(){return this.isAuthenticated()?(this.resolveSessionRequestPromise(),Promise.resolve()):this.runAuthenticateFlow()}async logout(){return this.resetSessionOnServer().then(this.resetSessionOnClient.bind(this)).then(this.noSessionAuthFlow.bind(this))}async fetchSessionId(){return this.getSessionRequestPromise()}async replaceWithNewSession(){return this.resetSessionOnServer().then(this.noSessionAuthFlow.bind(this))}async prolongateSession(e){return this.pingSession(e).then(this.updateSessionStatus.bind(this)).catch(mi())}async runAuthenticateFlow(){const e=this.getSessionIdFromCookie();return e?this.hasSessionAuthFlow(e):this.noSessionAuthFlow()}async noSessionAuthFlow(){return this.createSession().then(this.saveAndDispatchSession.bind(this))}async hasSessionAuthFlow(e){return this.updateSessionStatus(e)}async fetchOrCreateSession(e){return e?(this.setSessionRequestPromise(),this.fetchSessionStatus(e).catch((e=>{const t=Ls()(["response","errorMessage"],e);if(t&&La()("Session is absent",t))return this.createSession();throw e}))):this.createSession()}async createSession(){return this.setSessionRequestPromise(),this.apiClient.request({path:"session",cache:!1,withoutSession:!0}).then((({payload:e})=>e)).then(this.fetchSessionStatus.bind(this)).catch((e=>Fa))}async saveSession({sessionId:e,millisLeft:t,accessLevel:r="ANONYMOUS",userId:n,...o}=Fa){const s=(new Date).getTime()+t;this.setSessionIdToCookie(e,t);const i={...o,accessLevel:r,sessionId:e,sessionWillExpireIn:s,userId:n,requested:!0};return this.setState({session:i}),i}async resetSessionOnClient(){return this.saveAndDispatchSession(Fa)}async resetSessionOnServer(){return this.setSessionRequestPromise(),this.apiClient.request({path:"sign_out",cache:!1,query:{sessionid:this.getSessionId()}}).then((({payload:e})=>e))}async dispatchStatusChanged(){return this.dispatcher({action:"STATUS_CHANGED",payload:this.getState()})}async saveAndDispatchSession(e){return Promise.resolve().then((()=>this.saveSession(e))).then(this.dispatchStatusChanged.bind(this)).finally((()=>this.resolveSessionRequestPromise()))}async pingSession(e){return this.setSessionRequestPromise(),this.apiClient.request({path:"ping",cache:!1,silent:!0,query:{sessionid:e}}).then((()=>e))}isAuthenticated(){const{session:{sessionWillExpireIn:e}}=this.getState();return Na()(e)&&e>Date.now()}getSessionCookieName(){return this.sessionCookieName||"psid"}getSessionIdFromCookie(){return this.cookie.get(this.getSessionCookieName())}getSessionCookiePath(e){}setSessionIdToCookie(e,t){const r={expires:t/1e3,name:this.getSessionCookieName(),value:e},n=this.getSessionCookiePath(e);n&&(r.path=n),this.cookie.set(r)}async fetchSessionStatus(e){return this.apiClient.request({path:"session_status",cache:!1,silent:!0,query:{sessionid:e}}).then((({payload:t})=>({sessionId:e,...t})))}setSessionRequestPromise(){this.sessionRequestPromise||(this.sessionRequestPromise=new Promise((e=>{this.sessionRequestPromiseResolve=e})))}resolveSessionRequestPromise(){var e;null===(e=this.sessionRequestPromiseResolve)||void 0===e||e.call(this,this.getSessionId()),this.sessionRequestPromise=null,this.sessionRequestPromiseResolve=null}getSessionRequestPromise(){return this.sessionRequestPromise||Promise.resolve(this.getSessionId())}getState(){return this.state}setState(e){this.state={...this.getState(),...e}}}class Ua extends Ba{async fetchSessionStatus(e){const t=(r=3)=>super.fetchSessionStatus(e).catch((e=>{if((Oa()(e)||!e.errorId)&&r>0)return new Promise((e=>setTimeout(e,500))).then((()=>t(r-1)));throw e}));return t()}getSessionCookiePath(e){if(!e)return;const t=this.cookie.get("context_psid");if(t)try{if(t.slice(0,8)!==e.slice(0,8))return;return window.atob(t.slice(8))}catch(e){return}}}const qa=(0,kt.y)("AUTH_STATE_CHANGED");function $a({apiClient:e,pubsub:t,cookie:r,env:n,context:o,initialState:s,sessionCookieName:i}){return new Ua({initialState:s,apiClient:e,cookie:r,dispatcher:function({payload:e}){const s=o.getStore("session").getState(),i=function(e){if(!n.get(xa))return e;if(!e.hasSsoSession)return e;const t=r.get("auth:junior:mock");return void 0===t?e:{...e,isJunior:"false"!==t}}(function(e){const{sessionId:t,...r}=e.session,{accessLevel:n,guid:s}=o.getStore("session").getState();return Object.assign(r,{guid:n===r.accessLevel?s:(new Date).getTime()})}(e)),a=o.getStore("roles").getState(),c=((e,t)=>{var r;const n=null===(r=t.campaign)||void 0===r?void 0:r.id;return n?((e,t)=>{const r=(0,aa.ac)(e,Un.$d,(0,aa.n5)(Un.t1)),n={[`${Un.t1.CLIENT}_${t}`]:!0},o=ua(e);return ia()(((e,t)=>e===o[t]),n)?r:{...r,[ca]:n}})(e,n):(0,Un.kV)((0,aa.Mr)(e,ca),t.accessLevel)})(a,i);return Promise.all([o.dispatch(Ct(i)),o.dispatch(qn(c))]).then((()=>(ra(a,c)&&s.hasSsoSession===e.session.hasSsoSession||o.dispatch(qa({session:s,newSession:i,roles:a,newRoles:c})),t.publish(Ra,{currentSession:s,...e,roles:a,newRoles:c}))))},sessionCookieName:i})}const Ha=({authenticator:e,sessionLifetimeController:t,pubsub:r,context:n,pageService:o,logger:s,customRedirectUrl:i,queryClient:a,authenticateDeferred:c,onResolveAuthenticate:u,onAccessDeniedRedirect:l,onLogoutRedirect:d,onHasAccess:p,accessDeniedRedirectUrl:h,isClientAuth:f})=>{const m=e=>{e&&t.startProlongateSessionOnUserActivity(),(0,xi.FO)(e)&&t.startPollingAuthorizedSessionStatus()};return r.subscribe(Ra,(async e=>{m(e.session),a&&(async(e,t)=>{await e.refetchQueries({predicate:({options:e})=>{var r;const n=null===(r=e.tramvaiOptions)||void 0===r?void 0:r.conditions;if(!(null==n?void 0:n.requiredRoles)&&!(null==n?void 0:n.requiredCoreRoles))return!1;const{roles:o,newRoles:s}=t;return!ra(o,s)}})})(a,e);const t=await(async({customRedirectUrl:e,pageService:t,logger:r,payload:n,context:o,onLogoutRedirect:s})=>{var i;const a=r("auth:pubsub"),{roles:c,newRoles:u,session:l}=n,d=(0,Un.QO)(c)&&!(0,Un.QO)(u)||la(c)&&!la(u);if(d){const r=!l.sessionId,n=!!l.sessionId,d=(({customRedirectUrl:e,pageService:t,sessionExpired:r,context:n})=>{var o,s,i;const a=t.getConfig()||{},{pageComponent:c}=a,u=t.getComponent(c),l=r?"sessionExpired":"himselfLogout";return(null==e?void 0:e())||(null===(o=null==a?void 0:a.redirects)||void 0===o?void 0:o[l])||(null===(i=null===(s=null==u?void 0:u.redirects)||void 0===s?void 0:s[l])||void 0===i?void 0:i.call(s,n,{sessionExpired:r}))})({customRedirectUrl:e,pageService:t,sessionExpired:n,context:o});let p,h=d;if(!d){const e={config:t.getConfig()||{}},o=!ya(e,c)&&ya(e,u);if(r&&o)h="/";else if(o){const e=n?"sessionExpired":"";h=ba({route:t.getCurrentRoute(),url:t.getCurrentUrl(),roles:u,redirectType:e})}else h="./",p=null===(i=t.getCurrentUrl())||void 0===i?void 0:i.query}a.debug(`force redirect to ${h} after ${r?"user logout":"session expired"}`),s&&await s(h),await t.navigate({url:h,query:p})}return d})({customRedirectUrl:i,pageService:o,payload:e,logger:s,context:n,onLogoutRedirect:d});t||await(async({pageService:e,logger:t,payload:r,onAccessDeniedRedirect:n,accessDeniedRedirectUrl:o})=>{const s=t("auth:access"),i=e.getCurrentRoute(),a=e.getCurrentUrl(),{newRoles:c}=r;if(ya(i,c)){s.debug({event:"page-access-denied"});const t=ba({route:i,url:a,roles:c,accessDeniedRedirectUrl:o});return n&&await n(t),e.navigate({url:t,replace:!0}),!0}return!1})({logger:s,pageService:o,payload:e,onAccessDeniedRedirect:l,accessDeniedRedirectUrl:h})})),function(){return e.authenticate().then((()=>{const e=n.getStore(Rt).getState(),t=n.getStore(Hn).getState();!function({route:e,logger:t,roles:r,onHasAccess:n}){const o=t("auth:check-has-access");!ya(e,r)&&(o.debug({event:"has-access"}),null==n||n())}({route:o.getCurrentRoute(),logger:s,onHasAccess:p,roles:t}),m(e)})).finally((()=>{f()&&c.resolve(),u.resolve()}))}},Ja=()=>{let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},za={authenticator:qs,sessionLifetimeController:Js,pubsub:Ri.k3,context:dr,pageService:Mt.Y9,logger:E.Fp,customRedirectUrl:{token:Ys,optional:!0},queryClient:(0,a.jt)(Mi),authenticateDeferred:"authenticateDeferred",onResolveAuthenticate:Ks,onAccessDeniedRedirect:(0,a.jt)(Ws),onHasAccess:(0,a.jt)(Zs),onLogoutRedirect:(0,a.jt)(Xs),accessDeniedRedirectUrl:(0,a.jt)(Qs),isClientAuth:ti};let Ga=class{};Ga=(0,Kt.__decorate)([(0,n.Y)({imports:[ir],providers:[...Ma,{provide:$s,useFactory:({apiClient:e,pubsub:t,cookie:r,env:n,context:o,sessionCookieName:s})=>$a({apiClient:e,pubsub:t,env:n,cookie:r,context:o,sessionCookieName:s,initialState:{session:o.getStore("session").getState()}}),deps:{cookie:er.T,env:S.vC,apiClient:Pn,pubsub:Ri.k3,context:dr,sessionCookieName:{token:Hs,optional:!0}}},{provide:Js,useClass:xi.ZP,deps:{sessionManager:$s}},(0,i.J)({provide:ti,useFactory:({envManager:e,renderModeFactory:t})=>()=>{const r="function"==typeof t?t():t;return"true"===e.get("TRAMVAI_FORCE_CLIENT_SIDE_RENDERING")||"client"===r},deps:{envManager:S.vC,renderModeFactory:Pi.Ky}}),(0,i.J)({provide:P.customerStart,useFactory:e=>e.isClientAuth()?Ha(e):mi(),deps:za,multi:!0}),(0,i.J)({provide:P.generatePage,useFactory:e=>e.isClientAuth()?mi():Ha(e),deps:za,multi:!0}),{provide:"authenticateDeferred",useFactory:({isClientAuth:e})=>{const t=Ja();return e()||t.resolve(),t},deps:{isClientAuth:ti}},{provide:Ks,useValue:Ja()}]})],Ga);const Ya=(0,a.V3)("RETRY_HOSTNAME_MAP"),Ka=(0,a.V3)("GET_RETRY_URL");var Wa=r(21159),Qa=r.n(Wa),Za=r(91401),Xa=r(147),ec=r.n(Xa),tc=r(99454),rc=r.n(tc);const nc=[(0,i.J)({provide:Ya,useFactory:({envManager:e})=>{const t={"www.cdn-tinkoff.ru":"fallback.cdn-tinkoff.ru/www","acdn.tinkoff.ru":"fallback.cdn-tinkoff.ru/acdn","cdn.tbank.ru":"fallback.cdn-tinkoff.ru/acdn","unic-cdn-prod.cdn-tinkoff.ru":"fallback.cdn-tinkoff.ru/unic-cdn-prod"},r=e.get("RETRY_HOSTNAME_MAP"),n=e=>e.endsWith("/")?e.slice(0,-1):e;return void 0!==r?rc()(t,ec()(r.split(",").map((e=>e.split("="))).map((e=>e.map(n))))):t},deps:{envManager:S.vC}}),(0,i.J)({provide:Ka,useFactory:({retryMap:e})=>t=>function(e,t){for(const r in t)if(0===e.split("//")[1].indexOf(r))return e.replace(r,t[r]);return e}(t,e),deps:{retryMap:Ya}}),(0,i.J)({provide:S.sQ,multi:!0,useValue:[{key:"RETRY_HOSTNAME_MAP",optional:!0}]})],oc=o({name:"TinkoffRetryModuleDefaults",providers:[...nc]});var sc=r(89938),ic=r(83958),ac=r.n(ic);const cc=e=>!e||e.length<=0?{}:e.reduce(((e,{type:t,component:r})=>(e[t]=r,e)),{}),uc=["flex","fragment","screen"];class lc{constructor({fallbackMapping:e,customMapping:t,baseMappingExtensions:r,boxyLazy:n,overwritingMappingExtension:o,refreshMappings:s,boxyBaseUrl:i,urlRewrite:a}){this.map={},this.fallbackMapping=cc(e),this.customMapping=cc(t),this.baseMappingExtensions=r,this.boxyLazy=n||void 0,this.overwritingMappingExtension=o,this.refreshMappings=s,this.boxyBaseUrl=i&&(i.endsWith("/")?i:`${i}/`),this.urlRewrite=a}getBaseMappingExtension(){if(this.baseMappingExtensions)return function(...e){const t={};for(const r of e)for(const e of Object.keys(r))t[e]=t[e]?Object.assign(t[e],r[e]):r[e];return t}(...function(e){const t=[];for(let r of e)if("function"==typeof r&&(r=r()),Array.isArray(r))for(const e of r)t.push(e);else t.push(r);return t}(this.baseMappingExtensions))}registerMap(e){this.map=e}registerTree(e){this.tree=e}getTree(){return this.tree}async transformTree(){return this.internalTransformTree()}async internalTransformTree(e=!1){const{tree:t}=this,r=this.getBaseMappingExtension();let n=!1;if(!t)return t;const o=(0,sc.mapTree)(t,(e=>{var t,o,s,i,a,c,u,l,d,p;const h=null===(t=null==r?void 0:r[e.type])||void 0===t?void 0:t[e.version],f=this.fallbackMapping[e.type],m=null!==(i=null!==(o=null==h?void 0:h.lazy)&&void 0!==o?o:null===(s=e.render)||void 0===s?void 0:s.lazy)&&void 0!==i?i:null===(a=this.boxyLazy)||void 0===a?void 0:a.lazy,v=null===(u=null===(c=this.overwritingMappingExtension)||void 0===c?void 0:c[e.type])||void 0===u?void 0:u[e.version];if(!(f||h||v||e.render||-1!==uc.indexOf(e.type)))return void 0!==e.type&&(n=!0),e;let g;if((null===(l=this.boxyLazy)||void 0===l?void 0:l.lazy)||h||v){let t,r=null!=h?h:e.render;(null===(d=e.render)||void 0===d?void 0:d.overwriteLocal)&&(r=e.render),v?t=v:r&&(t={...r,...m&&{lazy:m}}),g={...e,render:t}}const y=g||e;if(this.boxyBaseUrl&&(null===(p=y.render)||void 0===p?void 0:p.npmVersion)&&(!("clientJs"in y.render)||!y.render.clientJs)){const t=ac()(e.type),r=`${this.boxyBaseUrl}${t}/${y.render.npmVersion}/${t}`;g=g||{...y},g.render={...g.render,npmVersion:void 0,clientJs:`${r}.client.js`,serverJs:`${r}.server.js`,css:`${r}.css`}}let b=g||e;if(this.urlRewrite&&b.render&&"clientJs"in b.render){const e=b.render.clientJs?this.urlRewrite(b.render.clientJs):b.render.clientJs,t=b.render.serverJs?this.urlRewrite(b.render.serverJs):b.render.serverJs,r=b.render.css?this.urlRewrite(b.render.css):b.render.css;e===b.render.clientJs&&r===b.render.css&&t===b.render.serverJs||(b={...b,render:{...b.render,clientJs:e,serverJs:t,css:r}})}return b}));return n&&!e&&this.refreshMappings&&r&&(await this.refreshMappings()).length?this.internalTransformTree(!0):(this.tree=o,o)}getComponent({type:e,render:t},r={},n={}){let o;if(t){const r="clientJs";o=r in t?t[r]:`${e}@${t.npmVersion}`}return n[e]||this.customMapping[e]||o&&this.map[o]||r[e]||this.fallbackMapping[e]}createUse(e={}){return t=>this.getComponent(t,e.fallbackBlockMap,e.customBlockMap)||e.notFound}}const dc=(0,a.V3)("boxyFallbackMappingExtension",{multi:!0}),pc=(0,a.V3)("boxyCustomMappingExtension",{multi:!0}),hc=(0,a.V3)("boxyBaseMappingExtension",{multi:!0}),fc=(0,a.V3)("overwriting boxyBaseMappingExtension"),mc=(0,a.V3)("boxyExternalMapping",{multi:!0}),vc=(0,a.V3)("boxyPreparedExternalMappings"),gc=(0,a.V3)("refreshMappingsToken"),yc=(0,a.V3)("freezeClientMapping"),bc=(0,a.V3)("eventeaRequestLoggerToken"),wc=(0,a.V3)("forceRefreshThrottleTimeToken"),Ec=(0,a.V3)("external mapping cache"),Sc=(0,a.V3)("microfronts locker http client"),_c=(0,a.V3)("enable cookie mapping"),kc=(0,a.V3)("MAPPING_REQUEST_TIMEOUT_TOKEN"),Tc=(0,a.V3)("BOXY_BASE_URL"),Cc=(0,a.V3)("BOXY_URL_REWRITE"),Rc=(0,a.V3)("boxyServiceFactory"),xc=(0,a.V3)("boxyLazy");(0,kt.y)("boxy ssr data set");const Mc=(0,kt.y)("boxy external mappings"),Pc=(0,Tt.L)("microfrontsMappings",{mappings:[],overwritingMapping:null}).on(Mc,((e,t)=>({...e,...t}))),Oc=(0,a.V3)("microfronts mappings logger"),Ac=(0,a.V3)("after mappings loaded",{multi:!0}),Nc=(0,a.V3)("external mappings processor"),Ic=(0,a.V3)("browserPersistingCacheToken"),Lc=(0,a.V3)("browserPermanentCacheName"),Dc="cookieMapping",jc="cookieMappingUrl",Fc=[(0,i.J)({provide:Oc,useFactory:({logger:e})=>e("boxy"),deps:{logger:E.Fp}}),(0,i.J)({provide:hc,useFactory:({store:e})=>()=>e.getState(Pc).mappings.map((({mapping:e})=>e)),deps:{store:O.kR}}),(0,i.J)({provide:fc,useFactory({cookie:e,store:t,logger:r,cookieMappingEnabled:n}){var o;if(!n)return{};const s=e.get(Dc),i=null===(o=t.getState(Pc).overwritingMapping)||void 0===o?void 0:o.mapping;if(s&&i&&r.warn(`Both cookies ${Dc} and ${jc} are set. First will be used,\n        but situation is almost certainly undesired. Please use only one at a time.`),!s)return i;{const e=JSON.parse(s);if(a=e,ia()(ia()((e=>"npmVersion"in e||"clientJs"in e&&"serverJs"in e)))(a))return e;r.error(`Cookie "${Dc}" is defined, but mapping in value is invalid`)}var a},deps:{cookie:er.T,store:O.kR,logger:Oc,env:S.vC,cookieMappingEnabled:_c}}),(0,i.J)({provide:_c,useFactory({env:e}){const t=e.get("ENABLE_COOKIE_MAPPING");return!!t&&"false"!==t},deps:{env:S.vC}}),(0,i.J)({provide:Tc,useFactory({env:e,urlRewrite:t}){const r=e.get("BOXY_BASE_URL");return t?t(r):r},deps:{env:S.vC,urlRewrite:Cc}}),(0,i.J)({provide:Cc,useFactory({env:e,requestManager:t}){const r=e.get("BOXY_REQUEST_HOSTNAME_MAP");return r?((e,t)=>{let r;e&&(r=e.split(",").reduce(((e,t)=>{const[r,n]=t.split("=");return e.set(r,n),e}),new Map));const n=new URL(t);return e=>{if(r&&e){const t=new URL(e);return t.hostname=r.get(n.hostname)||t.hostname,t.href}return e}})(r,t.getUrl()):null},deps:{env:S.vC,requestManager:tr.G}}),{provide:S.sQ,useValue:[{key:"BOXY_BASE_URL",optional:!0},{key:"ENABLE_COOKIE_MAPPING",optional:!0},{key:"BOXY_REQUEST_HOSTNAME_MAP",optional:!0}],multi:!0},(0,i.J)({provide:Rc,useFactory:({...e})=>t=>new lc({...e,...t}),deps:{fallbackMapping:{token:dc,multi:!0,optional:!0},customMapping:{token:pc,multi:!0,optional:!0},baseMappingExtensions:{token:hc,multi:!0,optional:!0},boxyLazy:{token:xc,optional:!0},overwritingMappingExtension:{token:fc,optional:!0},refreshMappings:{token:gc,optional:!0},boxyBaseUrl:Tc,urlRewrite:{token:Cc,optional:!0}}})],Vc=(e,t)=>t.some((t=>e instanceof t));let Bc,Uc;const qc=new WeakMap,$c=new WeakMap,Hc=new WeakMap,Jc=new WeakMap,zc=new WeakMap;let Gc={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return $c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Hc.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Kc(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yc(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Uc||(Uc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Wc(this),e),Kc(qc.get(this))}:function(...e){return Kc(t.apply(Wc(this),e))}:function(e,...r){const n=t.call(Wc(this),e,...r);return Hc.set(n,e.sort?e.sort():[e]),Kc(n)}:(e instanceof IDBTransaction&&function(e){if($c.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));$c.set(e,t)}(e),Vc(e,Bc||(Bc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Gc):e);var t}function Kc(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(Kc(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&qc.set(t,e)})).catch((()=>{})),zc.set(t,e),t}(e);if(Jc.has(e))return Jc.get(e);const t=Yc(e);return t!==e&&(Jc.set(e,t),zc.set(t,e)),t}const Wc=e=>zc.get(e),Qc=["get","getKey","getAll","getAllKeys","count"],Zc=["put","add","delete","clear"],Xc=new Map;function eu(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Xc.get(t))return Xc.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=Zc.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!Qc.includes(r))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let i=s.store;return n&&(i=i.index(t.shift())),(await Promise.all([i[r](...t),o&&s.done]))[0]};return Xc.set(t,s),s}var tu;tu=e=>({...e,get:(t,r,n)=>eu(t,r)||e.get(t,r,n),has:(t,r)=>!!eu(t,r)||e.has(t,r)}),Gc=tu(Gc);const ru=(0,a.V3)("router routerClassToken"),nu=(0,a.V3)("router additionalParameters"),ou=(0,a.V3)("router onChangeHooks",{multi:!0}),su=(0,a.V3)("router beforeResolveHooks",{multi:!0}),iu=(0,a.V3)("router beforeNavigateHooks",{multi:!0}),au=(0,a.V3)("router afterNavigateHooks",{multi:!0}),cu=(0,a.V3)("router beforeUpdateCurrentHooks",{multi:!0}),uu=(0,a.V3)("router afterUpdateCurrentHooks",{multi:!0}),lu=(0,a.V3)("router finalRouteTransform");var du=r(91232);function pu(e){return Boolean(e.code)}function hu(){return Date.now()}const fu=[(0,i.J)({provide:su,multi:!0,useFactory:({di:e,env:t})=>async()=>{await e.get(Nc)({forceRefresh:!1})},deps:{di:ur,env:S.vC}}),(0,i.J)({provide:gc,useFactory:({externalMappingsProcessorFactory:e,freezeClientMapping:t})=>()=>t?Promise.resolve([]):e({forceRefresh:!0}),deps:{externalMappingsProcessorFactory:Nc,freezeClientMapping:yc}}),(0,i.J)({provide:Nc,useFactory:e=>({forceRefresh:t})=>(async({appInfo:{appName:e},afterMappingsLoaded:t,cache:r,cookie:n,eventea:o,eventeaRequestLogger:s,externalMappingUrls:i,forceRefresh:a,httpRequest:c,logger:u,getRetryUrl:l,store:d,forceRefreshThrottleTime:p,cookieMappingEnabled:h,mappingRequestTimeout:f})=>{const m=h?n.get(jc):void 0;if(!(null==i?void 0:i.length)&&!m)return[];const v=[];let g=null;const y=[];function b(e,t,n){n.cookieMapping||r.set(e,{mapping:t,meta:a?{lastForceRefreshTime:hu()}:{}})}async function w(t,r){const n={url:t,slug:"external_mapping"};null==s||s.requestStart(n);const i=r.cookieMapping?"cookie":"external";null==o||o.send({project:"boxyCore",event:"boxyCore.mappingLoadingStart",payload:{application:e,mappingType:i,source:"s3"}});let a,l="success",d="200";const p=hu();try{a=await c.get(t,{},{responseType:"json",timeout:f})}catch(e){u.warn(`Failed to load mapping from ${t}. \n${e}`),l="error",d=function(e,t){return pu(t)&&"ABORT_ERR"===t.code?"aborted":pu(t)&&"ERR_HTTP_REQUEST_TIMEOUT"===t.code?"apiTimeout":e?200===e?"200":e>=200&&e<300?"2xx":[400,401,403,404].includes(e)?`${e}`:e>=400&&e<500?"4xx":[500,502,503,504].includes(e)?`${e}`:e>=500&&e<600?"5xx":"unknown":"empty"}(null==a?void 0:a.status,e)}finally{null==o||o.send({project:"boxyCore",event:"boxyCore.mappingLoadingEnd",payload:{application:e,mappingType:i,source:"s3",result:l,statusCode:d,duration:hu()-p}}),null==s||s.requestEnd({...n,result:l,statusCode:d,duration:hu()-p})}if(a)return function(e,t,r){const{baseUrl:n,mapping:o}=t;let s,i;return n?s=n:(s=function(e){return e.split("/").slice(0,-1).join("/")}(e),r.cookieMapping&&(i=t.commitSha)),(0,du._q)(o,s,{cacheHash:i})}(t,a.payload,r)}async function E(e,t){const n=function(e){return r.has(e)?r.get(e):void 0}(e);if(n&&function(e){if(!a)return!0;if(!(null==e?void 0:e.meta))return!1;const{lastForceRefreshTime:t}=e.meta,r=t?hu()-t:void 0;return!!(void 0!==r&&r<p)}(n))return n.mapping;const o=await w(e,t);if(o)return b(e,o,t),y.push(o),o;u.warn(`Failed to load mapping from ${e}.`);const s=function(e){const t=r.get(e);if(t)return r.set(e,t,{ttl:6e4}),t}(e);if(s)return u.warn(`Return cached stale version. ${e}`),s.mapping;const i=l(e);if(i===e)return null;const c=await w(i,t);return c?(b(e,c,t),y.push(c),c):(u.warn(`Fallback cdn mapping load failed: ${i}.`),null)}const S=(i||[]).map((async e=>{const t=await E(e,{cookieMapping:!1});if(t)return{url:e,mapping:t}})),_=m?[(async e=>{const t=await E(e,{cookieMapping:!0});t&&(g={url:e,mapping:t})})(m)]:[];return await Promise.all([Promise.all([...S]).then((e=>{e.forEach((e=>{e&&v.push(e)}))})),..._]),d.dispatch(Mc({mappings:v,overwritingMapping:g})),y.length&&t&&await Promise.all(t.map((e=>e({mappingsUpdated:!0})))),y})({...e,forceRefresh:t}),deps:{appInfo:l.Qo,eventea:{token:pr.Bv,optional:!0},eventeaRequestLogger:{token:bc,optional:!0},cookie:er.T,di:ur,cache:Ec,httpRequest:Sc,logger:Oc,externalMappingUrls:vc,store:O.kR,env:S.vC,afterMappingsLoaded:{token:Ac,optional:!0},getRetryUrl:Ka,forceRefreshThrottleTime:wc,cookieMappingEnabled:_c,mappingRequestTimeout:kc,urlRewrite:Cc}}),(0,i.J)({provide:vc,useFactory(e){const t=e.env.get("BOXY_EXTERNAL_MAPPING_URL");let r=e.externalMappingUrls||[];return t&&(r=r.concat(t.split(",").map((e=>e.trim())))),e.urlRewrite?r.map(e.urlRewrite):r},deps:{externalMappingUrls:{token:mc,optional:!0},urlRewrite:Cc,env:S.vC}}),(0,i.J)({provide:S.sQ,useValue:[{key:"BOXY_EXTERNAL_MAPPING_URL",optional:!0},{key:"FREEZE_CLIENT_MAPPING",value:"true",dehydrate:!0},{key:"TRAMVAI_FORCE_CLIENT_SIDE_RENDERING",optional:!0}]}),(0,i.J)({provide:yc,useFactory:({env:e})=>"true"===e.get("FREEZE_CLIENT_MAPPING"),deps:{env:S.vC}}),(0,i.J)({provide:wc,useValue:6e4}),(0,i.J)({provide:Sc,useFactory:({factory:e})=>e({name:"microfronts-locker",enableCircuitBreaker:!1,cacheTime:3e4,allowStale:!1}),deps:{factory:ro.FB}}),(0,i.J)({provide:kc,useValue:2e4})],mu=[...fu,(0,i.J)({provide:Ec,scope:d.s.SINGLETON,useFactory:({cacheFactory:e,freezeClientMapping:t})=>e("memory",{ttl:t?void 0:12e5,max:40,allowStale:!0}),deps:{cacheFactory:io,freezeClientMapping:yc}}),(0,i.J)({provide:P.init,scope:d.s.SINGLETON,useFactory:({cache:e,logger:t,store:r,permanentCache:n,permanentCacheName:o})=>async()=>{const s=r.getState(Pc);if(s.mappings.length||s.overwritingMapping)return s.mappings.forEach((({url:t,mapping:r})=>{e.set(t,{mapping:r})})),void(s.overwritingMapping&&e.set(s.overwritingMapping.url,{mapping:s.overwritingMapping.mapping}));const i=await(await n).get(o);if(i&&1===i.version)try{return e.load(i.data.cacheDump)}catch(e){t.warn(`Failed to load stored cache from permanentCache.\n${e.message}\n${e.stack}`)}},deps:{cache:Ec,logger:Oc,store:O.kR,permanentCache:Ic,appInfo:l.Qo,permanentCacheName:Lc}}),(0,i.J)({provide:Ac,useFactory:({cache:e,logger:t,permanentCache:r,permanentCacheName:n})=>async({mappingsUpdated:o})=>{if(o)try{return await(await r).set(n,{version:1,data:{cacheDump:e.dump()}})}catch(e){t.error(`Failed to save cache to idb.\n${e.message}\n${e.stack}`)}return Promise.resolve()},deps:{cache:Ec,logger:Oc,permanentCache:Ic,permanentCacheName:Lc}}),(0,i.J)({provide:Ic,scope:d.s.SINGLETON,useFactory:async({freezeClientMapping:e})=>{const t=function(){const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();if(e)return{get:e=>Promise.resolve(null),set:(e,t)=>Promise.resolve()};if(window.indexedDB&&(!t||!localStorage.__DEV__FORCE_LOCAL_STORAGE)){const e="tinkoff:microfronts-locker",t="keyval",r=()=>function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:s}={}){const i=indexedDB.open(e,t),a=Kc(i);return n&&i.addEventListener("upgradeneeded",(e=>{n(Kc(i.result),e.oldVersion,e.newVersion,Kc(i.transaction),e)})),r&&i.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(e,1,{upgrade(e){e.createObjectStore(t)}});try{let e=r();return await e,window.addEventListener("pagehide",(async()=>{if(e){const t=await e;await t.close(),e=null}})),window.addEventListener("pageshow",(()=>{e=r()})),{get:async r=>(await e).get(t,r),set:async(r,n)=>{const o=await e;await o.put(t,n,r)}}}catch(e){}}return t?{get(e){const t=localStorage.getItem(e);return Promise.resolve(t?((e,t=null)=>{if(void 0===e)return t;try{return JSON.parse(e)}catch(e){return t}})(t):null)},set:(e,t)=>(localStorage.setItem(e,JSON.stringify(t)),Promise.resolve())}:{get:e=>Promise.resolve(null),set:(e,t)=>Promise.resolve()}},deps:{freezeClientMapping:yc}}),(0,i.J)({provide:Lc,scope:d.s.SINGLETON,useFactory:({appInfo:e})=>`${e.appName}--mappings-locker`,deps:{appInfo:l.Qo}})],vu=o({name:"MicrofrontsLocker",imports:[oc],providers:[...mu,...Fc,(0,i.J)({provide:O.Ym,useValue:[Pc],multi:!0})]}),gu=(0,kt.y)("SET_CURRENT_ROUTE"),yu=(0,kt.y)("SET_URL_ON_REHYDRATE"),bu=(0,Tt.L)("router",{currentRoute:null,previousRoute:null,currentUrl:null,previousUrl:null}).on(gu,((e,{to:t,from:r,url:n,fromUrl:o,replace:s})=>({currentRoute:t,previousRoute:s?e.previousRoute:r,currentUrl:n,previousUrl:s?e.previousUrl:o}))).on(yu,((e,t)=>({...e,currentUrl:t}))),wu=(0,kt.y)("updateReferrer"),Eu=(0,Tt.L)("referrer","").on(wu,((e,t)=>t));let Su=class{};Su=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:O.Ym,multi:!0,useValue:Eu}),(0,i.J)({provide:P.spaTransition,multi:!0,useFactory:({store:e})=>function(){return e.dispatch(wu(e.getState(bu).currentUrl.href))},deps:{store:O.kR}})]})],Su);const _u=(0,a.V3)("bundleManager"),ku=(0,a.V3)("additional bundle",{multi:!0}),Tu=(0,a.V3)("router appIdResolve"),Cu=(0,a.V3)("userAgent"),Ru=(0,a.V3)("mgm_boxy");function xu(e){if(!e)return{};const t=Object.keys(e).filter((t=>void 0!==e[t])).reduce(((t,r)=>{return{...t,[(n=r,n.split("_").map(((e,t)=>0===t?e.toLowerCase():`${e[0]}${e.slice(1).toLowerCase()}`)).join(""))]:String(e[r])};var n}),{});return t}const Mu=e=>({fatal:e.fatal.bind(e),error:e.error.bind(e),warn:e.warn.bind(e),info:e.info.bind(e),debug:e.debug.bind(e),trace:e.trace.bind(e)}),Pu=e=>e.child({name:"remote",defaults:{remote:{emitLevels:{fatal:!0,error:!0,warn:!0,info:!0,debug:!0,trace:!0}}}});function Ou(e){const t=e("boxy-di-logger");return{...Mu(t),remote:Mu(Pu(t)),createNamespace:e=>{const r=t.child(e);return{...Mu(r),remote:Mu(Pu(r))}}}}const Au=(0,a.V3)("boxyService"),Nu=(0,a.V3)("boxyRenderer"),Iu=(0,a.V3)("boxyMetrics"),Lu=(0,a.V3)("getDivalToken"),Du=(0,a.V3)("boxy default bundle"),ju=(0,a.V3)("boxyPubsub");var Fu=r(90130),Vu=r(44121),Bu=r.n(Vu),Uu=r(26294),qu=r(86905);const $u=(0,kt.y)("boxy ssr data set"),Hu=(0,Tt.L)("boxy",{ssrData:{}}).on($u,((e,t)=>({...e,...t}))),Ju=(new Set(["env","runtimeEnv","appName","appId","isAuthorized","isUserAuthorized"]),new Set(["showRegionPopup"]));var zu=r(71341),Gu=r(44488);r(84788);const Yu=(0,zu.Z)({name:"mainDefault",components:{pageDefault:()=>{const{BoxyRenderer:e}=(0,Gu.x)({BoxyRenderer:Nu});return(0,Fu.jsx)(e,{})}}}),Ku=(0,a.V3)("boxy logger"),Wu=[(0,i.J)({provide:Ku,useFactory:({logger:e})=>e("boxy"),deps:{logger:E.Fp}}),(0,i.J)({provide:Au,useFactory:({boxyServiceFactory:e})=>e(),deps:{boxyServiceFactory:Rc}}),(0,i.J)({provide:Nu,useFactory:({boxyService:e,analyticsConfig:t,boxyMetrics:r,authenticator:n,pageService:o,getUnchargedDival:s,context:i,boxyPubsub:a})=>c=>{const{dival:u}=c,{ssrData:l}=(0,Uu.v)(Hu,(({boxy:e})=>({ssrData:e.ssrData}))),{roles:d,featureToggle:p,region:h,referrer:f}=i.getState(),m=(0,Uu.v)([d&&"roles",p&&"featureToggle",h&&"region",f&&"referrer"].filter(Boolean),(e=>({roles:e.roles,featureToggle:e.featureToggle,region:e.region,referrer:e.referrer}))),v=s(m);n&&(v.logout=()=>n.logout()),o&&(v.navigate=e=>o.navigate(e)),t&&(v.trackingOptions=t.blocks);const g=function({dival:e,ssrData:t,unchargedDival:r}){return{...{...e,...r,env:{...r.env,...null==e?void 0:e.env},runtimeEnv:{...r.runtimeEnv,...null==e?void 0:e.runtimeEnv}},...t}}({dival:u,ssrData:l,unchargedDival:v}),y=function(e,t){var r,n,o;const{getTree:s,createUse:i,createUseOptions:a,dival:c,miss:u,missedDi:l,...d}=e,p=(0,Vu.useRef)({cacheKeys:{simpleProps:null,createUseOptions:null},data:null}),{createUseOptions:h,...f}=e;if(!Ea()(p.current.cacheKeys.simpleProps,f)||!Ea()(p.current.cacheKeys.createUseOptions,a)){const e=e=>{const r=[];return Promise.resolve().then((()=>{t.boxyMetrics.blocksRendered(),r.length&&t.boxyMetrics.blockMiss(r)})).catch((()=>{})),t=>{null==e||e(t),r.push(t)}};p.current={cacheKeys:{createUseOptions:a,simpleProps:f},data:{...d,miss:e(u),missedDi:({key:e,subtree:r})=>{null==l||l({key:e,subtree:r}),t.boxyMetrics.diMiss(r.type,e)},tree:s?s():t.boxyService.getTree(),use:i?i():t.boxyService.createUse(a)}}}return(null===(r=p.current.data.tree.content)||void 0===r?void 0:r.length)||null===(o=(n=t.boxyMetrics).emptyContent)||void 0===o||o.call(n),p.current.data}(c,{boxyService:e,boxyMetrics:r}),{act:b,...w}=y,E=(0,Vu.useCallback)((e=>{b&&b(e);const t="object"==typeof e&&(null==e?void 0:e.type);Ju.has(t)&&a.publish("page-maker-action",e)}),[b]);return(0,Fu.jsx)(qu.Z,{act:E,isConcurrentFeaturesEnabled:!0,...w,dival:g})},deps:{boxyService:Au,analyticsConfig:{token:"analyticsConfig",optional:!0},analytics:{token:"analytics",optional:!0},appInfo:l.Qo,boxyMetrics:Iu,envManager:S.vC,cookieManager:er.T,getAppId:{token:Tu,optional:!0},authenticator:{token:qs,optional:!0},pageService:{token:Mt.Y9,optional:!0},getUnchargedDival:Lu,context:dr,boxyPubsub:ju}}),{provide:O.Ym,useValue:[Hu],multi:!0},(0,i.J)({provide:Lu,useFactory:e=>({roles:t,referrer:r,featureToggle:n,region:o})=>function({analytics:e,cookieManager:t,envManager:r,pageService:n,getAppId:o,appInfo:s,userAgent:i,authenticator:a,logger:c,sessionManager:u,wuid:l,roles:d,featureToggle:p,region:h,referrer:f,mgm:m,eventea:v}){var g,y,b;const w=null==n?void 0:n.getCurrentUrl(),E=null==o?void 0:o(),S=Un.QO(d),_=Un.C5(d),k=la(d),T=_||k;return{env:xu(r.getAll()),logger:Ou(c),getWuid:()=>l,trackingService:e||void 0,dco:null===(y=null===(g=null==e?void 0:e.state)||void 0===g?void 0:g.personalizedLandingMetrics)||void 0===y?void 0:y.state,runtimeEnv:{...t&&{cookies:t.all()},location:{...w||{},query:null==w?void 0:w.query},..."string"==typeof f&&{referrer:f}},...i&&{userAgent:i},...(null==s?void 0:s.appName)&&{appName:null==s?void 0:s.appName},...E&&{appId:E},layout:"mobile"===(null===(b=null==i?void 0:i.device)||void 0===b?void 0:b.type)?"mobile":"desktop",...d&&{roles:d,isAuthorized:S,isUserAuthorized:T},...p&&{featureToggle:p},...h&&{currentRegion:null==h?void 0:h.currentRegion},...a&&u&&{getSessionId:async()=>new Promise((e=>a.isAuthenticateFinishedPromise.catch((()=>{})).finally((()=>{e(u.fetchSessionId())}))))},...n&&{setUrlQuery:e=>n.updateCurrentRoute({query:e})},mgm:m,eventea:v}}({...e,roles:t,referrer:r,featureToggle:n,region:o}),deps:{analytics:{token:"analytics",optional:!0},authenticator:{token:qs,optional:!0},envManager:S.vC,cookieManager:{token:er.T,optional:!0},getAppId:{token:Tu,optional:!0},pageService:{token:Mt.Y9,optional:!0},appInfo:{token:l.Qo,optional:!0},userAgent:{token:Cu,optional:!0},logger:E.Fp,sessionManager:{token:$s,optional:!0},wuid:_.$,mgm:{token:Ru,optional:!0},eventea:{token:pr.Bv,optional:!0}}}),(0,i.J)({provide:ku,scope:d.s.SINGLETON,multi:!0,useFactory:({boxyDefaultBundle:e})=>({mainDefault:e}),deps:{boxyDefaultBundle:Du}}),(0,i.J)({provide:Du,useValue:Yu}),(0,i.J)({provide:ju,useFactory:({pubSubFactory:e})=>e(),deps:{pubSubFactory:Ri.eP}}),(0,i.J)({provide:pr.gk,multi:!0,useValue:{project:"boxyCore"}})],Qu=[{provide:Iu,useFactory:({eventea:e})=>({blocksRendered:()=>{null==e||e.send({project:"boxy",event:"pagemaker-client-rendered"})},blockMiss:t=>{null==e||e.send({project:"boxy",event:"block-client-fallback",payload:{blocksCount:t.length,blockTypes:t.map((({type:e,version:t})=>`${e}-v${t}`))}})},diMiss:(t,r)=>{null==e||e.send({project:"boxy",event:"di-required-key-missed",payload:{type:t,key:r}})},emptyContent:()=>{null==e||e.send({project:"boxy",event:"render-empty-content"})}}),deps:{eventea:{token:pr.Bv,optional:!0}}}];let Zu=class{};Zu=(0,Kt.__decorate)([(0,n.Y)({imports:[Su,vu],providers:[...Wu,...Qu,(0,i.J)({provide:P.resolvePageDeps,useFactory:({boxyService:e,pageService:t,microfrontsBaseUrl:r,getRetryUrl:n,eventea:o})=>async function(){var s;const i=t.getContent();if(!i)return;e.registerTree(i),await e.transformTree();const a=await Qa()({tree:e.getTree(),baseUrl:r,getRetryUrl:n}),c=(0,Za.Z5)({urlMask:null===(s=t.getCurrentRoute())||void 0===s?void 0:s.path});return c&&(null==o||o.send({project:"boxyCore",event:"boxyCore.microfrontStaticLoad",payload:c})),e.registerMap(a),Promise.resolve()},multi:!0,deps:{boxyService:Au,pageService:Mt.Y9,context:dr,envManager:S.vC,getRetryUrl:Ka,microfrontsBaseUrl:Tc,eventea:{token:pr.Bv,optional:!0}}}),{provide:S.sQ,useValue:[{key:"BOXY_BASE_URL"}],multi:!0}]})],Zu);class Xu{constructor(){this.parameters={}}get(e){return this.parameters[e]}getInt(e,t){const r=Number(e in this.parameters?this.parameters[e]:t);return Number.isFinite(r)?r:t}getAll(){return this.parameters}update(e){this.parameters=Object.assign(this.parameters,e)}clientUsed(){return this.getAll()}updateClientUsed(e){this.update(e)}}const el=(0,Tt.L)("environment",{});let tl=class{};tl=(0,Kt.__decorate)([(0,n.Y)({providers:[{provide:S.vC,useFactory:({store:e})=>{const t=new Xu;return t.update(e.getState(el)),t},scope:d.s.SINGLETON,deps:{store:O.kR}},{provide:O.Ym,useValue:el,multi:!0}]})],tl);var rl=r(27714),nl=r.n(rl);const ol=(0,kt.y)("setMedia"),sl=(0,Tt.L)("media",{height:0,width:0,isTouch:!1,retina:!1,synchronized:!1,displayMode:"unknown"}).on(ol,((e,t)=>({...e,...t}))),il=window.requestIdleCallback||function(e){return window.setTimeout(e,1)},al=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),cl=window.matchMedia("(display-mode: standalone)").matches?"standalone":window.matchMedia("(display-mode: browser)").matches?"browser":"unknown",ul=(0,kt.y)("setUserAgent"),ll=(0,Tt.L)("userAgent",null).on(ul,((e,t)=>t)),dl=o({name:"ClientHintsModule",providers:[(0,i.J)({provide:O.Ym,multi:!0,useValue:[ll,sl]}),(0,i.J)({provide:S.sQ,useValue:[{key:"TRAMVAI_FORCE_CLIENT_SIDE_RENDERING",optional:!0}]}),(0,i.J)({provide:P.clear,multi:!0,useFactory:({context:e,cookieManager:t})=>function(){const r=()=>{const r={width:window.innerWidth,height:window.innerHeight,isTouch:al,displayMode:cl,retina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches};return t.set({name:"mediaInfo",value:JSON.stringify(r)}),il((()=>e.dispatch(ol({...r,supposed:!1}))))},n=nl()(300,r);return window.addEventListener("orientationchange",n),window.addEventListener("resize",n),r()},deps:{context:dr,cookieManager:er.T}}),(0,i.J)({provide:Cu,useFactory:({store:e})=>e.getState(ll),deps:{store:O.kR}})]});class pl{constructor(e={}){this.defaults=e}get(e){const t=document.cookie.split(";");for(let r=0;r<t.length;r++){const n=t[r];if(!n)break;let o=n.indexOf("=");o=o<0?n.length:o;const s=n.slice(0,o).replace(/^\s+/,""),i=n.slice(o+1);let a;try{a=decodeURIComponent(s)}catch(e){console.warn("Decode cookie name error",e)}if(a===e||s===e)try{return decodeURIComponent(i)}catch(e){return console.warn("Decode cookie value error",e),i}}}set(e,t,r){if(!e)return;const{domain:n,path:o,expires:s,secure:i,httpOnly:a,sameSite:c}=function(e={},t={}){var r,n,o,s,i;return{expires:e.expires||t.expires,domain:e.domain||t.domain,path:null!==(n=null!==(r=e.path)&&void 0!==r?r:t.path)&&void 0!==n?n:"/",secure:null!==(o=e.secure)&&void 0!==o?o:t.secure,httpOnly:null!==(s=e.httpOnly)&&void 0!==s?s:t.httpOnly,sameSite:null!==(i=e.sameSite)&&void 0!==i?i:t.sameSite}}(r,this.defaults),u=function(e){return e?new Date("number"==typeof e?(new Date).getTime()+864e5*e:e):null}(s),l=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29"),d=("string"==typeof t?t:"").replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent),p=u&&u.getTime()>=0?`;expires=${u.toUTCString()}`:"",h=n?`;domain=${n}`:"",f=o?`;path=${o}`:"",m=i?";secure":"",v=a?";httponly":"",g=c?`;samesite=${c}`:"";document.cookie=`${l}=${d}${p}${h}${f}${m}${v}${g}`}erase(e,t={}){this.set(e,"",{expires:-1,domain:t.domain,path:t.path,secure:!1,httpOnly:!1})}all(){const e={},t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i,a;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}try{a=decodeURIComponent(s)}catch(e){console.warn("Decode cookie value error",e)}e[null!=i?i:o]=null!=a?a:s}return e}}const hl=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,fl=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,ml=e=>{if(e)return new Date("number"==typeof e?+new Date+1e3*e:e)};class vl{constructor(){this.cache=Object.create(null)}get(e){return this.cache[e]||void 0}set(e,t){this.cache[e]=t}erase(e){delete this.cache[e]}all(){return this.cache}}let gl=class{};gl=(0,Kt.__decorate)([(0,n.Y)({imports:[dl],providers:[(0,i.J)({provide:er.T,useClass:class{constructor({cookieOptions:e={},userAgent:t}){const r="https:"===window.location.protocol,n={sameSite:t.sameSiteNoneCompatible&&r?"none":"lax",secure:r,...e};this.cookies=((e=!1)=>{const t="testcookiesenabled=",r=e?`${t}; SameSite=None; Secure`:t;return document.cookie=r,document.cookie.indexOf(t)>-1&&(document.cookie=`${r}; expires=Thu, 01 Jan 1970 00:00:01 GMT`,!0)})("none"===n.sameSite)?new pl(n):new vl,this.userAgent=t}get(e){return this.cookies.get(e)||void 0}set({name:e,value:t,...r}){this.cookies.set(e,t,(({userAgent:{sameSiteNoneCompatible:e},defaultHost:t,secureProtocol:r},{sameSite:n,noSubdomains:o,...s})=>{return{...s,..."none"!==n||e&&r?{sameSite:n}:{},...r&&"none"===n&&e?{secure:!0}:{},expires:ml(s.expires),domain:o?(i=s.domain||t,(e=>hl.test(e)||fl.test(e))(i)?i:(e=>e.replace(/:\d+$/,""))(i.indexOf("localhost")>=0?i:`.${i.split(".").slice(-2).join(".")}`)):s.domain};var i})({userAgent:this.userAgent,defaultHost:window.location.hostname,secureProtocol:"https:"===window.location.protocol},r))}all(){return this.cookies.all()}remove(e,t){return this.cookies.erase(e,t)}},scope:d.s.SINGLETON,deps:{cookieOptions:{token:"temporary cookieOptions",optional:!0},userAgent:Cu}})]})],gl);const yl=(0,p.createLoggerFactory)({name:"",key:"tramvai",reporters:[new p.BrowserReporter]});let bl=class{};bl=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:E.Fp,useFactory({loggerInitHooks:e}){if(e)for(const t of e)t(yl);return yl},deps:{loggerInitHooks:{token:E.J0,multi:!0,optional:!0}}}),(0,i.J)({provide:E.yV,scope:d.s.SINGLETON,useValue:new Map}),(0,i.J)({provide:E.J0,multi:!0,useFactory:({remoteReporter:e})=>t=>{e&&t.addReporter(e)},deps:{remoteReporter:(0,a.jt)(E.DV)}})]})],bl);const wl=(0,a.V3)("componentRegistry");var El=r(79436),Sl=r.n(El),_l=r(87346),kl=r.n(_l),Tl=r(33926),Cl=r(20986),Rl=r(65641),xl=r(98393),Ml=r(7047);var Pl=Bu().createContext(),Ol={},Al="PENDING",Nl="REJECTED",Il=function(e){return e};function Ll(e){var t=e.defaultResolveComponent,r=void 0===t?Il:t,n=e.render,o=e.onLoad;function s(e,t){void 0===t&&(t={});var s=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),i={};function a(e){return t.cacheKey?t.cacheKey(e):s.resolve?s.resolve(e):"static"}function c(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):r(e);if(t.resolveComponent&&!(0,Ml.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return kl()(o,s,{preload:!0}),s}var u,l,d=function(e){var t=a(e),r=i[t];return r&&r.status!==Nl||((r=s.requireAsync(e)).status=Al,i[t]=r,r.then((function(){r.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:s.resolve(e),chunkName:s.chunkName(e),error:t?t.message:t}),r.status=Nl}))),r},p=function(e){function r(r){var n;return(n=e.call(this,r)||this).state={result:null,error:null,loading:!0,cacheKey:a(r)},function(e,t){if(!e){var r=new Error("loadable: "+t);throw r.framesToPop=1,r.name="Invariant Violation",r}}(!r.__chunkExtractor||s.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),r.__chunkExtractor?(!1===t.ssr||(s.requireAsync(r).catch((function(){return null})),n.loadSync(),r.__chunkExtractor.addChunk(s.chunkName(r))),(0,Rl.Z)(n)):(!1!==t.ssr&&(s.isReady&&s.isReady(r)||s.chunkName&&Ol[s.chunkName(r)])&&n.loadSync(),n)}(0,xl.Z)(r,e),r.getDerivedStateFromProps=function(e,t){var r=a(e);return(0,Cl.Z)({},t,{cacheKey:r,loading:t.loading||t.cacheKey!==r})};var u=r.prototype;return u.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===Nl&&this.setCache(),this.state.loading&&this.loadAsync()},u.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},u.componentWillUnmount=function(){this.mounted=!1},u.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},u.getCacheKey=function(){return a(this.props)},u.getCache=function(){return i[this.getCacheKey()]},u.setCache=function(e){void 0===e&&(e=void 0),i[this.getCacheKey()]=e},u.triggerOnLoad=function(){var e=this;o&&setTimeout((function(){o(e.state.result,e.props)}))},u.loadSync=function(){if(this.state.loading)try{var e=c(s.requireSync(this.props),this.props,f);this.state.result=e,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:s.resolve(this.props),chunkName:s.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},u.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var r=c(t,e.props,f);e.safeSetState({result:r,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},u.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,(0,Tl.Z)(e,["__chunkExtractor","forwardedRef"]));return d(t)},u.render=function(){var e=this.props,r=e.forwardedRef,o=e.fallback,s=(e.__chunkExtractor,(0,Tl.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),i=this.state,a=i.error,c=i.loading,u=i.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===Al)throw this.loadAsync();if(a)throw a;var l=o||t.fallback||null;return c?l:n({fallback:l,result:u,options:t,props:(0,Cl.Z)({},s,{ref:r})})},r}(Bu().Component),h=(l=function(e){return Bu().createElement(Pl.Consumer,null,(function(t){return Bu().createElement(u,Object.assign({__chunkExtractor:t},e))}))},(u=p).displayName&&(l.displayName=u.displayName+"WithChunkExtractor"),l),f=Bu().forwardRef((function(e,t){return Bu().createElement(h,Object.assign({forwardedRef:t},e))}));return f.displayName="Loadable",f.preload=function(e){f.load(e)},f.load=function(e){return d(e)},f}return{loadable:s,lazy:function(e,t){return s(e,(0,Cl.Z)({},t,{suspense:!0}))}}}var Dl=Ll({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,r=e.props;return Bu().createElement(t,r)}}),jl=Dl.loadable,Fl=Dl.lazy,Vl=Ll({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,r=e.props;return r.children?r.children(t):null}}),Bl=Vl.loadable,Ul=Vl.lazy;jl.lib=Bl,Fl.lib=Ul;r(20689);const ql="__default";class $l{constructor({bundleList:e,componentRegistry:t,logger:r}){this.bundles=e,this.componentRegistry=t,this.bundles[ql]=()=>Promise.resolve({default:(0,zu.Z)({name:ql,components:{}})})}get(e,t){return this.loadBundle(e,t).then((e=>e.default))}has(e,t){return!!this.bundles[e]}loadBundle(e,t){return this.has(e,t)?this.bundles[e]().catch((t=>((e,t)=>{if("CSS_CHUNK_LOAD_FAILED"===(null==e?void 0:e.code)){const r=e.request;if(document.querySelector(`link[href="${r}"]`)||document.querySelector(`link[data-href="${r}"]`))return t()}throw e})(t,this.bundles[e]))):Promise.reject(new Error(`Bundle "${e}" not found`))}}const Hl="__default",Jl=(0,kt.y)("setRequest"),zl=(0,Tt.L)("requestManager",{}).on(Jl,((e,t)=>t)),Gl=[(0,i.J)({provide:tr.G,scope:d.s.REQUEST,useClass:class{constructor({request:e}){this.request=e||{},this.url=window.location.href}getBody(){return this.request.body}getUrl(){return this.url}getParsedUrl(){return this.parsedUrl||(this.parsedUrl=fa(this.url)),this.parsedUrl}getMethod(){return this.request.method}getHeader(e){var t;return null===(t=this.request.headers)||void 0===t?void 0:t[e]}getHeaders(){return this.request.headers}getCookie(e){return this.request.cookies[e]}getCookies(){return this.request.cookies}getClientIp(){var e,t;return this.getHeader("x-real-ip")||(null===(t=null===(e=this.request)||void 0===e?void 0:e.socket)||void 0===t?void 0:t.remoteAddress)||""}getHost(){return window.location.host}},deps:{request:Wt}}),(0,i.J)({provide:O.Ym,multi:!0,useValue:zl})];let Yl=class{};Yl=(0,Kt.__decorate)([(0,n.Y)({providers:[...Gl,(0,i.J)({provide:Wt,useFactory:({store:e})=>{const t=e.getState(zl);return{...t,headers:{...null==t?void 0:t.headers,"user-agent":navigator.userAgent,cookie:document.cookie}}},deps:{store:O.kR}})]})],Yl);const Kl=(0,a.V3)("responseManager");var Wl=r(53170),Ql=r.n(Wl);const Zl=[(0,i.J)({provide:Kl,scope:d.s.REQUEST,useClass:class{constructor(){this.body="",this.headers={},this.cookies={},this.status=200}getBody(){return this.body}setBody(e){this.body=e}getHeader(e){return"set-cookie"===e?Ql()(this.cookies):this.headers[e]}getHeaders(){return Oa()(this.cookies)?this.headers:{...this.headers,"Set-Cookie":Ql()(this.cookies)}}setHeader(e,t){this.headers[e]=t}getCookie(e){return this.cookies[e]}getCookies(){return this.cookies}setCookie(e,t){this.cookies[e]=t}setStatus(e){this.status=e}getStatus(){return this.status}}})];let Xl=class{};Xl=(0,Kt.__decorate)([(0,n.Y)({providers:[...Zl,(0,i.J)({provide:Qt,useValue:{}})]})],Xl);const ed=(e,t)=>{e.on("change",t),t()};var td=r(24069);const rd=(e,t)=>"string"==typeof e?{payload:t,type:e,error:!1}:e;class nd extends td.Z{constructor(e,t,r,n){super(),this.applyDispatch=e=>{let t=this.dispatcher.handlers[e.type]||[];if(!t.length){if(!e.store)return e.payload;this.registerStore(e.store),t=this.dispatcher.handlers[e.type]||[]}return this.applyHandlers(e,t),e.payload},this.dispatcher=e,this.storeInstances={},this.storeUnsubscribeCallbacks={},this.context=t,this.dispatcherInterface={getContext:()=>this.context,getStore:this.getStore.bind(this)},this.rehydratedStoreState={},this.fullState={},r&&this.rehydrate(r),(null==n?void 0:n.length)&&(this.applyDispatch=this.applyMiddlewares(n)),Object.keys(this.dispatcher.stores).forEach((e=>{this.getStore(e)}))}applyMiddlewares(e){let t=(...e)=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const r={getState:this.getState.bind(this),subscribe:this.subscribe.bind(this),dispatch:(...e)=>t(...e)};return t=ho()(...e.map((e=>e(r))))(this.applyDispatch),t}storeSubscribe(e,t){if(this.storeUnsubscribeCallbacks[e])return;const r=()=>{const r=t.getState();r!==this.fullState[e]&&(this.fullState={...this.fullState,[e]:r},this.emit("change"))};ed(t,r),this.storeUnsubscribeCallbacks[e]=()=>{t.off("change",r)}}getStore(e){let t,r=!1;"object"==typeof e?(t=e.store,r=e.optional):t=e;const n=this.dispatcher.getStoreName(t);if(!this.storeInstances[n]){let e=this.dispatcher.stores[n];if(!e){if("function"!=typeof t){if(r)return null;throw new Error(`Store ${n} was not registered.`)}this.dispatcher.registerStore(t),e=t}const o=new e(this.dispatcherInterface);if(this.storeInstances[n]=o,this.rehydratedStoreState&&this.rehydratedStoreState[n]){const e=this.rehydratedStoreState[n];o.rehydrate&&o.rehydrate(e),this.rehydratedStoreState[n]=null}this.storeSubscribe(n,o),e.dependencies&&e.dependencies.forEach((e=>{const t=this.getStore(e);ed(t,(()=>{o.emit("change")}))}))}return this.storeInstances[n]}dispatch(e,t){if(!e)throw new Error(`eventOrType parameter ${e} is invalid.`);const r=rd(e,t);return this.applyDispatch(r)}applyHandlers(e,t){const r={},n=e=>{if(r[e.name])return;const t=this.getStore(e.name);t&&("function"==typeof e.handler?r[e.name]=e.handler.bind(t):r[e.name]=t[e.handler].bind(t))},o=t.length;for(let e=0;e<o;e++)n(t[e]);return((e,t)=>{const r=Object.keys(t);for(let n=0;n<r.length;n++){const o=r[n],s=t[o];if(!s)throw new Error(`${o} does not have a handler for action ${e.type}`);s(e.payload,e.type)}})(e,r)}dehydrate(){const e={},t=Object.keys(this.storeInstances);for(let r=0;r<t.length;r++){const n=t[r],o=this.storeInstances[n].dehydrate();void 0!==o&&(e[n]=o)}return{stores:e}}rehydrate(e){if(e.stores){const t=Object.keys(e.stores);for(let r=0;r<t.length;r++){const n=t[r];this.rehydratedStoreState[n]=e.stores[n]}}}subscribe(...e){if("storeName"in e[0]){const t=e[0],r=e[1],n=this.getStore(t),o=()=>{const e=this.getState(t);r(e)};return n.on("change",o),()=>{n.off("change",o)}}const t=e[0],r=()=>{const e=this.getState();t(e)};return this.on("change",r),()=>{this.off("change",r)}}getState(e){return e?this.fullState[e.storeName]:this.fullState}setContext(e){this.context=e}hasStore(e){return e.storeName in this.storeInstances&&this.dispatcher.hasStore(e)}registerStore(e){this.dispatcher.registerStore(e),this.getStore(e)}unregisterStore(e){const{storeName:t}=e;this.dispatcher.unregisterStore(e),this.storeUnsubscribeCallbacks[t](),delete this.storeUnsubscribeCallbacks[t],delete this.rehydratedStoreState[t],delete this.storeInstances[t]}}class od{constructor({di:e,dispatcherContext:t,pubsub:r,store:n}){this.executeAction=(e,t)=>this.di.get(Ai).run(e,t),this.dispatch=(e,t)=>new Promise(((r,n)=>{try{r(this.store.dispatch(rd(e,t)))}catch(e){n(e)}})),this.dispatchWith=(e,t)=>"function"==typeof e?(...r)=>this.dispatch(e(...r),t):t=>this.dispatch(e,t),this.getStore=e=>this.dispatcher.getStore(e),this.dehydrate=()=>({dispatcher:this.dispatcher.dehydrate()}),this.getState=(...e)=>this.store.getState(e[0]),this.subscribe=(...e)=>this.store.subscribe(e[0],e[1]),this.hasStore=e=>this.dispatcher.hasStore(e),this.registerStore=e=>this.dispatcher.registerStore(e),this.unregisterStore=e=>this.dispatcher.unregisterStore(e),this.store=n,this.dispatcher=t,this.dispatcher.setContext(this),this.di=e,this.pubsub=r}}const sd=(0,a.V3)("commandLineRunner timingInfo"),id=(0,a.V3)("commandLineRunner executionEnd",{multi:!0});class ad extends Error{constructor(e){super(e),this.isSilent=!0,this.name=ad.errorName}}ad.errorName="SilentError";const cd=e=>!!e.isSilent,ud=(0,a.V3)("isDiChildContainer");class ld extends gn{constructor(e,t){super(void 0,t),this.root=e,this.register({provide:ur,useValue:this,scope:d.s.REQUEST}),this.register({provide:ud,useValue:!0})}getRecord(e){return super.getRecord(e)||this.root.getRecord(e)}getValue(e){return this.recordValues.has(e)?this.recordValues.get(e):e.scope!==d.s.SINGLETON&&e.factory?hn:this.root.getValue(e)}hydrateDeps(e){return e.scope===d.s.REQUEST?super.hydrateDeps(e):super.hydrateDeps.call(this.root,e)}hydrate(e,t,r){return e.scope===d.s.REQUEST?super.hydrate(e,t,r):super.hydrate.call(this.root,e,t,r)}}const dd={init:[P.init,P.listen],close:[P.close],customer:[P.customerStart,P.resolveUserDeps,P.resolvePageDeps,P.generatePage,P.clear],spa:[P.resolveUserDeps,P.resolvePageDeps,P.spaTransition],afterSpa:[P.afterSpaTransition]},pd={server:dd,client:dd};let hd=class{};hd=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:x,scope:d.s.SINGLETON,useClass:class{constructor({lines:e,rootDi:t,logger:r,executionContextManager:n,executionEndHandlers:o}){this.executionContextByDi=new WeakMap,this.abortControllerByDi=new WeakMap,this.lines=e,this.rootDi=t,this.log=r("command:command-line-runner"),this.executionContextManager=n,this.executionEndHandlers=o}run(e,t,r,n,o){const s=null!=n?n:this.resolveDi(e,t,this.rootDi,r),i=s.get({token:oo,optional:!0});this.log.debug({event:"command-run",type:e,status:t});const a={};return s.register({provide:sd,useValue:a}),this.lines[e][t].reduce(((e,t)=>e.then((()=>{const e=t.toString();return a[e]={start:performance.now()},Promise.resolve().then((()=>this.executionContextManager.withContext(i,`command-line:${e}`,(async(e,r)=>{this.executionContextByDi.set(s,e),this.abortControllerByDi.set(s,r),await this.createLineChain(s,t)})))).finally((()=>{a[e].end=performance.now()}))}))),Promise.resolve()).finally((()=>{if(this.executionContextByDi.delete(s),this.abortControllerByDi.delete(s),this.executionEndHandlers)for(const r of this.executionEndHandlers)r(s,e,t,a,o)})).then((()=>s))}resolveDi(e,t,r,n){let o=r;return"customer"===t&&"client"!==e&&(o=function(e,t){const r=new ld(e);return r}(o)),n&&n.forEach((e=>o.register(e))),o}resolveExecutionContextFromDi(e){var t;return null!==(t=this.executionContextByDi.get(e))&&void 0!==t?t:null}createLineChain(e,t){let r;try{if(r=e.get({token:t,optional:!0}),null===r)return Promise.resolve()}catch(t){return this.log.error(t),this.throwError(t,e)}return Array.isArray(r)?Promise.all(r.map((r=>this.instanceExecute(r,t,e)))):this.instanceExecute(r,t,e)}instanceExecute(e,t,r){if(!(e instanceof Function)){const r=new TypeError(`Expected function in line processing "commandLineListTokens.${t.toString()}", received "${e}".\n      Check that all commandLineListTokens subscribers return functions`);return void this.log.error({event:"line-error",error:r,line:t.toString()})}const{name:n=""}=e;return this.log.debug({event:"line-run",line:t.toString(),command:n}),Promise.resolve().then((()=>e())).catch((e=>{var o;this.log[cd(e)?"debug":"error"]({event:"line-error",error:e,line:t.toString(),command:n}),null===(o=this.abortControllerByDi.get(r))||void 0===o||o.abort(e),this.throwError(e,r)}))}throwError(e,t){throw"object"==typeof e&&(e.di=t),e}},deps:{lines:M,rootDi:ur,logger:E.Fp,executionContextManager:no,executionEndHandlers:{token:id,optional:!0}}}),(0,i.J)({provide:so,useFactory:({di:e,commandLineRunner:t})=>()=>t.resolveExecutionContextFromDi(e),deps:{di:ur,commandLineRunner:x}}),(0,i.J)({provide:M,scope:d.s.SINGLETON,useValue:pd})]})],hd);const fd={logger:{debug:mi(),info:mi(),error:mi()},resultTransform:e=>1===e.length?e[0]:e};class md{constructor(e){this.subscribers=new Map;const t={...fd,...e};this.logger=t.logger,this.resultTransform=t.resultTransform}subscribe(e,t){this.logger.debug("subscribe",e,t);let r=this.subscribers.get(e);return r?r.add(t):(r=new Set([t]),this.subscribers.set(e,r)),()=>r.delete(t)}publish(e,...t){this.logger.debug("publish",e,t);const r=this.subscribers.get(e);if(r&&r.size){const e=[];return r.forEach((r=>e.push(Promise.resolve(r(...t))))),Promise.all(e).then(this.resultTransform)}return Promise.resolve()}}let vd=class{};vd=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:Ri.eP,scope:d.s.SINGLETON,useFactory:e=>()=>new md({logger:e.logger("pubsub")}),deps:{logger:E.Fp}}),(0,i.J)({provide:Ri.k3,scope:d.s.REQUEST,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:Ri.eP}}),(0,i.J)({provide:Ri.Tm,scope:d.s.SINGLETON,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:Ri.eP}})]})],vd);let gd=class{};gd=(0,Kt.__decorate)([(0,n.Y)({providers:[]})],gd);const yd=[(0,i.J)({provide:O.E6,scope:d.s.REQUEST,useFactory:()=>{var e;let t;try{if(t=null===(e=document.getElementById("__TRAMVAI_STATE__"))||void 0===e?void 0:e.textContent,!t)throw Error("__TRAMVAI_STATE__ element is empty or missing");return JSON.parse(t)}catch(e){throw e instanceof Error&&(e.event="initial-state-parse-error",e.initialState=t,e.readyState=document.readyState,e.bodyComplete=!!window.__TRAMVAI_HTML_READY__),e}}}),(0,i.J)({provide:P.listen,useFactory:({commandLineRunner:e})=>function(){return e.run("client","customer")},deps:{commandLineRunner:x},multi:!0})],bd=(0,a.V3)("child-app isChildApp Di"),wd=(d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,d.s.SINGLETON,(0,kt.y)("action state execution in server")),Ed=(0,Tt.L)("actionTramvai",{serverState:{}}).on(wd,((e,t)=>({...e,serverState:t}))),Sd="__action_parameters__";function _d(e){return"tramvaiActionVersion"in e&&2===e.tramvaiActionVersion}class kd extends Error{constructor({message:e="Condition failed",conditionName:t,targetName:r,...n}){super(e),this.name=kd.errorName,this.conditionName=t,this.targetName=r,this.isSilent=!0,Object.assign(this,n)}}kd.errorName="ConditionFailError";const Td="global",Cd={};class Rd{constructor(e,t,r,n,o){var s;this.globalConditionals=e,this.payload=t,this.parameters=r,this.executionState=n,this.type=o,this.status=!0,this.forbiddenMarker=!1,this.key=null,o===Td&&(this.status="success"!==n.status),this.conditions=null!==(s=r.conditions)&&void 0!==s?s:Cd}check(){return this.globalConditionals.forEach((e=>{this.key=e.key,e.fn(this)})),this.getStatus()}setState(e){this.executionState.state[this.key]=e}getState(){return this.executionState.state[this.key]}forbid(){this.executionState.status="forbidden",this.executionState.forbiddenBy=this.key,this.forbiddenMarker=!0}allow(){this.status=!0}getStatus(){return!this.forbiddenMarker&&this.status}}var xd=r(96115);const Md={};var Pd=r(24034),Od=r.n(Pd),Ad=r(5103),Nd=r.n(Ad);const Id="@@global",Ld={},Dd={key:"pageServer",fn:e=>{e.conditions.pageServer&&e.type===Td&&e.forbid()}},jd=[(0,i.J)({provide:Di,useFactory:()=>(window.__TRAMVAI_DEFERRED_ACTIONS||(window.__TRAMVAI_DEFERRED_ACTIONS={}),{get:e=>window.__TRAMVAI_DEFERRED_ACTIONS[e],set(e,t){window.__TRAMVAI_DEFERRED_ACTIONS[e]=t},has:e=>e in window.__TRAMVAI_DEFERRED_ACTIONS,forEach(e){Object.keys(window.__TRAMVAI_DEFERRED_ACTIONS).forEach((t=>{e(window.__TRAMVAI_DEFERRED_ACTIONS[t],t)}))}})})];let Fd=class{};Fd=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:O.Ym,multi:!0,useValue:Ed}),(0,i.J)({provide:Oi,scope:d.s.SINGLETON,useClass:class{constructor({actionsList:e}){this.actions=new Map([[Id,_a()(e)]])}add(e,t){const r=Nd()(t);this.actions.set(e,zi()(this.actions.has(e)?[...this.actions.get(e),...r]:r))}get(e,t){return zi()([...this.actions.get(e)||[],...t||[]])}getGlobal(){return this.actions.get(Id)}remove(e,t){if(!t)return void this.actions.delete(e);const r=Nd()(t);this.actions.has(e)&&this.actions.set(e,Od()(this.actions.get(e),r))}},deps:{actionsList:l.I7}}),(0,i.J)({provide:Ai,scope:d.s.REQUEST,useClass:class{constructor({store:e,context:t,deferredActionsMap:r,di:n,executionContextManager:o,actionConditionals:s,transformAction:i}){this.actionConditionals=_a()(null!=s?s:[]),this.context=t,this.store=e,this.deferredActionsMap=r,this.di=n,this.executionContextManager=o,this.execution=new Map,this.transformAction=i||Sl();const a=e.getState(Ed);a&&a.serverState&&Co()(((e,t)=>{this.execution.set(t,e)}),a.serverState)}async runInContext(e,t,...r){var n;const o=r[0],s=!0===(null==e?void 0:e.values.pageActions)?Td:"local",i=this.getActionParameters(t);if(!i)throw new Error("Cannot resolve internal data for action. Make sure you are using the result of `declareAction` call as an action");const a=this.getExecutionState(i.name);if(!this.canExecuteAction(o,i,a,s))return"reject"===i.conditionsFailResult?Promise.reject(new kd({conditionName:null!==(n=a.forbiddenBy)&&void 0!==n?n:"unknown",targetName:i.name})):Promise.resolve();const c=i.deferred;if(c&&!this.deferredActionsMap.get(t.name)){const e=new xd.B;e.promise.catch((()=>{})),this.deferredActionsMap.set(t.name,e)}return a.status="pending",this.executionContextManager.withContext(e,{name:i.name,values:!0===(null==e?void 0:e.values.pageActions)?{pageActions:!1}:void 0},((n,s)=>{const u=this.createActionContext(e,n,s,i);return Promise.resolve().then((()=>{if(_d(t)){const e=t.fn.apply(u,r),n=this.deferredActionsMap.get(t.name);return c?(n.isResolved()||n.isRejected()||!Gr()(e)||e.then(n.resolve).catch(n.reject),Promise.resolve()):e}return t(this.context,o,u.deps)})).then((e=>(a.status="success",e))).catch((e=>{throw a.status="failed",e}))}))}async run(e,...t){return this.runInContext(null,e,...t)}canExecute(e){const t=this.getActionParameters(e),r=this.getExecutionState(t.name);return this.canExecuteAction(void 0,t,r,Td)}getActionParameters(e){let t;return _d(e)?t=e:(this.transformAction(e),t=(e=>e[Sd])(e)),t}getExecutionState(e){let t=this.execution.get(e);return t||(t={status:"pending",state:{}},this.execution.set(e,t)),t}canExecuteAction(e,t,r,n){return new Rd(this.actionConditionals,e,t,r,n).check()}createActionContext(e,t,r,n){return{abortController:r,abortSignal:null==t?void 0:t.abortSignal,executeAction:this.runInContext.bind(this,t),deps:n.deps?this.di.getOfDeps(n.deps):Md,actionType:(null==e?void 0:e.values.pageActions)?"page":"standalone",dispatch:this.store.dispatch,getState:this.store.getState}}},deps:{actionConditionals:{token:Ii,optional:!0},context:dr,store:O.kR,di:ur,executionContextManager:no,transformAction:{token:"actionTransformAction",optional:!0},deferredActionsMap:Di}}),(0,i.J)({provide:Ni,scope:d.s.REQUEST,useClass:class{constructor(e){var t;this.deps=e,this.log=e.logger("action:action-page-runner"),this.isChildAppRunner=null!==(t=e.isChildAppRunner)&&void 0!==t&&t}runActions(e,t=(()=>!1)){return this.deps.executionContextManager.withContext(this.deps.commandLineExecutionContext(),{name:"pageActions",values:{pageActions:!0}},(async(r,n)=>{const o=this.deps.router.registerHook("beforeNavigate",(function(){return o(),n.abort("Page actions were aborted because of route changing"),Promise.resolve()}));await Promise.all(e.map((e=>Promise.resolve().then((()=>this.deps.actionExecution.runInContext(r,e,Ld))).catch((r=>{var n;if(!cd(r)){const t=_d(e)?e:e[Sd];this.log.error({error:r,event:"action-execution-error",message:`An error occurred during "${null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"unknown"}" action execution`})}if(t(r))throw r}))))).finally((()=>{o()}))}))}},deps:{actionExecution:Ai,executionContextManager:no,commandLineExecutionContext:so,store:O.kR,limitTime:Li,logger:E.Fp,deferredMap:Di,responseTaskManager:(0,a.jt)(Xt),serverResponseStream:(0,a.jt)(Zt),router:Mt.l1,isChildAppRunner:(0,a.jt)(bd)}}),(0,i.J)({provide:Li,useValue:500}),(0,i.J)({provide:Ii,multi:!0,useValue:[{key:"alwaysCondition",fn:e=>{e.conditions.always&&e.allow()}},{key:"onlyServer",fn:e=>{e.conditions.onlyServer&&e.forbid()}},{key:"onlyBrowser",fn:e=>{e.conditions.onlyBrowser}},Dd,{key:"pageBrowser",fn:e=>{e.conditions.pageBrowser&&e.type}},{key:"dynamicCondition",fn:e=>{e.conditions.dynamic&&(e.getState()&&"browser"!==e.getState().environment||e.allow(),e.setState({environment:"browser"}))}}]}),...jd]})],Fd);class Vd{constructor(e){(e=e||{}).stores=e.stores||[],this.stores={},this.handlers={},e.stores.forEach((e=>{this.registerStore(e)}))}createContext(e,t,r){return new nd(this,e,t,r)}hasStore(e){return!!this.stores[e.storeName]}registerStore(e){const{storeName:t}=e;this.stores[t]&&this.stores[t]===e||(this.stores[t]=e,e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.registerHandler(r,t,n)})))}unregisterStore(e){const{storeName:t}=e;this.stores[t]&&(delete this.stores[t],e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.unregisterHandler(r,t,n)})))}getStoreName(e){return"string"==typeof e?e:e.storeName}registerHandler(e,t,r){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push({name:t,handler:r})}unregisterHandler(e,t,r){Array.isArray(this.handlers[e])&&(this.handlers[e]=this.handlers[e].filter((e=>!(e.name===t&&e.handler===r))))}}let Bd=class{};Bd=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:O.qb,scope:d.s.SINGLETON,useFactory:({stores:e})=>{return t={stores:e&&_a()(e)},new Vd(t);var t},deps:{stores:O.Ym}}),(0,i.J)({provide:O.jm,scope:d.s.REQUEST,useFactory:({dispatcher:e,initialState:t,middlewares:r})=>e.createContext({},t,[()=>e=>t=>e(t),..._a()(r||[])]),deps:{dispatcher:O.qb,middlewares:{token:O.PU,optional:!0},initialState:{token:O.E6,optional:!0}}}),(0,i.J)({provide:O.kR,scope:d.s.REQUEST,useFactory:({dispatcherContext:e})=>({getState:e.getState.bind(e),dispatch:e.dispatch.bind(e),subscribe:e.subscribe.bind(e)}),deps:{dispatcherContext:O.jm}})]})],Bd);const Ud=(0,a.V3)("cacheMetricsServer");var qd=r(56868),$d=r.n(qd);const Hd=(0,a.V3)("_cachesList"),Jd=(0,a.V3)("cache names list");let zd=class{};zd=(0,Kt.__decorate)([(0,n.Y)({providers:[{provide:Hd,scope:d.s.SINGLETON,useValue:[]},(0,i.J)({provide:io,scope:d.s.SINGLETON,useFactory:function({caches:e,cacheNames:t,metrics:r}){return function(t="memory",r){const n=function(e,t){return{type:e,max:100,...t}}(t,r),o=function(e="memory",t){return new($d())(t)}(t,n);return e.push(o),o}},deps:{caches:Hd,cacheNames:{token:Jd,optional:!0},metrics:{token:Ud,optional:!0}}}),(0,i.J)({provide:co,scope:d.s.SINGLETON,useFactory:({caches:e,onCacheClear:t})=>r=>(e.forEach((e=>e.clear())),t?Promise.all(t.map((e=>e(r)))):Promise.resolve()),deps:{caches:Hd,onCacheClear:{token:ao,optional:!0}}})]})],zd);class Gd extends Error{constructor({message:e="Execution Abort",contextName:t,...r}={}){super(e),this.name=Gd.errorName,this.contextName=t,Object.assign(this,r)}}Gd.errorName="ExecutionAbortError";const Yd={},Kd=(0,a.V3)("tramvai tapable hook factory");class Wd{constructor(e){this.plugins=new Set,this.wrappers=new Set,this.name=e}tap(e,t){const r={name:e,fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}call(e){const t=Array.from(this.wrappers).reverse(),r=Array.from(this.plugins.values()),n={};let o,s=-1;const i=e=>{if(s++,s<t.length)return(0,t[s])(n,e,i);if(s===t.length)for(const t of r)o=t.fn(n,e,o);return o};return i(e)}wrap(e){this.wrappers.add(e)}}class Qd{constructor(e){this.plugins=new Set,this.wrappers=new Set,this.name=e}tap(e,t){const r={name:e,fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}tapPromise(e,t){const r={name:e,options:{type:"promise"},fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}tapAsync(e,t){const r={name:e,options:{type:"async"},fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}callPromise(e){const t=Array.from(this.wrappers).reverse(),r=Array.from(this.plugins.values()),n={};let o,s=-1;const i=async e=>{if(s++,s<t.length)return(0,t[s])(n,e,i);if(s===t.length)for(const t of r)"options"in t?"promise"===t.options.type?o=await t.fn(n,e,o):"async"===t.options.type&&(o=await new Promise(((r,s)=>{t.fn(n,e,o,((e,t)=>{e?s(e):r(t)}))}))):o=t.fn(n,e,o);return o};return i(e)}wrap(e){this.wrappers.add(e)}}class Zd{constructor(e){this.plugins=new Set,this.wrappers=new Set,this.name=e}tap(e,t){const r={name:e,fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}tapPromise(e,t){const r={name:e,options:{type:"promise"},fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}tapAsync(e,t){const r={name:e,options:{type:"async"},fn:t};return this.plugins.add(r),()=>{this.plugins.delete(r)}}callPromise(e){const t=Array.from(this.wrappers).reverse(),r=Array.from(this.plugins.values()),n={};let o=-1;const s=async e=>{if(o++,o<t.length)return(0,t[o])(n,e,s);o===t.length&&await Promise.all(r.map((t=>{if("options"in t){if("promise"===t.options.type)return t.fn(n,e);if("async"===t.options.type)return new Promise(((r,o)=>{t.fn(n,e,void 0,((e,t)=>{e?o(e):r(t)}))}))}return t.fn(n,e)})))};return s(e)}wrap(e){this.wrappers.add(e)}}const Xd=o({name:"TramvaiHookModule",providers:[(0,i.J)({provide:Kd,scope:d.s.SINGLETON,useClass:class{createSync(e){return new Wd(e)}createAsync(e){return new Qd(e)}createAsyncParallel(e){return new Zd(e)}}}),(0,i.J)({provide:Us,scope:d.s.SINGLETON,useClass:class{constructor(){this.hooks=Object.create(null)}registerHooks(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e]=zi()(this.hooks[e].concat(t))}runHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;let s=r;for(let e=0;e<o.length;e++)s=o[e](t,s,n);return s}runAsyncHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;for(let e=0;e<o.length;e++){const s=o[e];setTimeout((()=>{s(t,r,n)}))}return r}runPromiseHooks(e,t,r){const n=this.hooks[e];return e=>{if(!n)return Promise.resolve(e);let o=0;return Promise.resolve(e).then((function e(s){const i=n[o++];return i?Promise.resolve(i(t,s,r)).then(e):s}))}}}})]});let ep=class{};ep=(0,Kt.__decorate)([(0,n.Y)({imports:[Xd,hd,tl,vd,bl,gl,Fd,Bd,Yl,Xl,zd,gd],providers:[(0,i.J)({provide:wl,scope:d.s.SINGLETON,useClass:class{constructor({componentList:e}={}){this.components={[Hl]:Object.assign({},..._a()(null!=e?e:[]))}}add(e,t,r=Hl){const n=this.components[r]||{};n[e]=t,this.components[r]=n}get(e,t=Hl){return(this.components[t]||{})[e]||this.components[Hl][e]}getComponentParam(e,t,r,n){return Fi()([e],t,this.get(r,n))}},deps:{componentList:{token:"componentDefaultList",optional:!0}}}),(0,i.J)({provide:_u,scope:d.s.SINGLETON,useFactory:({additionalBundleList:e,...t})=>(null==e||e.forEach((e=>{Ht()(((e,r)=>{r in t.bundleList||(t.bundleList[r]=()=>Promise.resolve({default:e}))}),e)})),new $l(t)),deps:{bundleList:l.om,additionalBundleList:{token:ku,optional:!0},componentRegistry:wl,logger:E.Fp}}),(0,i.J)({provide:dr,scope:d.s.REQUEST,useFactory:function({di:e,dispatcherContext:t,pubsub:r,store:n}){return new od({di:e,dispatcherContext:t,pubsub:r,store:n})},deps:{di:ur,pubsub:Ri.k3,dispatcherContext:O.jm,store:O.kR}}),(0,i.J)({provide:no,scope:d.s.SINGLETON,useClass:class{async withContext(e,t,r){const n=(e=>"string"==typeof e?{name:e}:e)(t),{name:o,values:s=Yd}=n,i=e?`${e.name}.${o}`:o;if(null==e?void 0:e.abortSignal.aborted)throw new Gd({message:`Execution aborted in context "${i}"`,reason:e.abortSignal.reason,contextName:i});const a=new AbortController;let c,u=s;e&&(u={...e.values,...s},c=e=>{a.abort(e.target.reason)},e.abortSignal.addEventListener("abort",c));const l={name:i,abortSignal:a.signal,values:u};try{return await r(l,a)}catch(e){throw null===e||"object"!=typeof e||e.executionContextName||(e.executionContextName=l.name),e}finally{void 0!==c&&e&&e.abortSignal.removeEventListener("abort",c)}}}}),...yd]})],ep);const tp={react:r(44121),"react-dom":r(90776)};window.__externals=Object.assign(window.__externals||{},tp);const rp={trace:mi(),debug:mi(),info:mi(),warning:mi(),error:mi()},np=(e,t,r={},n={})=>{const o=document.createElement("link");return Object.assign(o,r,{rel:e,href:t}),o.dataset.critical="true",new Promise(((e,r)=>{o.onerror=o=>n.resolveOnFailed?e(o):r(new Error(`could not load link ${t}`)),"onload"in o?o.onload=e:setTimeout(e,50),document.head.appendChild(o)}))},op=(e,t={},r)=>{const n=document.createElement("script");return Object.assign(n,t,{async:!0,src:e}),n.dataset.critical="true",r&&r(n),new Promise(((t,r)=>{n.onerror=t=>r(new Error(`could not load script ${e} ${t.message||t}`)),n.onload=t,document.head.appendChild(n)}))},sp=e=>null==e?void 0:e.replace(/^https?:/,""),ip=e=>jr()((t=>!!t.href&&(t.href===e||sp(t.href)===e)),document.styleSheets),ap=e=>document.querySelector(`[data-href="${e}"]`);class cp{constructor(e={}){this.log=e.log||rp}isLoaded(e){return!!this.get(e)}get(e){return(e=>{if(window.__externals&&window.__externals[e])return window.__externals[e]})(e.name)}load(e){const t=e.name;let r=this.get(e);if(r)return this.log.debug(`module "${t}" returned from cache`),r;this.log.debug(`module "${t}" will be fetched`);const n=()=>(r=this.get(e),r?(this.log.debug(t,"loaded"),Promise.resolve(r)):(this.log.error(`cannot find module ${t}`),Promise.reject(new Error(`Error resolving module ${t}`))));return function(e,t={}){const r=(n=e,jr()((e=>{const t=!!e.src&&(e.src===n||sp(e.src)===n),r=!!e.dataset.src&&(e.dataset.src===n||sp(e.dataset.src)===n);return t||r}),document.scripts));var n;if(r){const e=r.getAttribute("loaded");return e?"true"===e?Promise.resolve():Promise.reject():new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)}))}return Promise.all([op(e,{crossOrigin:"anonymous"},(e=>{e.addEventListener("load",(()=>e.setAttribute("loaded","true"))),e.addEventListener("error",(()=>e.setAttribute("loaded","error")))})),!t.cssUrl||ip(t.cssUrl)||ap(t.cssUrl)?Promise.resolve():np("stylesheet",t.cssUrl,{crossOrigin:"anonymous"},{resolveOnFailed:t.resolveOnCssFailed})])}(e.js,{cssUrl:e.css}).then(n,n)}}const up=e=>`${-1===e.indexOf("localhost")?"https":"http"}://${e.replace(/\/$/,"")}`;var lp=r(46669),dp=r(95493),pp=r(10831),hp=r(81510),fp=r.n(hp);const mp=jr()(go()(fp()("type","headerSlim"),fp()("type","header"))),vp=ho()(ko()("properties"),mp),gp=e=>{const t={...e};return e.method&&(t.path=e.method,delete t.method),e.httpMethod&&(t.method=e.httpMethod,delete t.httpMethod),e.payload&&(t.method&&"GET"!==t.method.toUpperCase()&&"DELETE"!==t.method.toUpperCase()?(t.body=e.payload,delete t.payload):(t.query=e.query?{...e.query,...e.payload}:e.payload,delete t.payload)),t},yp=(0,a.V3)("dynamicPubsubSubscriptions",{multi:!0});let bp=class{};var wp;bp=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:Ri.k3,useFactory:({createPubsub:e})=>{const t=e(),r=t.subscribe.bind(t),n=t.publish.bind(t);return{fallback:!0,subscribe:(e,t)=>f()(e)?r(e,t):r(e.type,(e=>Promise.resolve(t(e)).then((e=>[e])))),publish:(e,...t)=>f()(e)?n(e,...t):n(e.type,e.payload)}},deps:{createPubsub:Ri.eP}}),(0,i.J)({provide:P.customerStart,scope:d.s.REQUEST,useFactory:e=>function(){(({pubsub:e,pubsubSubscriptions:t,pageService:r,papiClient:n,tinkoffApi:o,authenticator:s,resourceLoader:i})=>{const a=Object.assign({"Tinkoff:get:currentRoute":()=>(0,pp.Y)(r.getCurrentRoute(),r.getCurrentUrl()),"Tinkoff:module:request:platform":e=>n.request(gp(e)).then((({payload:e})=>e)),"Tinkoff:module:navigate":e=>r.navigate(e),"Tinkoff:get:headerVariations":()=>{const e=r.getContent();return e?vp(e.content):{}},"Tinkoff:module:request:tinkoff":e=>o.request((e=>{const{query:t={},sessionid:r,wuid:n,...o}=gp(e),s={};return r&&(s.sessionid=r),n&&(s.wuid=n),{...o,query:{...s,...t}}})(e)).then((({payload:e})=>e)),"Tinkoff:module:actions:logout":()=>null==s?void 0:s.logout(),"Tinkoff:module:request:resources":({name:e,httpMethod:t,useCache:r=!0,timeout:n})=>i.getResources(e,{method:t,cache:r,timeout:n})},..._a()(t||[]));Ht()(((t,r)=>{e.subscribe(r,((...e)=>Promise.resolve(t(...e)).then((e=>[e]))))}),a)})(e)},multi:!0,deps:{pubsub:Ri.k3,pageService:Mt.Y9,papiClient:ro.J2,tinkoffApi:Pn,pubsubSubscriptions:{token:yp,optional:!0,multi:!0},authenticator:{token:qs,optional:!0},resourceLoader:Tn,store:O.kR}})]})],bp);let Ep=wp=class{static forRoot({pubsubSubscriptions:e}){return{mainModule:wp,providers:[{provide:yp,multi:!0,useValue:e}]}}};Ep=wp=(0,Kt.__decorate)([(0,n.Y)({imports:[bp],providers:[{provide:"createDynamicModulesLoader",useFactory:({logger:e})=>new cp({log:e("dynamic-components")}),deps:{logger:E.Fp},scope:d.s.SINGLETON},{provide:"dynamicModulesLoader",useFactory:({store:e,loader:t,logger:r})=>(n,o)=>{const s=r("dynamic-components"),{modulesConfig:i}=e.getState(lp.jB),{featureToggle:a}=e.getState(),c=((e,t,r,n={})=>{const o=ko()(t,e);if(!o)return null;!r&&ko()(`module:${t}:beta`,n)&&(r=o.beta),r||(r=o.latest);const s=o.path||e.clientPath||e.defaultPath,i=o.path||e.serverPath||e.defaultPath;if(!s||!i)return null;const a=i.replace(/\/$/,""),c=`${s.replace(/\/$/,"")}/${t}/${r}`,u=`${a}/${t}/${r}`;return{name:`${t}`,version:`${r}`,js:up(`${c}/${t}_client.js`),css:o.withoutCSS?void 0:up(`${c}/${t}.css`),serverJs:up(`${u}/${t}_server.js`)}})(i,n,o,a);if(c)return t.load(c);s.error(`module ${n} is not found in moduleConfig`)},deps:{loader:"createDynamicModulesLoader",store:O.kR,logger:E.Fp}},{provide:Pi.Qv,useFactory:({loader:e})=>{const t={loader:e};return e=>(0,Fu.jsx)(dp._.Provider,{value:t,children:e})},deps:{loader:"dynamicModulesLoader"},multi:!0},{provide:O.Ym,useValue:lp.jB,multi:!0},(0,i.J)({provide:P.customerStart,useFactory:({renderMode:e,store:t})=>"streaming"!==e?mi():function(){window.__TRAMVAI_MODULES_STATE&&window.__TRAMVAI_MODULES_STATE.forEach((e=>{t.dispatch((0,lp.tF)(e))}))},deps:{renderMode:(0,a.jt)(Pi.hM),store:O.kR}})]})],Ep);var Sp=r(29256),_p=r(87514),kp=r(35351),Tp=r(37527),Cp=r(8837),Rp=r(98873),xp=r.n(Rp),Mp=r(48001);const Pp=ho()(ui()("auth"),Fi()(["query"],{})),Op=xp()(((e,t)=>{var r;const n=(0,pp.Y)(e,t);return{...n,url:null===(r=n.parsedUrl)||void 0===r?void 0:r.path}}),((e,t)=>e===t)),Ap=ho()((Np={openModal:{token:kp.aP,optional:!0},transformConfig:{token:kp.Ti,optional:!0},pubsub:Ri.k3,handleMetrics:{token:kp.u4,optional:!0}},e=>kl()((function(t){const r=(0,Gu.x)(Np);return(0,Fu.jsx)(e,{...t,...r})}),e)),(e=>{const t=({uiModulesConfig:{footerConfig:e},router:{currentRoute:t,currentUrl:r},roles:n,featureToggle:o})=>({isAuth:(0,Un.QO)(n),isPreAuth:Pp(r)||!1,isClient:(0,Un.C5)(n),currentRoute:Op(t,r),footerConfig:e,featureToggle:o,userRoles:n,inheritedPhone:t.config.footerPhone});return function(r){var n;const o=(0,Uu.v)(["uiModulesConfig","featureToggle","router",{store:"roles",optional:!0}],t),s=(0,Mp.C)(),i=null!==(n=r.transformConfig)&&void 0!==n?n:Sl(),a=r.handleMetrics||Sl();return(0,Fu.jsx)(e,{...r,...o,media:s,transformConfig:i,handleMetrics:a})}}));var Np;const Ip={style:{marginTop:"auto",minHeight:"1px"}},Lp=ho()(Vu.memo,Ap)((({variation:e,lazyWrapperProps:t,cacheKey:r,cacheEnabled:n,serverCache:o,...s})=>(0,Fu.jsx)(Tp.Y,{moduleName:"footer",lazy:!0,lazyWrapperProps:t||Ip,moduleProps:{...s,variation:(0,Cp.P)(e,s)}})));let Dp=class{};Dp=(0,Kt.__decorate)([(0,n.Y)({imports:[Sp.Gz],providers:[(0,i.J)({provide:kp.h_,useValue:Lp}),(0,i.J)({provide:_p.l,multi:!0,useValue:"footerConfig"})]})],Dp);var jp=r(38461);let Fp=class{};Fp=(0,Kt.__decorate)([(0,n.Y)({imports:[],providers:[]})],Fp);let Vp=class{};Vp=(0,Kt.__decorate)([(0,n.Y)({imports:[],providers:[]})],Vp);let Bp=class{};Bp=(0,Kt.__decorate)([(0,n.Y)({imports:[],providers:[]})],Bp);const Up=(e,t)=>function(r){const n=(0,Vu.useMemo)((()=>({style:{marginTop:"auto",minHeight:"1px"},"data-module-type":e})),[]);return(0,Fu.jsx)(t,{...r,variation:e,lazyWrapperProps:n})};var qp=r(78018);const $p=({children:e})=>{const t=(0,Mp.C)();return(0,Fu.jsx)(qp.MediaProvider,{value:t,children:e})};var Hp=r(90319),Jp=r.n(Hp);const zp=(0,a.V3)("makeHeaderFunctionToken"),Gp=[{provide:zp,useValue:(e,t)=>function(r){return(0,Fu.jsx)(t,{...r,variation:e})}},{provide:dc,multi:!0,useFactory:({HeaderComponent:e,makeHeaderFunc:t})=>({type:"headerSlim",component:t("headerSlim",e)}),deps:{HeaderComponent:jp.nm,makeHeaderFunc:zp}},{provide:dc,multi:!0,useFactory:({HeaderComponent:e,makeHeaderFunc:t})=>({type:"header",component:t("header",e)}),deps:{HeaderComponent:jp.nm,makeHeaderFunc:zp}},{provide:dc,multi:!0,useFactory:({FooterComponent:e})=>({type:"productFooter",component:Up("productFooter",e)}),deps:{FooterComponent:kp.h_}},{provide:dc,multi:!0,useFactory:({FooterComponent:e})=>({type:"advertFooter",component:Up("advertFooter",e)}),deps:{FooterComponent:kp.h_}},{provide:S.sQ,multi:!0,useValue:[{key:"TINKOFF_API",validator:g([m,v("/")])},{key:"SME_URL",validator:m,optional:!0}]},{provide:Pi.OQ,multi:!0,useValue:{wrappers:{layout:e=>t=>(0,Fu.jsx)("div",{className:Jp().layout_wrapper,children:(0,Fu.jsx)($p,{children:(0,Fu.jsx)(e,{...t})})})}}}];let Yp=class{};Yp=(0,Kt.__decorate)([(0,n.Y)({imports:[],providers:Gp})],Yp);const Kp=[{provide:P.customerStart,useFactory:()=>function(){window.self!==window.top||console.log("%c  ?     fb@tinkoff.ru \n     ?     frontend@tinkoff.ru","background-color: #ffdd2d; color: #333; ")},multi:!0}];let Wp=class{};Wp=(0,Kt.__decorate)([(0,n.Y)({imports:[dl,Ep,Dp,jp.Op,Fp,Vp,Bp,Yp],providers:Kp})],Wp);const Qp=(0,kt.y)("setPageError"),Zp=(0,Tt.L)("pageError",null).on(Qp,((e,t)=>t&&function(e){return{...e,message:e.message,stack:e.stack}}(t)));var Xp=r(96980);const eh=/Minified React error #(\d+);/;let th,rh;try{th=r(64054).a,rh=r(44121).startTransition}catch(e){}const nh=({children:e,callback:t})=>((0,Xp.L)(t,[]),e);var oh=r(13516),sh=r(90794);const ih=({context:e,children:t,serverState:r})=>(0,Fu.jsx)(sh.h.Provider,{value:e,children:(0,Fu.jsx)(sh.N.Provider,{value:r,children:t})});var ah=r(43158),ch=r(54143);const uh=()=>((0,ch.y)(),(0,Gu.x)(Mt.Y9));var lh=r(81935),dh=r(36840);const ph=e=>{const{children:t}=e,r=(0,Gu.x)(Mt.Y9),n=(0,lh.w)(),o=(0,dh.o)(Zp),s=(0,Vu.useMemo)((()=>o&&function(e){const t=new Error(e.message);return Object.assign(t,e),t}(o)),[o]),i=(0,Gu.x)({token:Yr,optional:!0}),a=(0,Gu.x)({token:Kr,optional:!0}),c=r.resolveComponentFromConfig("errorBoundary");return(0,Fu.jsx)(oh.E,{url:n,error:s,errorHandlers:i,fallback:c,fallbackFromDi:a,children:t})},hh=({children:e})=>{const t=uh(),r=t.resolveComponentFromConfig("layout"),n=t.resolveComponentFromConfig("header"),o=t.resolveComponentFromConfig("footer");return(0,Vu.useMemo)((()=>(0,Fu.jsx)(r,{Header:n,Footer:o,children:e})),[r,n,o,e])},fh=({children:e})=>{const t=uh().resolveComponentFromConfig("nestedLayout");return(0,Vu.useMemo)((()=>(0,Fu.jsx)(t,{children:e})),[t,e])},mh=()=>{const e=uh(),{pageComponent:t}=e.getConfig();let r=e.getComponent(t);return r||(r=()=>{throw new Error(`Page component '${t}' not found`)}),(0,Vu.useMemo)((()=>(0,Fu.jsx)(ph,{children:(0,Fu.jsx)(r,{})})),[r])},vh=()=>{const e=(0,Vu.useMemo)((()=>(0,Fu.jsx)(mh,{})),[]),t=(0,Vu.useMemo)((()=>(0,Fu.jsx)(fh,{children:e})),[e]);return(0,Fu.jsx)(hh,{children:t})},gh=({extendRender:e,di:t,consumerContext:r})=>{let n=function({di:e},t){const r=e.get({token:O.E6,optional:!0});return(0,Fu.jsx)(ih,{context:t,serverState:null==r?void 0:r.stores,children:(0,Fu.jsx)(ah.n.Provider,{value:e,children:(0,Fu.jsx)(vh,{})})})}({di:t},r);return e&&ss()((e=>{n=e(n)}),e),n},yh=({extendRender:e,useStrictMode:t,di:r,consumerContext:n})=>{let o=gh({di:r,consumerContext:n,extendRender:e});return t&&(o=(0,Vu.createElement)(Vu.StrictMode,null,o)),o},bh=({defaultErrorBoundary:e,di:t,consumerContext:r,extendRender:n,customRender:o,useStrictMode:s})=>{const i={di:t,consumerContext:r,extendRender:n,customRender:o,useStrictMode:s},a=t.get({token:Yr,optional:!0}),c=t.get({token:Kr,optional:!0});return(0,Fu.jsx)(oh.E,{fallback:e,errorHandlers:a,fallbackFromDi:c,children:(0,Fu.jsx)(yh,{...i})})};const wh=e=>Array.isArray(e)?e:[e],Eh=(e,t)=>wh(null!=t?t:[]).reduce(((e,t)=>t(e)),e),Sh=({children:e})=>e,_h=({children:e,...t})=>e(t),kh=({children:e})=>e;let Th=class{};Th=(0,Kt.__decorate)([(0,n.Y)({providers:[{provide:Pi.MV,scope:d.s.SINGLETON,useFactory:({layoutOptions:e})=>{var t;return(({components:e={},wrappers:t={}}={})=>{const{header:r=_h,footer:n=_h,layout:o=Sh,content:s=Sh,page:i=Sh,...a}=e,c=Eh(o,t.layout),u=Eh(s,t.content),l=Eh(i,t.page),d=Eh(r,t.header),p=Eh(n,t.footer),h=Object.keys(a).map((e=>({name:e,Component:Eh(a[e],t[e])}))),f=({children:e,Header:t,Footer:r})=>(0,Fu.jsxs)(c,{children:[h.map((({Component:e,name:t})=>(0,Fu.jsx)(e,{},t))),(0,Fu.jsxs)(u,{children:[t?(0,Fu.jsx)(d,{children:e=>(0,Fu.jsx)(t,{...e})}):null,(0,Fu.jsx)(l,{children:e}),r?(0,Fu.jsx)(p,{children:e=>(0,Fu.jsx)(r,{...e})}):null]})]});return f.displayName="Layout",f})((t=e,_a()(null!=t?t:[]).reduce(((e,t)=>{const{components:r,wrappers:n}=e;return t.components&&Object.assign(r,t.components),t.wrappers&&Object.keys(t.wrappers).forEach((e=>{n[e]||(n[e]=[]),n[e].push(...wh(t.wrappers[e]))})),e}),{components:{},wrappers:{}})))},deps:{layoutOptions:{token:Pi.OQ,optional:!0}}},{provide:"componentDefaultList",scope:d.s.SINGLETON,multi:!0,useFactory:e=>({...e,nestedLayoutDefault:kh}),deps:{layoutDefault:Pi.MV,footerDefault:{token:Pi.mc,optional:!0},headerDefault:{token:Pi.fT,optional:!0},errorBoundaryDefault:{token:Pi.yX,optional:!0}}}]})],Th);const Ch=[(0,i.J)({provide:O.Ym,multi:!0,useValue:Zp}),(0,i.J)({provide:Pi.Ky,useValue:"ssr"})];var Rh;let xh=Rh=class{static forRoot({mode:e,useStrictMode:t}){const r=[];return"string"!=typeof e&&"boolean"!=typeof t||r.push({provide:Pi.d6,useValue:null!=t?t:"strict"===e}),{mainModule:Rh,providers:r}}};xh=Rh=(0,Kt.__decorate)([(0,n.Y)({imports:[Th],providers:[...Ch,(0,i.J)({provide:su,multi:!0,useFactory:({store:e})=>async()=>{e.getState(Zp)&&e.dispatch(Qp(null))},deps:{store:O.kR}}),(0,i.J)({provide:Pi.$j,useFactory:({logger:e})=>({getPageResources:()=>[],register:()=>{}}),deps:{logger:E.Fp}}),(0,i.J)({provide:P.generatePage,useFactory:e=>function(){return window.contextExternal=e.consumerContext,function({logger:e,consumerContext:t,customRender:n,extendRender:o,di:s,useStrictMode:i,rendererCallback:a,renderMode:c,defaultErrorBoundary:u}){const l=e("module-render");return new Promise(((e,d)=>{if(n)return n(gh({extendRender:o,di:s,consumerContext:t}));const p=e=>null==a?void 0:a.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),h={element:(0,Vu.createElement)(bh,{defaultErrorBoundary:u,extendRender:o,customRender:n,useStrictMode:i,consumerContext:t,di:s}),container:()=>document.querySelector(".application"),callback:()=>{l.debug("App rendering"),document.querySelector("html").classList.remove("no-js"),p(),e()},log:l,renderMode:c};try{(({element:e,container:t,callback:n,log:o,renderMode:s})=>{if("function"==typeof th){const r=(0,Vu.createElement)(nh,{callback:n},e);let i=new Map;const a=nl()(50,(()=>{if(0===i.size)return;const[{error:e,errorInfo:t},...r]=Array.from(i.values());i=new Map,o.error({event:"hydrate:recover-after-error",error:e,errorInfo:t,otherErrors:r})})),c=()=>rh((()=>{th(t(),r,{onRecoverableError:(e,t)=>{var r,n;const o=(null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"").match(eh),s=null!==(n=null==o?void 0:o[1])&&void 0!==n?n:null==e?void 0:e.message;i.has(s)||("string"==typeof(null==t?void 0:t.componentStack)&&(t.componentStack=t.componentStack.split("\n").slice(0,15).join("\n")),i.set(s,{error:e,errorInfo:t})),a()}})}));return void("streaming"===s?window.__TRAMVAI_DEFERRED_HYDRATION?c():window.__TRAMVAI_DEFERRED_HYDRATION=c:c())}const{hydrate:i}=r(90776);i(e,t(),n)})(h)}catch(e){p(e),d(e)}}))}(e)},deps:{logger:E.Fp,customRender:{token:Pi.p6,optional:!0},extendRender:{token:Pi.Qv,optional:!0},rendererCallback:{token:Pi.IF,optional:!0},consumerContext:dr,di:ur,useStrictMode:Pi.d6,renderMode:(0,a.jt)(Pi.hM),defaultErrorBoundary:(0,a.jt)(Pi.yX)},multi:!0}),(0,i.J)({provide:Pi.IF,useFactory:({consumerContext:e})=>()=>{e.di.register({provide:"__TRAMVAI_HYDRATED",useValue:!0})},deps:{consumerContext:dr}}),(0,i.J)({provide:Pi.d6,useFactory:({deprecatedMode:e})=>"strict"===e,deps:{deprecatedMode:Pi.QH}}),(0,i.J)({provide:Pi.QH,useValue:"legacy"}),(0,i.J)({provide:Pi.Cj,useFactory:({cookieManager:e})=>{const t=e.get("_t_modern");return("true"===t||"false"===t)&&JSON.parse(t)},deps:{cookieManager:er.T}}),(0,i.J)({provide:Pi.hM,useValue:"sync"})]})],xh);class Mh{constructor(){this.state=new Map}eachMeta(e){this.state.forEach(((t,r)=>e(t,r)))}updateStateByPriority(e,t){const r=this.state.get(e);(!r||t.priority>=r.priority)&&this.state.set(e,t)}updateMeta(e,t){return Ht()(((t,r)=>{(t||null===t)&&this.updateStateByPriority(r,{value:t,priority:e})}),t),this}get(e){return this.state.get(e)}reset(){this.state.clear()}getSerializableState(){return Array.from(this.state.entries())}mergeValuesFromSerializableState(e){e.forEach((([e,t])=>{this.updateStateByPriority(e,t)}))}}const Ph=(0,kt.y)("set application metaWalk state"),Oh=(0,Tt.L)("appMeta",{serverMetaWalkState:[]}).on(Ph,((e,t)=>({...e,serverMetaWalkState:t}))),Ah=e=>ui()("tag",e)?e:null;class Nh{constructor({list:e,transformValue:t=Sl(),converters:r={},metaWalk:n}){this.listSources=e,this.transformValue=t,this.converters=r,this.metaWalk=null!=n?n:new Mh}dataCollection(...e){this.listSources.map((t=>t(this.metaWalk,...e)));let t=[];return this.metaWalk.eachMeta(((e,r)=>{if(null!==e.value){const n=this.transformValue(e),o=(this.converters[r]||Ah)(n.value);o&&(t=t.concat(xo()(o)?o.filter(Sl()):o))}})),t}}const Ih="data-meta-dynamic",Lh=({tag:e,attributes:t,innerHtml:r})=>{const n=document.createElement(e);return r&&(n.innerHTML=r),t&&Ht()(((e,t)=>{n.setAttribute(t,e||"")}),t),n.setAttribute(Ih,"true"),n};class Dh{constructor(e){this.meta=e}patchMeta({head:e,addTags:t,removeTagsArray:r}){let n=!1;t.forEach((t=>{let o;if("title"===t.tagName.toLowerCase())o=r.find((e=>"title"===e.tagName.toLowerCase()));else if("meta"===t.tagName.toLowerCase()&&"robots"===t.getAttribute("name"))n=!0;else if("meta"===t.tagName.toLowerCase()){const e=t.getAttribute("name"),n=t.getAttribute("property");o=r.find((t=>"meta"===t.tagName.toLowerCase()&&(e&&t.getAttribute("name")===e||n&&t.getAttribute("property")===n)&&"robots"!==t.getAttribute("name")))}else"link"===t.tagName.toLowerCase()&&(o=r.find((e=>"link"===e.tagName.toLowerCase()&&"canonical"===e.getAttribute("rel")&&e.getAttribute("href")===t.getAttribute("href"))));o&&e.removeChild(o)})),n&&r.filter((e=>"robots"===e.getAttribute("name"))).forEach((t=>{e.removeChild(t)}))}update(e=!1){const t=document.head||document.querySelector("head"),r=this.meta.dataCollection().map(Lh),n=t.querySelectorAll(`[${Ih}]`),o=document.createDocumentFragment(),s=Array.from(n);e?this.patchMeta({head:t,addTags:r,removeTagsArray:s}):s.forEach((e=>t.removeChild(e))),r.forEach((e=>o.appendChild(e))),t.insertBefore(o,t.firstChild)}}var jh=r(24970),Fh=r.n(jh),Vh=r(18826),Bh=r.n(Vh);const Uh=Fh()(f(),Bh(),Sl()),qh=e=>e.priority>10?{priority:e.priority,value:Uh(e.value)}:e;var $h=r(95775),Hh=r.n($h);const Jh=Hh()(2,((e,t)=>t&&{tag:e,innerHtml:t})),zh=Hh()(2,((e,t)=>t&&{tag:"meta",attributes:{name:e,content:t}})),Gh=Hh()(2,((e,t)=>t&&{tag:"meta",attributes:{property:e,content:t}})),Yh=Hh()(2,((e,t)=>t&&{tag:"link",attributes:{rel:e,href:t}})),Kh=[zh("robots","noindex, follow"),zh("robots","noarchive")],Wh=[zh("robots","index, nofollow"),zh("robots","noarchive")],Qh=[zh("robots","none"),zh("robots","noindex, nofollow"),zh("robots","noarchive")],Zh={all:[zh("robots","all"),zh("robots","index, follow"),zh("robots","noarchive")],noindex:Kh,"noindex, follow":Kh,nofollow:Wh,"index, nofollow":Wh,none:Qh,"noindex, nofollow":Qh},Xh={title:Jh("title"),description:zh("description"),keywords:zh("keywords"),canonical:Yh("canonical"),viewport:zh("viewport"),ogTitle:Gh("og:title"),ogDescription:Gh("og:description"),ogSiteName:Gh("og:site_name"),ogUrl:Gh("og:url"),ogType:Gh("og:type"),ogImage:Gh("og:image"),ogImageSecure:Gh("og:image:secure_url"),ogImageType:Gh("og:image:type"),ogImageAlt:Gh("og:image:alt"),ogImageWidth:Gh("og:image:width"),ogImageHeight:Gh("og:image:height"),ogLocale:Gh("og:locale"),twitterTitle:zh("twitter:title"),twitterDescription:zh("twitter:description"),twitterCard:zh("twitter:card"),twitterSite:zh("twitter:site"),twitterCreator:zh("twitter:creator"),twitterImage:zh("twitter:image"),twitterImageAlt:zh("twitter:image:alt"),robots:e=>Zh[e]},ef=(0,i.J)({provide:Dt,useFactory:({di:e})=>function({metaObj:t}={}){const r=e.get(It);t&&r.updateMeta(20,t);const n=new Nh({list:_a()(e.get({token:Lt,optional:!0,multi:!0})||[]),metaWalk:r,transformValue:qh,converters:Xh});new Dh(n).update()},deps:{di:ur}}),tf=(e,t={})=>{const r={};return Object.keys(t).forEach((n=>{var o;r[e+(o=n,`${o.charAt(0).toUpperCase()}${o.slice(1)}`)]=t[n]})),r},rf=[ef,{provide:It,useClass:Mh},{provide:Nt,useValue:{title:"Tramvai"}},{provide:Lt,multi:!0,useFactory:({defaultMeta:e})=>{return t=e,e=>{e.updateMeta(0,t)};var t},deps:{defaultMeta:Nt}},(0,i.J)({provide:Lt,useFactory:({pageService:e})=>t=>{const r=e.getMeta().seo||{},{pageComponent:n}=e.getConfig()||{},o=e.getComponent(n),s=o&&o.seo||{},i=He()({},r,s),a=i.shareSchema||{},c={...i.metaTags,...tf("twitter",a.twitterCard),...tf("og",a.openGraph)};t.updateMeta(10,c)},multi:!0,deps:{pageService:Mt.Y9}}),{provide:Lt,multi:!0,useFactory:({context:e,metaList:t})=>{const r=_a()(t||[]);return t=>{r.forEach((r=>r(e,t)))}},deps:{context:dr,metaList:{token:"metaList",optional:!0}}},(0,i.J)({provide:O.Ym,multi:!0,useValue:Oh})];var nf;let of=nf=class{static forRoot(e){if(xo()(e))return{mainModule:nf,providers:[{provide:"metaList",useValue:e,multi:!0}]};const{metaUpdaters:t,metaDefault:r}=e,n=[];return r&&n.push({provide:Nt,useValue:r}),t&&n.push({provide:Lt,useValue:t,multi:!0}),{providers:n,mainModule:nf}}};of=nf=(0,Kt.__decorate)([(0,n.Y)({providers:[...rf,(0,i.J)({provide:"router beforeNavigateHooks",multi:!0,useFactory:({metaWalk:e})=>()=>{e.reset()},deps:{metaWalk:It}}),(0,i.J)({provide:id,scope:d.s.SINGLETON,multi:!0,useFactory:({applyMeta:e})=>function(t,r,n){if("client"===r&&("afterSpa"===n||"customer"===n)){const r=t.get(It);if("customer"===n){const e=t.get({token:O.E6,optional:!0});r.mergeValuesFromSerializableState(e.stores.appMeta.serverMetaWalkState)}e()}},deps:{applyMeta:Dt}})]})],of);const sf=(0,a.V3)("metricsModule"),af=e=>Math.round(e)/1e3,cf=e=>t=>e.test(t),uf=cf(/\.js$/),lf=cf(/\.css$/),df=cf(/\.(?:svg|png|jpeg|webp|jpg)$/),pf=cf(/\.(?:woff|eot|woff2|ttf)/);var hf;!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(hf||(hf={}));const ff=(e,t)=>{if(e.getEntriesByType)return e.getEntriesByType(t)},mf=e=>{const t=ff(e,"paint");return t&&t[0]?t[0].startTime:0},vf=(e,t)=>e&&e[t]||0,gf=(e,t)=>({duration:vf(e,"duration")+af(t.duration),transferSize:vf(e,"transferSize")+t.transferSize,encodedBodySize:vf(e,"encodedBodySize")+t.encodedBodySize});class yf{constructor(e){}get(){}inc(){}reset(){}remove(){}labels(){return{inc(){}}}}class bf{constructor(e){}get(){}inc(){}dec(){}set(){}setToCurrentTime(){}reset(){}remove(){}startTimer(e){return e=>0}labels(){return{inc(){},dec(){},set(){},setToCurrentTime(){},startTimer:()=>e=>0}}}class wf{constructor(e){}get(){}observe(){}startTimer(e){return e=>0}reset(){}remove(){}labels(){return{observe(){},startTimer:()=>()=>0}}zero(){}}class Ef{constructor(e){}get(){}observe(){}startTimer(){return e=>0}reset(){}labels(e){return{observe(){},startTimer:()=>e=>0}}remove(){}}const Sf=(0,kt.y)("set instant metrics map"),_f=(0,Tt.L)("instantMetrics",{instantMetricsMap:{}}).on(Sf,((e,t)=>t)),kf=[{provide:O.Ym,multi:!0,useValue:[_f]}];let Tf=class{};Tf=(0,Kt.__decorate)([(0,n.Y)({providers:[...kf,{provide:P.init,scope:d.s.SINGLETON,multi:!0,useFactory({logger:e,papiService:t,context:r}){if(!t)return()=>{};const n=r.getStore("instantMetrics").getState().instantMetricsMap,o=new p.RemoteReporter({requestCount:1,emitLevels:{trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},makeRequest:e=>n[e.event]?t.request({path:`metrics/${e.event}`,method:"post",payload:e.value?{value:e.value}:{}}).then((({payload:e})=>e)):Promise.resolve()});return()=>{e.addReporter(o)}},deps:{papiService:{token:ro.J2,optional:!0},context:dr,logger:E.Fp}}]})],Tf);let Cf=class{};Cf=(0,Kt.__decorate)([(0,n.Y)({imports:[Tf],providers:[{provide:sf,useFactory:()=>({counter:e=>new yf({...e}),gauge:e=>new bf({...e}),histogram:e=>new wf({...e}),summary:e=>new Ef({...e})}),scope:d.s.SINGLETON},{provide:P.init,useFactory:({logger:e,pageService:t})=>()=>{window.addEventListener("load",(()=>{setTimeout((()=>{var r,n;const o=function(){let e;try{if(e=window.performance,!e.timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}const{requestStart:t,responseStart:r,responseEnd:n,domComplete:o,loadEventEnd:s,domInteractive:i,navigationStart:a}=e.timing,c=[{key:"connection",start:a,end:t},{key:"backend",start:t,end:r},{key:"pageDownload",start:r,end:n},{key:"first-paint",start:0,end:mf(e)},{key:"domInteractive",start:a,end:i},{key:"domComplete",start:a,end:o},{key:"pageLoadTime",start:a,end:s}],u={};return c.forEach((e=>{const t=af(e.end-e.start);u[e.key]=t>0||t<2e3?t:void 0})),u.download=(e=>{const t={},r=ff(e,"resource");if(r&&r.length>0){const e={};r.forEach((r=>{const n=(e=>{switch(!0){case lf(e):return hf.css;case uf(e):return hf.js;case df(e):return hf.img;case pf(e):return hf.font;default:return hf.other}})(r.name.split("?",1)[0]);hf[n]&&(e[n]||(e[n]=0),e[n]++,t[n]=gf(t[n],r),t[n].count=e[n])}))}const n=ff(e,"navigation");return n&&n.length>0&&(t[hf.html]=gf({},n[0])),t})(e),u}();e({name:"metrics:perf",defaults:{remote:{emitLevels:{info:!0}}}}).info({...o,event:"perf-timings",deviceType:-1!==(null===(r=navigator.userAgent)||void 0===r?void 0:r.indexOf("Mobi"))?"mobile":"desktop",urlMask:null===(n=t.getCurrentRoute())||void 0===n?void 0:n.path})}),0)}))},multi:!0,deps:{logger:E.Fp,pageService:Mt.Y9}}]})],Cf);const Rf=[{provide:Ft,useFactory:({appInfo:e})=>`/${e.appName}/papi`,deps:{appInfo:l.Qo}},{provide:Vt,useFactory:({appInfo:e})=>`/${e.appName}/private/papi`,deps:{appInfo:l.Qo}}];let xf=class{};xf=(0,Kt.__decorate)([(0,n.Y)({providers:[...Rf]})],xf);let Mf=class{};Mf=(0,Kt.__decorate)([(0,n.Y)({imports:[Cf,xf,...[!1].filter(Boolean)],providers:[]})],Mf);const Pf=[(0,i.J)({provide:Yr,useFactory:({logger:e})=>{const t=e("error-interceptor:error-boundary");return function(e,r){t.error({event:"component-did-catch",error:e,info:r})}},deps:{logger:E.Fp},multi:!0})];let Of=class{};Of=(0,Kt.__decorate)([(0,n.Y)({providers:[...Pf]})],Of);let Af=class{};Af=(0,Kt.__decorate)([(0,n.Y)({providers:[]})],Af);var Nf=r(73212),If=r(23436);const Lf={ios:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/react-kit-font/typography/ios.css",android:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/react-kit-font/typography/android.css",desktop:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/react-kit-font/typography/desktop.css"};let Df=class{};Df=(0,Kt.__decorate)([(0,n.Y)({providers:[(0,i.J)({provide:P.customerStart,useFactory:({userAgent:e,resourcesRegistry:t})=>()=>{var r;t.register({type:Nf.LO.style,slot:If.fu,payload:(r=e.mobileOS,r&&Lf[r]?Lf[r]:Lf.desktop),attrs:{"data-critical":"true"}})},multi:!0,deps:{userAgent:Cu,resourcesRegistry:Pi.$j}})]})],Df);const jf=(Ff={formDepositCard:{1.1:{npmVersion:"1.238.155"},"1.0":{npmVersion:"1.238.140"}},formKaskoUikit:{1.1:{npmVersion:"0.321.1"}},formSmeRegistration:{"1.0":{npmVersion:"0.50.1"}},formSmeRko:{"1.0":{npmVersion:"0.207.1"}},formSmeCashloan:{"1.0":{npmVersion:"0.147.3"}},formLoanUikit:{"1.0":{npmVersion:"1.352.0"}}},(0,i.J)({provide:hc,multi:!0,useFactory:({microfrontsBaseUrl:e})=>(0,du._q)(Ff,e),deps:{microfrontsBaseUrl:Tc}}));var Ff,Vf;const Bf={appInfo:l.Qo,userAgent:{token:Cu,optional:!0}},Uf={mobile:!0,wearable:!0};let qf=(0,n.Y)({providers:[(0,i.J)({provide:Tu,useFactory:({userAgent:e})=>function(){var t;const r="pwablog",n=null==e||null==(t=e.device)?void 0:t.type;return n&&Uf[n]?`m${r}`:r},deps:Bf})]})(Vf=class{})||Vf;var $f=r(37323),Hf=r(19799),Jf=r(77164),zf=r(84768),Gf=r(9019),Yf=r(46513),Kf=r(29198);function Wf(e,t){const{preset:r=zf.RQ}=e,{clientMedia:n}=t,o=parseInt(e.height,10);if(Number.isNaN(o))return;if(!function(e){return Object.values(Jf.Sk).includes(e)}(r))return;const s=(0,Hf.U)(n);if(r.toString()===Kf.Yi.Mobile){if(!s)return}else if(s)return;let i;try{i=function({src:e}){if("string"!=typeof e)throw new Error(`Invalid src value: ${e}`);if(e.endsWith(".gif"))return[e];const t="help_question_card_body_image_desktop_col_12";function r(r,n){const o=r?`${t}_${r}`:t,s=n?`${o} ${n}`:o;return(0,Yf.o)({preset:s,src:e})}return[r(),r(void 0,"1x"),r("x2","2x"),r("x3","3x"),r("x4","4x")]}({src:e.src})}catch(r){return void t.logger.error({error:r,message:`Failed to make opis url from ${e.src} for an image node`})}const a=i[0],[c,u]=function({height:e,preset:t}){return t.toString()===Kf.Yi.Mobile?[Gf.BC.phone["12col"],e]:[Gf.BC.desktop["12col"],e]}({height:o,preset:r});return{...e,height:u,width:c,preset:r,src:a,zoom:"true"===(null==e?void 0:e.zoom),srcSet:i.slice(1).join(", "),originalSrc:e.src,borderRadius:e.borderradius}}const Qf=["aside","td","td-aside","th","th-aside"];function Zf(e){function t(e,r){var n;if("text"===e.kind)return;let o=r;!function(e){return Kf.Tt.includes(e)}(e.size)?o&&(e.size=o):o=e.size,!o&&Qf.includes(e.kind)&&(o="m"),null==(n=e.children)||n.filter((e=>!!e)).forEach((e=>t(e,o)))}return e.forEach((e=>t(e,void 0))),e}const Xf=[Kf.Yi.Mobile,Kf.Yi.Desktop],em=Kf.Yi.Desktop;var tm=r(9891);function rm(e,t){const{preset:r=em,type:n,videoid:o}=e;if(n!==tm.Z.Cycled)return{...e,videoId:o};const{clientMedia:s}=t,i=parseInt(e.height,10);if(Number.isNaN(i))return;if(!function(e){return Xf.includes(e)}(r))return;const a=(0,Hf.U)(s);if(r===Kf.Yi.Mobile){if(!a)return}else if(a)return;return{...e,videoId:o}}const nm=(e,t)=>{var r;return{...e,...e.kind===$f.l.DCO_A||e.kind===$f.l.DCO_B?t:{},children:null==(r=e.children)?void 0:r.map((e=>nm(e,t)))}},om=(e,t)=>{const r={...e};return nm(r,{toggle:r.toggle})},sm=(e,t)=>{null==e||e.forEach((e=>{(null==e?void 0:e.kind)===$f.l.DCO&&t(),sm(null==e?void 0:e.children,t)}))},im=e=>({kind:$f.l.MEDIA,id:e.id,creatorId:e.creatorid,isAutoplay:"true"===e.isautoplay,isMuted:"true"===e.ismuted,isLooped:"true"===e.islooped}),am=[$f.l.ASIDE,$f.l.COLUMN,$f.l.IMG];function cm(e){const t=Number(e);if(!Number.isNaN(t))return t}function um(e){const{colspan:t,rowspan:r,columns:n,...o}=e;return{...o,colSpan:cm(t),rowSpan:cm(r),columns:cm(n),padding:"padding"in o?16:void 0}}function lm(e){var t;return null==(t=e.children)||!t.length||e.children.some((e=>(null==e?void 0:e.kind)!==$f.l.TABLE_TH))?e:{...e,children:[{kind:$f.l.TABLE_ROW,children:e.children}]}}function dm(e){const{insidetable:t,decorationstyle:r,...n}=e;return{...n,...r?{decorationStyle:r}:{},insideTable:void 0!==t}}function pm(e){const{linktext:t,linkurl:r,linktarget:n,rel:o,...s}=e;return{...s,linkParams:t&&r?{text:t,href:r,..._m(o,r)}:void 0}}function hm(e,t){if(!(0,Hf.U)(t.clientMedia))return e}function fm(e,t){if((0,Hf.U)(t.clientMedia))return e}function mm(e){return{...e,...Sm(e)}}function vm(e,t){const{style:r,...n}=e,{userAgent:o}=t;return{...n,...Sm(e),wide:!!o.mobileOS,theme:(()=>{switch(r){case"primary":return"primary";case"outlineDark":case"outlineOnLight":return"outline";default:return}})()}}function gm(e){const{docsize:t,doctype:r,...n}=e;return{...n,doc:{size:cm(t),type:r}}}function ym(e){const{children:t=[]}=e,r=[];let n;return t.forEach((e=>{var t;if(e&&am.includes(e.kind))return n&&(r.push(n),n=void 0),void r.push(e);n||(n={kind:$f.l.FRAGMENT,children:[]}),null==(t=n.children)||t.push(e)})),n&&(r.push(n),n=void 0),{...e,children:r}}function bm(e){const{children:t=[]}=e;let r=t;return r=r.filter(Boolean).map((e=>({...e,parentKind:$f.l.MOBILE_TABLE}))),{...e,children:r}}function wm(e){return{...e,kind:$f.l.FRAGMENT}}function Em(e){switch(e){case $f.l.MEDIA_DESKTOP:return hm;case $f.l.MEDIA_MOBILE:return fm;case $f.l.A:return mm;case $f.l.BUTTON:return vm;case $f.l.DOC_A:return gm;case $f.l.IMG:return Wf;case $f.l.LI:return ym;case $f.l.UL:case $f.l.OL:return dm;case $f.l.VIDEO:return rm;case $f.l.TABLE_HEAD:return lm;case $f.l.TABLE_DATA:case $f.l.TABLE_TH:return um;case $f.l.HINT:return pm;case $f.l.MOBILE_TABLE:return bm;case $f.l.COLUMN:return wm;case $f.l.DCO:return om;case $f.l.MEDIA:return im;default:return}}function Sm(e){return _m(e.rel,e.href)}function _m(e="",t=""){let r=Array.isArray(e)?e.join(" "):e;var n;r=""!==r?null!=(n=r)&&n.includes("noopener")?r:`${r} noopener`:"noopener";let o="_blank";return t&&t.startsWith("#")&&(o="_self"),{rel:r,target:o,referrerPolicy:"same-origin"}}function km(e){return e.kind===$f.l.TEXT||void 0===e.children?[]:e.children.filter((e=>!!e)).map(((t,r)=>({index:r,node:t,parent:e})))}var Tm,Cm;const Rm=(0,a.V3)("CARD_NODES_PATCHER");let xm=(Tm=(0,n.Y)({providers:[(0,i.J)({provide:Rm,useFactory:({context:e,envManager:t,logger:r,userAgent:n,responseManager:o})=>function(s){return function(e,t,r){if(!e)return;[Zf].forEach((t=>t(e)));const n=km({kind:"fake-parent",children:e});let s=0;for(;s<n.length;){const e=n[s],{index:r,node:o,parent:i}=e;let a=o;if("text"!==o.kind){const e=Em(o.kind);e&&i.children&&(a=e(o,t),i.children[r]=a)}a&&n.push(...km(a)),s+=1}return sm(e,(()=>{o.setHeader("x-dco","true")})),e}(s,{clientMedia:e.getState(sl),envManager:t,logger:r,userAgent:n})},deps:{context:dr,envManager:S.vC,logger:E.Fp,userAgent:Cu,responseManager:Kl}})]}),Tm(Cm=class{})||Cm);var Mm,Pm,Om=r(58942);const Am=(0,a.V3)("RESOLVE_BOXY_BLOCK"),Nm={appIdResolve:Tu,logger:E.Fp,pageEnrichment:Cn,userAgent:Cu};let Im=(Mm=(0,n.Y)({providers:[(0,i.J)({provide:Am,useFactory:({appIdResolve:e,logger:t,pageEnrichment:r})=>{const n=e(),o=t("resolve-boxy-block");return async function(e){if(!e)return;const t={};try{const{payload:o={}}=await r.getResponse({appId:n,url:e},t);return Ls()(["page","content"],o)}catch(t){return void o.error({error:t,message:`Failed to get response for url "${e}"`})}}},deps:Nm})]}),Mm(Pm=class{})||Pm);var Lm=r(53188);async function Dm({resolveBoxyBlock:e,url:t}){const r=await e(Lm.env.BOXY_BLOCKS_URL+t);if(!r)return;return r.content[0]||void 0}var jm=r(78658);async function Fm(e){const t=await Dm({resolveBoxyBlock:e,url:"independentNavigation"});return t?{...t,properties:{...t.properties,showSecondMenu:!1,thirdMenu:{active:!1}}}:{id:Gf.oc.fallbackHeader,type:jm.k.fallbackHeader,version:"1.0.0",content:[],properties:{}}}function Vm(e){return Object.entries(e).reduce(((e,[t,r])=>(null!=r&&"object"==typeof r&&(r=Vm(r)),e[qe()(t)]=r,e)),{})}function Bm({jsonLd:e,metaSeo:t,trackingState:r,url:n,title:o,showShortTitle:s=!1}){var i;const a=r?Vm(r):void 0,c=null==t?void 0:t.share_schema,u=e?{jsonLd:e}:void 0;return{analytics:a,seo:{metaTags:{...(null==t?void 0:t.meta_tags)||{},title:s?"":(null==t||null==(i=t.meta_tags)?void 0:i.title)||o},shareSchema:c?{openGraph:null!=c&&c.open_graph?Vm({...c.open_graph,url:n.origin+n.pathname}):void 0,twitterCard:null!=c&&c.twitter_card?Vm(c.twitter_card):void 0}:void 0,structuredData:u}}}const Um={type:Gf.uA,version:"1.0",content:[]},qm={isProductFilterActive:!0,productFilterValue:"loans",isDirectionFilterActive:!0,directionFilterValue:"sales",isBusinessLineFilterActive:!0,businessLineFilterValue:"business"},$m={isProductFilterActive:!0,productFilterValue:"loans",isDirectionFilterActive:!0,directionFilterValue:"sales",isBusinessLineFilterActive:!0,businessLineFilterValue:"business"},Hm={isProductFilterActive:!1,isDirectionFilterActive:!1,isBusinessLineFilterActive:!1},Jm=async({filter_product_type:e,direction:t,business_line:r},n,o)=>{const s=await Dm({resolveBoxyBlock:n,url:"independentDropdownTextSearch"});if(!s)return;const i=(e=>{switch(!0){case e.pathname.startsWith("/business/help/sales/loans/connect/"):return qm;case e.pathname.startsWith("/business/help/sales/loans/lend/"):return $m;default:return Hm}})(o),a=((e,t,r)=>{const n={isProductSortActive:!1,isDirectionSortActive:!1,isBusinessLineSortActive:!1};return e&&(n.isProductSortActive=!0,n.productSortValue=e),t&&(n.isDirectionSortActive=!0,n.directionSortValue=t),r&&(n.isBusinessLineSortActive=!0,n.businessLineSortValue=r),n})(e,t,r);return s.properties.filtersOptions=i,s.properties.sortsOptions=a,s.properties.viewOptions={descriptionFields:{product:!0,productGroup:!0},suggestedTags:[]},{id:Gf.oc.container,type:jm.k.container,version:"1.0",content:[s].filter(Boolean)}};var zm,Gm=r(74075);class Ym{constructor(){this.promises={}}addBoxyBlockPromise(e,t){this.promises[e]=t}async resolvePromises(){const e=Object.keys(this.promises),t=await Promise.all(Object.values(this.promises));return e.reduce(((e,r,n)=>(e[r]=t[n],e)),{})}async resolveBoxyBlocksPromises(e){const t=await this.resolvePromises();return e.map((e=>t[e]||Um))}}const Km=(0,a.V3)("RESOLVE_USER_PRESET"),Wm="parent_url",Qm={resolveBoxyBlock:Am,requestManager:tr.G};let Zm=(0,n.Y)({providers:[(0,i.J)({provide:Km,useFactory:({resolveBoxyBlock:e,requestManager:t})=>async function(r){const n=await e(null==r?void 0:r.config_url);if(!n||null==r||!r.enable_auto_parent_url)return n;const o=Array.isArray(n)?[...n]:[n];for(;o.length;){const e=o.shift();if("independentParentIframe"===e.type){const{properties:r}=e,n=null==r?void 0:r.url;if(n){const o=new URL(n);if(o.searchParams.has(Wm))break;const s=t.getUrl();o.searchParams.set(Wm,s),e.properties={...r,url:decodeURIComponent(o.toString())}}}o.push(...e.content)}return n},deps:Qm})]})(zm=class{})||zm;const Xm="20062025, ,  ,    2673",ev=`${Xm}.    , , 1027739031540.`,tv=/^(\+7|8)\ (\d{3})\ (\d{3})\-(\d{2})\-(\d{2})$/,rv=async(e,t,r)=>{var n;const o=await Dm({resolveBoxyBlock:e,url:"independentFooter"}),s=(e=>{const t=e.includes("insurance/help");return(e.includes("mobile-operator/help")?"20062025, -, 1177746287498,   154950.     ,    2673 ":t&&ev)||Xm})(t),i=(e=>{const t=e.replace(/[^\d]/g,""),r=`${"7"===t.slice(0,1)?"+":""}${t.slice(0,1)} ${t.slice(1,4)} ${t.slice(4,7)}-${t.slice(7,9)}-${t.slice(9,11)}`;return null===r.match(tv)||11!==t.length?null:r})(r);if(!o)return{id:Gf.oc.fallbackFooter,type:jm.k.fallbackFooter,version:"1.0.0",content:[],properties:{phone:{active:!0,number:i,shortNumber:{active:!1}},disclaimer:{text:"",htmlTag:"div"},copyright:{text:s,htmlTag:"div"},additionalLinks:[]}};const a=(c=r,((null==o||null==(n=o.properties)||null==(n=n.phone)?void 0:n.number)||"").replace(/[^\d]/g,"")!==c.replace(/[^\d]/g,""));var c;return{...o,properties:{...o.properties,phone:a?{active:!0,number:i,shortNumber:{active:!1}}:o.properties.phone,disclaimer:{text:"",htmlTag:"div"},copyright:{text:s,htmlTag:"div"},additionalLinks:[]}}},nv=(0,a.V3)("MAP_PRODUCT_GROUP_RESPONSE"),ov={userAgent:Cu,PageInfo:Gm.R,resolveBoxyBlock:Am,resolveUserPreset:Km},sv=[(0,i.J)({provide:nv,useFactory:({userAgent:e,PageInfo:t,resolveBoxyBlock:r,resolveUserPreset:n})=>async e=>{const{data:o,requestUrl:s}=e,{breadcrumbs:i,json_ld:a,meta_seo:c,tracking_state:u,above_boxy_preset:l,below_boxy_preset:d,before_search_preset:p,after_breadcrumbs_preset:h,before_feedback_preset:f,searching_filters:m,show_search_widget:v,support_phone:g}=o,y=Bm({jsonLd:a,metaSeo:c,trackingState:u,url:s,title:null==o?void 0:o.title,showShortTitle:t.isShowShortTitle}),b=new Ym;t.isHeaderVisible&&b.addBoxyBlockPromise("independentNavigation",Fm(r)),t.isFooterVisible&&b.addBoxyBlockPromise("independentFooter",rv(r,s.pathname,g)),t.isBoxyBlocksVisible&&(b.addBoxyBlockPromise("afterBreadcrumbsPreset",n(h)),b.addBoxyBlockPromise("aboveBoxyPreset",n(l)),v&&b.addBoxyBlockPromise("searchBlock",Jm(m,r,s))),b.addBoxyBlockPromise("beforeFeedbackPreset",n(f)),b.addBoxyBlockPromise("belowBoxyPreset",n(d)),b.addBoxyBlockPromise("beforeSearch",n(p));const[w,E,S,_,k,...T]=await b.resolveBoxyBlocksPromises(["independentNavigation","afterBreadcrumbsPreset","belowBoxyPreset","beforeFeedbackPreset","independentFooter","beforeSearch","searchBlock","aboveBoxyPreset"]),C=[...T,_,S].filter((e=>e.type!==Gf.uA)).length>0,R=T.filter((e=>e.type!==Gf.uA&&e.content.filter((e=>"independentDropdownTextSearch"!==e.type)).length>0)).length>0;return{name:s.pathname,path:s.pathname,config:{content:{...Um,content:[{id:Gf.oc.customNavigation,type:t.isCustomNavigationEnabled?jm.k.customNavigation:Gf.uA,version:"1.0.0"},w,{id:Gf.oc.breadcrumbs,type:t.isHeaderVisible?jm.k.breadcrumbs:Gf.uA,version:"1.0.0",content:{breadcrumbs:i},properties:o},E,{id:Gf.oc.title,type:jm.k.title,version:"1.0",content:[],properties:{title:o.title,suppressBottomMargin:!C}},...T,{id:Gf.oc.productGroup,type:jm.k.productGroup,version:"1.0",content:[_],properties:{...o,suppressTopMargin:R}},S,k]},meta:y}}},deps:ov})],iv=(0,a.V3)("MAP_PRODUCT_RESPONSE"),av={userAgent:Cu,PageInfo:Gm.R,resolveBoxyBlock:Am,resolveUserPreset:Km},cv=[(0,i.J)({provide:iv,useFactory:({userAgent:e,PageInfo:t,resolveBoxyBlock:r,resolveUserPreset:n})=>async e=>{const{data:o,requestUrl:s}=e,{above_boxy_preset:i,middle_boxy_preset:a,below_boxy_preset:c,after_breadcrumbs_preset:u,before_popular_questions_preset:l,before_feedback_preset:d,breadcrumbs:p,json_ld:h,meta_seo:f,popular_themes:m,searching_filters:v,tracking_state:g,before_search_preset:y,support_phone:b}=o,w=Bm({jsonLd:h,metaSeo:f,trackingState:g,url:s,title:null==o?void 0:o.title,showShortTitle:t.isShowShortTitle}),E=new Ym;t.isHeaderVisible&&E.addBoxyBlockPromise("independentNavigation",Fm(r)),t.isFooterVisible&&E.addBoxyBlockPromise("independentFooter",rv(r,s.pathname,b)),t.isBoxyBlocksVisible&&(E.addBoxyBlockPromise("searchBlock",Jm(v,r,s)),E.addBoxyBlockPromise("afterBreadcrumbsPreset",n(u)),E.addBoxyBlockPromise("aboveBoxyPreset",n(i)),E.addBoxyBlockPromise("beforePopularQuestionsPreset",n(l)),E.addBoxyBlockPromise("middleBoxyPreset",n(a))),E.addBoxyBlockPromise("beforeFeedbackPreset",n(d)),E.addBoxyBlockPromise("belowBoxyPreset",n(c)),E.addBoxyBlockPromise("beforeSearch",n(y));const[S,_,k,T,C,R,x,M,P,O]=await E.resolveBoxyBlocksPromises(["independentNavigation","afterBreadcrumbsPreset","belowBoxyPreset","beforeFeedbackPreset","searchBlock","aboveBoxyPreset","beforePopularQuestionsPreset","middleBoxyPreset","beforeSearch","independentFooter"]);return{name:s.pathname,path:s.pathname,config:{content:{...Um,content:[{id:Gf.oc.customNavigation,type:t.isCustomNavigationEnabled?jm.k.customNavigation:Gf.uA,version:"1.0.0"},S,{id:Gf.oc.breadcrumbs,type:t.isHeaderVisible?jm.k.breadcrumbs:Gf.uA,version:"1.0.0",content:{breadcrumbs:p},properties:o},_,{id:Gf.oc.title,type:jm.k.title,properties:{title:o.title},version:"1.0",content:[]},P,C,R,{id:Gf.oc.popularThemes,type:jm.k.externalProductPopularThemes,properties:{themes:m},version:"1.0",content:[x||Um,M].filter(Boolean)},{id:Gf.oc.product,type:jm.k.product,version:"1.0",properties:{...o,suppressTopMargin:0===m.length&&R.content.length>0},content:[T]},k,O]},meta:w}}},deps:av})],uv=(0,a.V3)("MAP_CATEGORY_RESPONSE"),lv={userAgent:Cu,PageInfo:Gm.R,resolveBoxyBlock:Am,resolveUserPreset:Km},dv=[(0,i.J)({provide:uv,useFactory:({userAgent:e,PageInfo:t,resolveBoxyBlock:r,resolveUserPreset:n})=>async e=>{const{data:o,requestUrl:s}=e,{above_boxy_preset:i,after_breadcrumbs_preset:a,before_feedback_preset:c,breadcrumbs:u,json_ld:l,meta_seo:d,tracking_state:p,below_boxy_preset:h,searching_filters:f,before_search_preset:m,support_phone:v}=o,g=Bm({jsonLd:l,metaSeo:d,trackingState:p,url:s,title:null==o?void 0:o.title,showShortTitle:t.isShowShortTitle}),y=new Ym;t.isHeaderVisible&&y.addBoxyBlockPromise("independentNavigation",Fm(r)),t.isFooterVisible&&y.addBoxyBlockPromise("independentFooter",rv(r,s.pathname,v)),t.isBoxyBlocksVisible&&(y.addBoxyBlockPromise("searchBlock",Jm(f,r,s)),y.addBoxyBlockPromise("afterBreadcrumbsPreset",n(a)),y.addBoxyBlockPromise("aboveBoxyPreset",n(i))),y.addBoxyBlockPromise("beforeFeedbackPreset",n(c)),y.addBoxyBlockPromise("belowBoxyPreset",n(h)),y.addBoxyBlockPromise("beforeSearch",n(m));const[b,w,E,S,_,k,T,C]=await y.resolveBoxyBlocksPromises(["independentNavigation","afterBreadcrumbsPreset","searchBlock","aboveBoxyPreset","beforeFeedbackPreset","belowBoxyPreset","beforeSearch","independentFooter"]);return{name:s.pathname,path:s.pathname,config:{content:{...Um,content:[{id:Gf.oc.customNavigation,type:t.isCustomNavigationEnabled?jm.k.customNavigation:Gf.uA,version:"1.0.0"},b,{id:Gf.oc.breadcrumbs,type:t.isHeaderVisible?jm.k.breadcrumbs:Gf.uA,version:"1.0.0",content:{breadcrumbs:u},properties:o},w,{id:Gf.oc.category,type:jm.k.category,version:"1.0.0",content:[T,E,S,_],properties:o},k,C]},meta:g}}},deps:lv})],pv=(0,a.V3)("MAP_QUESTION_RESPONSE"),hv={userAgent:Cu,PageInfo:Gm.R,resolveBoxyBlock:Am,resolveUserPreset:Km,cardNodesPatcher:Rm,wuid:_.$,requestManager:tr.G},fv=[(0,i.J)({provide:pv,useFactory:({userAgent:e,PageInfo:t,resolveBoxyBlock:r,resolveUserPreset:n,cardNodesPatcher:o,wuid:s,requestManager:i})=>async e=>{const{data:s,requestUrl:i}=e,{boxy_preset:a,breadcrumbs:c,json_ld:u,meta_seo:l,promo_boxy_preset:d,after_breadcrumbs_preset:p,before_feedback_preset:h,after_title_preset:f,tracking_state:m,summary_distilled:v,image_source_caption_distilled:g,support_phone:y}=s,b=Bm({jsonLd:u,metaSeo:l,trackingState:m,url:i,title:null==s?void 0:s.title,showShortTitle:t.isShowShortTitle}),w=new Ym;t.isHeaderVisible&&w.addBoxyBlockPromise("independentNavigation",Fm(r)),t.isFooterVisible&&w.addBoxyBlockPromise("independentFooter",rv(r,i.pathname,y)),t.isBoxyBlocksVisible&&(w.addBoxyBlockPromise("belowHeaderBoxyBlocks",n(a)),w.addBoxyBlockPromise("afterBreadcrumbsPreset",n(p)),w.addBoxyBlockPromise("afterTitlePreset",n(f))),w.addBoxyBlockPromise("belowBoxyPreset",n(d)),w.addBoxyBlockPromise("beforeFeedbackPreset",n(h));const[E,S,_,k,...T]=await w.resolveBoxyBlocksPromises(["independentNavigation","afterBreadcrumbsPreset","smeInformer","independentFooter","afterTitlePreset","belowHeaderBoxyBlocks","beforeFeedbackPreset","belowBoxyPreset"]);return s.cards.forEach((({content_distilled:e})=>{const t=e.nodes;o(t)})),v&&o(v.nodes),g&&o(g.nodes),{name:i.pathname,path:i.pathname,config:{content:{...Um,content:[{id:Gf.oc.customNavigation,type:t.isCustomNavigationEnabled?jm.k.customNavigation:Gf.uA,version:"1.0.0"},E,{id:Gf.oc.breadcrumbs,type:t.isHeaderVisible?jm.k.breadcrumbs:Gf.uA,version:"1.0.0",content:{breadcrumbs:c},properties:s},S,_,{id:Gf.oc.question,type:jm.k.question,version:"1.0.0",content:T,properties:s},k]},meta:b}}},deps:hv})],mv=(0,a.V3)("MAP_REDIRECT_RESPONSE"),vv=[(0,i.J)({provide:mv,useFactory:()=>async({requestUrl:e,data:t})=>{const{location:r,status:n}=t;return{name:"redirect",path:e.pathname,redirect:{code:n,url:r}}}})],gv=(0,a.V3)("MAP_ARTICLE_RESPONSE"),yv={userAgent:Cu,PageInfo:Gm.R,resolveBoxyBlock:Am,resolveUserPreset:Km,cardNodesPatcher:Rm},bv=[(0,i.J)({provide:gv,useFactory:({userAgent:e,PageInfo:t,resolveBoxyBlock:r,resolveUserPreset:n,cardNodesPatcher:o})=>async e=>{const{data:s,requestUrl:i}=e,{above_boxy_preset:a,below_boxy_preset:c,before_feedback_preset:u,after_breadcrumbs_preset:l,breadcrumbs:d,json_ld:p,meta_seo:h,tracking_state:f,content_distilled:m,summary_distilled:v,image_source_caption_distilled:g,support_phone:y}=s,b=Bm({jsonLd:p,metaSeo:h,trackingState:f,url:i,title:null==s?void 0:s.title,showShortTitle:t.isShowShortTitle}),w=new Ym;t.isHeaderVisible&&w.addBoxyBlockPromise("independentNavigation",Fm(r)),t.isFooterVisible&&w.addBoxyBlockPromise("independentFooter",rv(r,i.pathname,y)),t.isBoxyBlocksVisible&&(w.addBoxyBlockPromise("afterBreadcrumbsPreset",n(l)),w.addBoxyBlockPromise("aboveBoxyPreset",n(a))),w.addBoxyBlockPromise("beforeFeedbackPreset",n(u)),w.addBoxyBlockPromise("belowBoxyPreset",n(c));const[E,S,_,...k]=await w.resolveBoxyBlocksPromises(["independentNavigation","afterBreadcrumbsPreset","independentFooter","aboveBoxyPreset","beforeFeedbackPreset","belowBoxyPreset"]);return o(m.nodes),v&&o(v.nodes),g&&o(g.nodes),{name:i.pathname,path:i.pathname,config:{content:{...Um,content:[{id:Gf.oc.customNavigation,type:t.isCustomNavigationEnabled?jm.k.customNavigation:Gf.uA,version:"1.0.0"},E,{id:Gf.oc.breadcrumbs,type:t.isHeaderVisible?jm.k.breadcrumbs:Gf.uA,version:"1.0.0",content:{breadcrumbs:d},properties:s},S,{id:Gf.oc.article,type:jm.k.article,version:"1.0.0",content:k,properties:s},_]},meta:b}}},deps:yv})];var wv,Ev;const Sv=(0,a.V3)("RESOLVE_URL_RESPONSE_MAPPER"),_v={resolveBoxyBlock:Am,mapProductGroupResponse:nv,mapProductResponse:iv,mapCategoryResponse:uv,mapQuestionResponse:pv,mapArticleResponse:gv,mapRedirectResponse:mv};let kv=(wv=(0,n.Y)({providers:[...sv,...cv,...dv,...fv,...vv,...bv,(0,i.J)({provide:Sv,useFactory:({mapProductGroupResponse:e,mapProductResponse:t,mapCategoryResponse:r,mapQuestionResponse:n,mapRedirectResponse:o,mapArticleResponse:s,resolveBoxyBlock:i})=>a=>{if(200===a.response.status)return(({requestUrl:a,response:c})=>{const{entity_type:u}=c.payload.data,l={data:c.payload.data.response,requestUrl:a,resolveBoxyBlock:i};switch(u){case"article":return s(l);case"product_group":return e(l);case"external_product":return t(l);case"category":return r(l);case"question":return n(l);case"redirect":return o(l);default:throw new Error(`Unknown entity type ${u}`)}})(a)},deps:_v})]}),wv(Ev=class{})||Ev);var Tv=r(95057),Cv=r(37093),Rv=r.n(Cv);const xv=/\*/,Mv=/<history-fallback>/,Pv=/:.+$/,Ov=/([^(?]+)(?:\((.+)\))?(\?)?/,Av=(e,t=!1)=>{const r=e.endsWith("/");return t?r||(e=>/\/.+\.[^/]+$/.test(e))(e)?e:`${e}/`:e.length>1&&r?e.slice(0,-1):e},Nv=e=>!e.host||e.host===window.location.host,Iv=e=>"string"==typeof e?{url:e}:e,Lv=(e,t)=>(e.add(t),()=>{e.delete(t)}),Dv=e=>e.split("/").slice(e.startsWith("/")?1:0,e.endsWith("/")?-1:1/0),jv=e=>Mv.test(e),Fv=e=>xv.test(e),Vv=e=>!!e.match(Pv),Bv=e=>jv(e)?{type:1}:Fv(e)?{type:2}:Vv(e)?(e=>{const[t="",r,n=""]=e.split(":"),o=Ov.exec(r);if(!o)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,s,i,a]=o;return{type:3,paramName:s,regexp:t||n||i?new RegExp(`^${t}(${i||".+"})${a?"?":""}${n}$`):void 0,optional:!!a&&!t&&!n}})(e):{type:0,value:e},Uv=(e,t)=>{const r=Dv(e),n=Rv()((r=>{var n;if(jv(r)||Fv(r))throw new Error(`Pathname should be only a string with dynamic parameters, not a special string, got ${e}`);if(Vv(r)){const[e="",o="",s=""]=r.split(":"),i=Ov.exec(o);if(!i)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,a,c,u]=i,l=null===(n=t[a])||void 0===n?void 0:n.toString();if(u&&!l)return"";if(!l)throw new Error(`value for parameter for ${a} should be defined in params`);if(c&&!new RegExp(c).test(l))throw new Error(`passed parameter for ${a} should satisfy regxep: ${c}, got: ${l}`);return e+l+s||r}return r}),r).join("/");return Av(`/${n}`,e.endsWith("/"))};let qv={trace:mi(),debug:mi(),info:mi(),warn:mi(),error:mi()};class $v{constructor({trailingSlash:e,mergeSlashes:t,enableViewTransitions:r,beforeResolve:n=[],beforeNavigate:o=[],afterNavigate:s=[],beforeUpdateCurrent:i=[],afterUpdateCurrent:a=[],guards:c=[],onChange:u=[],onRedirect:l,onNotFound:d,onBlock:p}){this.started=!1,this.trailingSlash=!1,this.strictTrailingSlash=!0,this.viewTransitionsEnabled=!1,this.mergeSlashes=!1,this.trailingSlash=null!=e&&e,this.strictTrailingSlash=void 0===e,this.mergeSlashes=null!=t&&t,this.viewTransitionsEnabled=null!=r&&r,this.hooks=new Map([["beforeResolve",new Set(n)],["beforeNavigate",new Set(o)],["afterNavigate",new Set(s)],["beforeUpdateCurrent",new Set(i)],["afterUpdateCurrent",new Set(a)]]),this.guards=new Set(c),this.syncHooks=new Map([["change",new Set(u)]]),this.onRedirect=l,this.onNotFound=d,this.onBlock=p,this.currentUuid=0}async start(){qv.debug({event:"start"}),this.started=!0}getCurrentRoute(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.to)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.to}getCurrentUrl(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.url)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.url}getLastRoute(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.to}getLastUrl(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.url}commitNavigation(e){qv.debug({event:"commit-navigation",navigation:e}),e.history||this.history.save(e),this.lastNavigation=e,this.currentNavigation=null,this.runSyncHooks("change",e)}async updateCurrentRoute(e){return this.internalUpdateCurrentRoute(e,{})}async internalUpdateCurrentRoute(e,{history:t}){var r;const n=null!==(r=this.currentNavigation)&&void 0!==r?r:this.lastNavigation;if(!n)throw new Error("updateCurrentRoute should only be called after navigate to some route");const{replace:o,params:s,navigateState:i}=e,{to:a,url:c}=n,u={type:"updateCurrentRoute",from:a,to:this.resolveRoute({params:s,navigateState:i},{wildcard:!0}),url:this.resolveUrl(e),fromUrl:c,replace:o,history:t,navigateState:i,code:e.code,key:this.uuid()};qv.debug({event:"update-current-route",updateRouteOptions:e,navigation:u}),await this.run(u)}async runUpdateCurrentRoute(e){await this.runHooks("beforeUpdateCurrent",e),this.commitNavigation(e),await this.runHooks("afterUpdateCurrent",e)}async navigate(e){return this.internalNavigate(Iv(e),{})}async internalNavigate(e,{history:t,redirect:r}){var n;const{url:o,replace:s,params:i,navigateState:a,code:c,viewTransition:u}=e,l=r?this.lastNavigation:null!==(n=this.currentNavigation)&&void 0!==n?n:this.lastNavigation;if(!o&&!l)throw new Error("Navigate url should be specified and cannot be omitted for first navigation");const d=this.resolveUrl(e),{to:p,url:h}=null!=l?l:{};let f={type:"navigate",from:p,url:d,fromUrl:h,replace:s,history:t,navigateState:a,code:c,redirect:r,redirectFrom:r?this.currentNavigation.to:void 0,key:this.uuid()};this.viewTransitionsEnabled&&void 0!==u&&(f.viewTransition=u),await this.runHooks("beforeResolve",f);const m=this.resolveRoute({url:d,params:i,navigateState:a},{wildcard:!0});if(m&&(f={...f,to:m}),qv.debug({event:"navigation",navigation:f}),!f.to)return this.notfound(f);await this.run(f)}async runNavigate(e){if(e.to.redirect)return this.redirect(e,Iv(e.to.redirect));await this.runGuards(e),await this.runHooks("beforeNavigate",e),this.commitNavigation(e),await this.runHooks("afterNavigate",e)}async run(e){this.currentNavigation=e,"navigate"===e.type&&await this.runNavigate(e),"updateCurrentRoute"===e.type&&await this.runUpdateCurrentRoute(e)}resolve(e,t){const r=Iv(e);return this.resolveRoute({...r,url:fa(r.url)},t)}back(e){return this.go(-1,e)}forward(){return this.go(1)}async go(e,t){return qv.debug({event:"history.go",to:e}),this.history.go(e,t)}isNavigating(){return!!this.currentNavigation}async dehydrate(){throw new Error("Not implemented")}async rehydrate(e){throw new Error("Not implemented")}addRoute(e){var t;null===(t=this.tree)||void 0===t||t.addRoute(e)}async redirect(e,t){var r;return qv.debug({event:"redirect",navigation:e,target:t}),null===(r=this.onRedirect)||void 0===r?void 0:r.call(this,{...e,from:e.to,fromUrl:e.url,to:null,url:this.resolveUrl(t)})}async notfound(e){var t;return qv.debug({event:"not-found",navigation:e}),null===(t=this.onNotFound)||void 0===t?void 0:t.call(this,e)}async block(e){if(qv.debug({event:"blocked",navigation:e}),this.currentNavigation=null,this.onBlock)return this.onBlock(e);throw new Error("Navigation blocked")}cancel(){}normalizePathname(e){let t=e;return this.mergeSlashes&&(t=(e=>{const[t,...r]=e.split("?");return[t.replace(/\/+/g,"/").replace(/^(\w+):\//,"$1://"),...r].join("?")})(t)),this.strictTrailingSlash||(t=Av(t,this.trailingSlash)),t}resolveUrl({url:e,query:t={},params:r,preserveQuery:n,hash:o}){var s;const i=this.getCurrentRoute(),a=this.getCurrentUrl(),c=e?((e,t)=>{const r=ha(e.toString());return ha(t,r)})(null!==(s=null==a?void 0:a.href)&&void 0!==s?s:"",e):ha(a.href);let{pathname:u}=c;return r&&(e?u=Uv(c.pathname,r):i&&(u=Uv(i.path,{...i.params,...r}))),Nv(c)&&(u=this.normalizePathname(u)),pa(((e,t)=>{const{path:r,query:n,port:o,username:s,password:i}=t,a={hash:t.hash,host:t.host,hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,search:t.search};if(r){const t=(e=>{const t=ma.exec(e);if(t){const[e,r,n="",o=""]=t;return{pathname:r,search:n,hash:o}}})(r);t&&Object.assign(e,t)}s&&(e.username=s),i&&(e.password=i);for(const t in a){const r=a[t];void 0!==r&&(e[t]=r)}if(void 0!==o&&(e.port=o,"0"===e.port&&(e.port="http:"===e.protocol?"80":"443")),n){const r=new URLSearchParams(t.search);va(r,n),e.search=r.toString()}return e})(c,{pathname:u,search:e?c.search:"",query:{...n?this.getCurrentUrl().query:{},...t},hash:null!=o?o:c.hash}))}resolveRoute({url:e,params:t,navigateState:r},{wildcard:n}={}){var o,s;let i=e?null===(o=this.tree)||void 0===o?void 0:o.getRoute(e.pathname):this.getCurrentRoute();if(n&&!i&&e&&(i=null===(s=this.tree)||void 0===s?void 0:s.getWildcard(e.pathname)),i)return t||r!==i.navigateState?{...i,params:{...i.params,...t},navigateState:r}:i}async runGuards(e){if(qv.debug({event:"guards.run",navigation:e}),!this.guards)return void qv.debug({event:"guards.empty",navigation:e});const t=await Promise.all(Array.from(this.guards).map((t=>Promise.resolve(t(e)).catch((e=>{qv.warn({event:"guard.error",error:e})})))));qv.debug({event:"guards.done",navigation:e,results:t});for(const r of t){if(!1===r)return this.block(e);if(f()(r)||Jr()(r))return this.redirect(e,Iv(r))}}registerGuard(e){return Lv(this.guards,e)}runSyncHooks(e,t){qv.debug({event:"sync-hooks.run",hookName:e,navigation:t});const r=this.syncHooks.get(e);if(r){for(const e of r)try{e(t)}catch(e){qv.warn({event:"sync-hooks.error",error:e})}qv.debug({event:"sync-hooks.done",hookName:e,navigation:t})}else qv.debug({event:"sync-hooks.empty",hookName:e,navigation:t})}registerSyncHook(e,t){return Lv(this.syncHooks.get(e),t)}async runHooks(e,t){qv.debug({event:"hooks.run",hookName:e,navigation:t});const r=this.hooks.get(e);r?(await Promise.all(Array.from(r).map((r=>Promise.resolve(r(t)).catch((t=>{if(qv.warn({event:"hook.error",error:t}),"beforeResolve"===e)throw t}))))),qv.debug({event:"hooks.done",hookName:e,navigation:t})):qv.debug({event:"hooks.empty",hookName:e,navigation:t})}registerHook(e,t){return Lv(this.hooks.get(e),t)}uuid(){return this.currentUuid++}}class Hv{init(e){}listen(e){this.listener=e}setTree(e){this.tree=e}}const Jv=window.history&&window.history.pushState,zv=e=>e&&"string"==typeof e.key,Gv=(e,t,r=0)=>{const n=(e=>{const{to:t}=e;if(t)return`${t.name}_${t.path}`})(e),o=((e,t)=>{const r={};if(e.replace){const e=null==t?void 0:t.navigateState.previousRoute,n=null==t?void 0:t.navigateState.previousUrl;return e&&(r.previousRoute=e),n&&(r.previousUrl=n),r}return e.from&&(r.previousRoute=e.from),e.fromUrl&&(r.previousUrl=e.fromUrl),r})(e,t);let{type:s}=e;return e.replace&&t&&(s=t.type===s?s:"navigate"),{key:n,type:s,navigateState:{...o,...e.navigateState},index:r}};class Yv extends Hv{constructor(){super(),this.currentIndex=0,this.historyWrapper=(({onNavigate:e})=>{if(!Jv){const e=(e,t,r)=>{window.location.href=r.toString()};return window.history.pushState=e,window.history.replaceState=e,{navigate:({path:t})=>e({},"",t),history:()=>{throw new Error("Method not implemented")},init:mi(),subscribe:mi()}}let t=window.history;"__originalHistory"in window.history?t=window.history.__originalHistory:window.history.__originalHistory={pushState:t.pushState.bind(window.history),replaceState:t.replaceState.bind(window.history),go:t.go.bind(window.history)};const r=t.pushState.bind(window.history),n=t.replaceState.bind(window.history),o=t.go.bind(window.history),s=e=>{o(e)},i=(t=!1)=>(r,n,o)=>{e({url:o.toString(),replace:t,navigateState:r})};return window.history.pushState=i(!1),window.history.replaceState=i(!0),window.history.go=s,window.history.back=()=>s(-1),window.history.forward=()=>s(1),{navigate:({path:e,replace:t,state:o})=>{t?n(o,"",e):r(o,"",e)},history:s,init:e=>{n(e,"")},subscribe:e=>{window.addEventListener("popstate",(({state:t})=>{e({path:window.location.pathname+window.location.search+window.location.hash,state:t})}))}}})({onNavigate:({url:e,replace:t,navigateState:r})=>{this.listener({url:e,replace:t,navigateState:r})}})}init(e){var t;this.currentState=zv(null===(t=window.history)||void 0===t?void 0:t.state)?window.history.state:Gv(e),this.currentIndex=this.currentState.index,this.historyWrapper.init(this.currentState),this.historyWrapper.subscribe((async({path:e,state:t})=>{var r,n;try{let n,o;if(zv(t)){const{key:e,type:r}=this.currentState,{key:s,type:i}=t;this.currentState=t,o=t.navigateState,n=s!==e||"updateCurrentRoute"!==i&&"updateCurrentRoute"!==r?"navigate":"updateCurrentRoute"}else this.currentIndex=0;await this.listener({type:n,history:!0,url:e,navigateState:o}),null===(r=this.goPromiseResolve)||void 0===r||r.call(this)}catch(e){null===(n=this.goPromiseReject)||void 0===n||n.call(this,e)}}))}save(e){const{replace:t,url:r}=e;t||this.currentIndex++,this.currentState=Gv(e,this.currentState,this.currentIndex),this.historyWrapper.navigate({path:r.path,replace:t,state:this.currentState})}go(e,t){var r;if(this.currentIndex<1){if(null==t?void 0:t.historyFallback)return this.listener({url:t.historyFallback,type:"navigate",history:!1,replace:t.replace});const e=null===(r=this.tree)||void 0===r?void 0:r.getHistoryFallback(window.location.pathname);if(e)return this.listener({url:e.actualPath,type:"navigate",history:!1})}this.currentIndex+=e;const n=new Promise(((e,t)=>{this.goPromiseResolve=e,this.goPromiseReject=t}));return this.historyWrapper.history(e),n}}class Kv extends $v{constructor(e){super(e),this.fullRehydrationInProcess=null,this.history=new Yv,this.history.listen((async({type:e,url:t,navigateState:r,replace:n,history:o})=>{var s;const i=this.getCurrentUrl(),{pathname:a,query:c,hash:u}=this.resolveUrl({url:t}),l=(i?i.pathname:window.location.pathname)===a;if("updateCurrentRoute"!==e&&(e||!l)||i)if("updateCurrentRoute"===e||!e&&l){const e=null===(s=this.tree)||void 0===s?void 0:s.getRoute(a);await this.internalUpdateCurrentRoute({params:null==e?void 0:e.params,query:c,hash:u,replace:n,navigateState:r},{history:o})}else await this.internalNavigate({url:t,replace:n,navigateState:r},{history:o});else n?window.history.__originalHistory.replaceState(r,"",t):window.history.__originalHistory.pushState(r,"",t)}))}async rehydrate(e){this.fullRehydrationInProcess=!e.to,qv.debug({event:"rehydrate",navigation:e});const t=fa(window.location.href);if(this.currentNavigation={...e,type:"navigate",url:t},this.lastNavigation=this.currentNavigation,this.fullRehydrationInProcess){await this.runHooks("beforeResolve",this.currentNavigation);const e=this.resolveRoute({url:t},{wildcard:!0}),r=null==e?void 0:e.redirect;if(this.currentNavigation.to=e,r)return this.redirect(this.currentNavigation,Iv(r))}await this.runGuards(this.currentNavigation),this.history.init(this.currentNavigation),this.fullRehydrationInProcess&&this.runSyncHooks("change",this.currentNavigation),this.currentNavigation=null,this.fullRehydrationInProcess||this.addRoute({name:e.to.name,path:e.to.path,config:e.to.config,alias:t.pathname}),this.fullRehydrationInProcess=null}resolveRoute(...e){const{url:t}=e[0];if(!t||Nv(t))return super.resolveRoute(...e)}async notfound(e){var t,r;await super.notfound(e);const n=null!==(r=null===(t=e.fromUrl)||void 0===t?void 0:t.href)&&void 0!==r?r:window.location.href,o=e.url.href;if(e.from&&!e.to||n!==o)e.replace?window.location.replace(o):window.location.assign(o);else if(this.onBlock)return this.onBlock(e);return new Promise((()=>{}))}async block(e){return this.notfound(e)}async redirect(e,t){return await super.redirect(e,t),this.fullRehydrationInProcess?(window.location.replace(t.url),new Promise((()=>{}))):this.internalNavigate({...t,replace:t.replace||e.replace},{redirect:!0})}}var Wv=r(97939),Qv=r.n(Wv);const Zv=e=>({route:e,children:Object.create(null),parameters:[]}),Xv=(e,t,r)=>({...e,actualPath:t,params:null!=r?r:{}});class eg{constructor(e){this.tree=Zv(),ss()((e=>this.addRoute(e)),e)}addRoute(e){const t=Dv(e.path);let r=this.tree;for(let n=0;n<t.length;n++){const o=t[n],s=Bv(o);if(1===s.type)return void(r.historyFallbackRoute=e);if(2===s.type)return void(r.wildcardRoute=e);if(3===s.type){const{paramName:e,regexp:t,optional:n}=s,i=jr()((e=>e.key===o),r.parameters);if(i)r=i.tree;else{const s={key:o,paramName:e,regexp:t,optional:n,tree:Zv()};if(t&&!n){const e=Qv()((e=>!e.regexp),r.parameters);r.parameters.splice(e,0,s)}else r.parameters.push(s);r=s.tree}}else r.children[o]||(r.children[o]=Zv()),r=r.children[o]}r.route=e}getRoute(e){return this.findRoute(e,"route")}getWildcard(e){return this.findRoute(e,"wildcardRoute")}getHistoryFallback(e){const t=this.findRoute(e,"historyFallbackRoute");return t&&{...t,actualPath:t.path.replace(Mv,"")||"/"}}findRoute(e,t){const r="route"===t,n=Dv(e),o=[[this.tree,0]];for(;o.length;){const[s,i,a]=o.pop(),{children:c,parameters:u}=s;let l=!1;if(i>=n.length){if(s[t])return Xv(s[t],e,a);l=!0}!r&&s[t]&&o.push([s,n.length,a]);const d=n[i],p=c[d];for(const e of u){const{optional:t,tree:r}=e;t&&o.push([r,i,a])}if(!l){for(let e=u.length-1;e>=0;e--){const t=u[e],{paramName:r,tree:n,regexp:s}=t,c=null==s?void 0:s.exec(d),l=s?null==c?void 0:c[1]:d;l&&o.push([n,i+1,{...a,[r]:l}])}p&&o.push([p,i+1,a])}}}}const tg="_t_view_transitions",rg=[(0,i.J)({provide:Mt.sU,multi:!0,useFactory:({bundleManager:e,logger:t,responseManager:r,pageRegistry:n})=>{const o=t("route:load-bundles");return async({to:t})=>{o.debug({event:"load-bundle",route:t});const{bundle:s,pageComponent:i}=t.config;if(!e.has(s,i))return o.info({event:"load-bundle-not-found",bundle:s,pageComponent:i}),r.setStatus(404),!1;try{await n.resolve(t)}catch(e){return o.error({event:"load-bundle-failed",error:e}),!1}}},deps:{logger:E.Fp,bundleManager:_u,responseManager:Kl,pageRegistry:Mt._Q}}),(0,i.J)({provide:Mt.sU,multi:!0,useFactory:({responseManager:e,logger:t})=>{const r=t("route:guard-check-error");return async()=>{if(e.getStatus()>=500)return r.error({event:"status-is-error",status:e.getStatus()}),!1}},deps:{logger:E.Fp,responseManager:Kl}})],ng=[{provide:ou,multi:!0,useFactory:({context:e})=>t=>{e.dispatch(gu(t))},deps:{context:dr}}];var og=r(63609),sg=r.n(og),ig=r(86949),ag=r(70872);const cg=({router:e,children:t,serverState:r})=>{const n=(0,Vu.useMemo)((()=>e.getCurrentRoute()),[e]),o=(0,Vu.useMemo)((()=>e.getCurrentUrl()),[e]),s=(0,Vu.useCallback)((t=>e.registerSyncHook("change",t)),[e]),i=(0,ig.useSyncExternalStore)(s,(()=>{var t,r;return null!==(r=null===(t=e.getLastRoute)||void 0===t?void 0:t.call(e))&&void 0!==r?r:n}),r?()=>r.route:()=>{var t,r;return null!==(r=null===(t=e.getLastRoute)||void 0===t?void 0:t.call(e))&&void 0!==r?r:n}),a=(0,ig.useSyncExternalStore)(s,(()=>{var t,r;return null!==(r=null===(t=e.getLastUrl)||void 0===t?void 0:t.call(e))&&void 0!==r?r:o}),r?()=>r.url:()=>{var t,r;return null!==(r=null===(t=e.getLastUrl)||void 0===t?void 0:t.call(e))&&void 0!==r?r:o});return(0,Fu.jsx)(ag._q.Provider,{value:e,children:(0,Fu.jsx)(ag.Xn.Provider,{value:i,children:(0,Fu.jsx)(ag.qs.Provider,{value:a,children:t})})})};cg.displayName="TinkoffRouterProvider";const ug=cg,lg=[...rg,...ng,(0,i.J)({provide:lu,useFactory:({transformers:e})=>e&&0!==e.length?ho()(..._a()(e)):Sl(),deps:{transformers:{token:Mt.S3,optional:!0}}}),(0,i.J)({provide:Mt.S3,multi:!0,useValue:e=>{const t={bundle:"mainDefault",pageComponent:"pageDefault",...e.config};return{...e,config:t}}}),(0,i.J)({provide:Mt.S3,multi:!0,useValue:e=>({...e,path:sg()(/\/?$/,"/",e.path)})}),(0,i.J)({provide:Pi.Qv,multi:!0,useFactory:({router:e})=>{const t={route:e.getCurrentRoute(),url:e.getCurrentUrl()};return r=>(0,Fu.jsx)(ug,{router:e,serverState:t,children:r})},deps:{router:Mt.l1}}),(0,i.J)({provide:Mt.Y9,useClass:class{constructor({router:e,componentRegistry:t}){this.router=e,this.componentRegistry=t}getCurrentRoute(){return this.router.getCurrentRoute()}getCurrentUrl(){return this.router.getCurrentUrl()}getConfig(e=this.getCurrentRoute()){var t;return null!==(t=null==e?void 0:e.config)&&void 0!==t?t:{}}getContent(e){var t;return null!==(t=this.getConfig(e).content)&&void 0!==t?t:{}}getMeta(e){var t;return null!==(t=this.getConfig(e).meta)&&void 0!==t?t:{}}navigate(e){return this.router.navigate(e)}updateCurrentRoute(e){return this.router.updateCurrentRoute(e)}back(e){return this.router.back(e)}forward(){return this.router.forward()}go(e,t){return this.router.go(e,t)}addComponent(e,t,r){const n=this.getComponentsGroupName(r);return this.componentRegistry.add(e,t,n)}getComponent(e,t){const r=this.getComponentsGroupName(t);return this.componentRegistry.get(e,r)}resolveComponentFromConfig(e,t){var r;const n=`${e}Component`,o=`${e}Default`,s=null!==(r=this.getConfig(t)[n])&&void 0!==r?r:o;return this.getComponent(s,t)||this.getComponent(o,t)}getComponentsGroupName(e){const{bundle:t,pageComponent:r}=this.getConfig(e);return t}},deps:{router:Mt.l1,componentRegistry:wl}}),(0,i.J)({provide:Mt._Q,useClass:class{constructor({bundleManager:e,pageService:t,componentRegistry:r,actionRegistry:n,dispatcher:o,dispatcherContext:s}){this.bundleManager=e,this.pageService=t,this.componentRegistry=r,this.actionRegistry=n,this.dispatcher=o,this.dispatcherContext=s}async resolve(e){var t;const{bundle:r,pageComponent:n}=this.pageService.getConfig(e),o=this.pageService.resolveComponentFromConfig("nestedLayout",e),s=await this.bundleManager.get(r,n);await this.registerComponent(r,s);const i=null===(t=s.components)||void 0===t?void 0:t[n],a=[];i&&a.push(this.registerComponent(n,i)),o&&a.push(this.registerComponent(n,this.pageService.resolveComponentFromConfig("nestedLayout"))),await Promise.all(a)}async registerComponent(e,t){"load"in t&&await(async e=>{if(e){if("load"in e&&"function"==typeof e.load){const t=await e.load();let r;return r=t.__esModule?t.default:t.default||t,kl()(e,r),r}return e}})(t),"components"in t&&Jr()(t.components)&&Ht()(((t,r)=>{this.componentRegistry.add(r,t,e)}),t.components),"actions"in t&&xo()(t.actions)&&this.actionRegistry.add(e,t.actions),"reducers"in t&&xo()(t.reducers)&&t.reducers.forEach((e=>{this.dispatcher.registerStore(e),this.dispatcherContext.getStore(e)}))}},deps:{bundleManager:_u,pageService:Mt.Y9,componentRegistry:wl,actionRegistry:Oi,dispatcher:O.qb,dispatcherContext:O.jm}}),...[!1].filter(Boolean),(0,i.J)({provide:Mt.l1,useFactory:({RouterClass:e,routes:t,routeTransform:r,routeResolve:n,additionalParameters:o})=>{const s=new e({...o,trailingSlash:!0,mergeSlashes:!0,enableViewTransitions:!1,routes:_a()(null!=t?t:[]).map(r)});return n&&s.registerHook("beforeResolve",(async e=>{var t;const o=s.resolve(e.url.href);if(!o||(null===(t=o.config)||void 0===t?void 0:t.forceRouteResolve)){const t=await n(e);t&&s.addRoute(r(t))}})),s},deps:{RouterClass:ru,additionalParameters:{token:nu,optional:!0},routes:{token:Mt.Dk,optional:!0},routeTransform:lu,routeResolve:{token:Mt.TL,optional:!0}}}),(0,i.J)({provide:P.customerStart,multi:!0,useFactory:({router:e,guards:t,onChange:r,beforeResolve:n,beforeNavigate:o,afterNavigate:s,beforeUpdateCurrent:i,afterUpdateCurrent:a})=>function(){_a()(null!=t?t:[]).forEach((t=>e.registerGuard(t))),_a()(null!=r?r:[]).forEach((t=>e.registerSyncHook("change",t))),_a()(null!=n?n:[]).forEach((t=>e.registerHook("beforeResolve",t))),_a()(null!=o?o:[]).forEach((t=>e.registerHook("beforeNavigate",t))),_a()(null!=s?s:[]).forEach((t=>e.registerHook("afterNavigate",t))),_a()(null!=i?i:[]).forEach((t=>e.registerHook("beforeUpdateCurrent",t))),_a()(null!=a?a:[]).forEach((t=>e.registerHook("afterUpdateCurrent",t)))},deps:{router:Mt.l1,guards:{token:Mt.sU,optional:!0},onChange:{token:ou,optional:!0},beforeResolve:{token:su,optional:!0},beforeNavigate:{token:iu,optional:!0},afterNavigate:{token:au,optional:!0},beforeUpdateCurrent:{token:cu,optional:!0},afterUpdateCurrent:{token:uu,optional:!0}}}),(0,i.J)({provide:P.init,multi:!0,useFactory:({logger:e})=>function(){var t;t=e("route:router"),qv=t},deps:{logger:E.Fp}}),(0,i.J)({provide:Mt.$d,useValue:"after"}),(0,i.J)({provide:O.Ym,multi:!0,useValue:bu})];class dg extends Error{constructor({message:e="Block Error",...t}){super(e),this.name=dg.errorName,Object.assign(this,t)}}dg.errorName="BlockError";var pg=r(75633);const hg=(0,a.V3)(),fg=(0,a.V3)(),mg=[(0,i.J)({provide:hg,useValue:new Set}),(0,i.J)({provide:fg,useFactory:()=>{const e=(0,pg.R)();let t=Promise.resolve();return{add:r=>(t=t.then((()=>new Promise(((t,n)=>{e((()=>{r().then(t).catch(n)}))})))),t)}}}),(0,i.J)({provide:Mt.fw,useFactory:({router:e,routeTransform:t,routeResolve:r,logger:n,prefetchedLinksCache:o,prefetchedLinksQueue:s,pageRegistry:i,prefetchHandlers:a})=>{const c=n("link-prefetch-manager");return{prefetch:n=>s.add((()=>(async n=>{if(o.has(n))return;o.add(n),c.info({event:"prefetch-route-init",url:n});let s=e.resolve(n);if(!s&&r){const o=fa(n);s=await r({url:o,type:"navigate"}),s&&(s=t(s),e.addRoute(s))}if(s)try{await i.resolve(s),await Promise.all(a.map((e=>e(s)))),c.info({event:"prefetch-route-success",url:n})}catch(e){c.warn({event:"prefetch-fail",url:n,error:e})}else c.info({event:"prefetch-route-not-found",url:n})})(n)))}},deps:{router:Mt.l1,routeTransform:lu,routeResolve:(0,a.jt)(Mt.TL),logger:E.Fp,prefetchedLinksCache:hg,prefetchedLinksQueue:fg,pageRegistry:Mt._Q,prefetchHandlers:(0,a.jt)(Mt.Dv)}})],vg=[...mg,{provide:nu,useFactory:({store:e})=>({onBlock:async t=>{var r,n,o;let s=new dg({message:`Url ${null===(r=t.to)||void 0===r?void 0:r.actualPath} is blocked`,prevUrl:null!==(o=null===(n=t.fromUrl)||void 0===n?void 0:n.href)&&void 0!==o?o:window.location.href,nextUrl:t.url.href});var i;(i=s).isSilent=!0,s=i,e.dispatch(Qp(s))}}),deps:{store:O.kR}}];class gg extends Error{constructor({message:e="Http Error",httpStatus:t,...r}){super(e),this.name=gg.errorName,this.httpStatus=t,Object.assign(this,r)}}gg.errorName="HttpError";class yg extends gg{constructor({message:e="Not Found",...t}={}){super({message:e,httpStatus:404}),this.name=yg.errorName,Object.assign(this,t)}}yg.errorName="NotFoundError";class bg extends gg{constructor({message:e="Redirect Found",nextUrl:t,httpStatus:r=307,...n}){super({message:e,httpStatus:r}),this.name=bg.errorName,this.nextUrl=t,this.httpStatus=r,Object.assign(this,n)}}bg.errorName="RedirectFoundError";const wg=e=>e.name===bg.errorName,Eg=e=>{if(e.name===yg.errorName||wg(e))return!0},Sg=({store:e,router:t,actionRegistry:r,actionPageRunner:n})=>{const o=t.getCurrentRoute(),{config:{bundle:s,pageComponent:i}={}}=o;if(!s||!i)throw new Error(`bundle and pageComponent should be defined, but got ${o}`);return zi()([...r.getGlobal()||[],...r.get(s)||[],...r.get(i)||[]])},_g=e=>function(){const t=Sg(e);return e.actionPageRunner.runActions(t,Eg).catch((t=>{if(wg(t))return e.router.navigate({url:t.nextUrl,replace:!0,code:t.httpStatus});throw t.error||t}))},kg=[...vg,...lg,(0,i.J)({provide:P.customerStart,multi:!0,useFactory:({router:e,store:t,envManager:r})=>async function(){if("true"===r.get("TRAMVAI_FORCE_CLIENT_SIDE_RENDERING"))return e.rehydrate({});const n=t.getState(bu).currentRoute;return e.rehydrate({to:n})},deps:{router:Mt.l1,store:O.kR,envManager:S.vC}}),(0,i.J)({provide:P.clear,multi:!0,useFactory:({router:e,store:t})=>function(){return t.getState().router.currentUrl.href!==window.location.href&&t.dispatch(yu(e.getCurrentUrl())),e.start()},deps:{router:Mt.l1,store:O.kR}}),(0,i.J)({provide:P.clear,multi:!0,useFactory:e=>_g(e),deps:{store:O.kR,router:Mt.l1,actionRegistry:Oi,actionPageRunner:Ni}})],Tg=[{provide:iu,multi:!0,useFactory:({commandLineRunner:e,di:t})=>async({key:r})=>{await e.run("client","spa",[],t,r)},deps:{di:ur,commandLineRunner:x}},{provide:au,multi:!0,useFactory:({commandLineRunner:e,di:t})=>async({key:r})=>{await e.run("client","afterSpa",[],t,r)},deps:{di:ur,commandLineRunner:x}},{provide:P.spaTransition,multi:!0,useFactory:({spaMode:e,...t})=>()=>{if((e=>{Sg(e).forEach((t=>{const r=t[Sd],n=null==r?void 0:r.deferred,o=e.deferredActionsMap.get(null==r?void 0:r.name);n&&o&&e.actionExecution.canExecute(t)&&o.reset()}))})(t),"after"!==e)return _g(t)()},deps:{store:O.kR,router:Mt.l1,actionRegistry:Oi,actionPageRunner:Ni,spaMode:Mt.$d,deferredActionsMap:Di,actionExecution:Ai}},{provide:P.afterSpaTransition,multi:!0,useFactory:({spaMode:e,...t})=>"after"===e?_g(t):mi(),deps:{store:O.kR,router:Mt.l1,actionRegistry:Oi,actionPageRunner:Ni,spaMode:Mt.$d}}],Cg=(e,t={})=>[{provide:Mt.Dk,multi:!0,useValue:e},t.spaActionsMode&&{provide:Mt.$d,useValue:t.spaActionsMode}].filter(Boolean),Rg=o({name:"SpaRouterModule",providers:[...kg,...Tg,(0,i.J)({provide:ru,useValue:class extends Kv{constructor(e){super(e),this.tree=new eg(e.routes),this.history.setTree(this.tree),this.viewTransitionsEnabled&&(this.restoreAppliedViewTransitions(),window.addEventListener("pagehide",(()=>{this.saveAppliedViewTransitions()})))}async rehydrate(e){return this.resolveIfDelayFound(super.rehydrate(e))}async start(){if(await super.start(),this.delayedNavigation){const{delayedNavigation:e}=this;return this.delayedNavigation=null,this.flattenDelayedNavigation(e)}}async run(e){const t={...e};if(this.viewTransitionsEnabled&&(t.viewTransition=this.shouldApplyViewTransition(e)),this.started)return this.currentNavigation?this.delayNavigation(t):(this.delayedNavigation&&(qv.info({event:"delay-navigation-drop",delayedNavigation:this.delayedNavigation,navigation:t}),this.delayedNavigation=null),this.flattenDelayedNavigation(t));this.delayNavigation(t)}delayNavigation(e){return this.delayedNavigation=e,qv.info({event:"delay-navigation",navigation:e}),this.delayedPromise||(this.delayedPromise=new Promise(((e,t)=>{this.delayedResolve=e,this.delayedReject=t}))),this.delayedPromise}commitNavigation(e){if(!e.cancelled&&!e.skipped)return super.commitNavigation(e);qv.debug({event:"delay-ignore-commit",navigation:e})}async runGuards(e){if(!e.cancelled)return super.runGuards(e);qv.debug({event:"delay-ignore-guards",navigation:e})}async runHooks(e,t){if(t.cancelled&&this.lastNavigation!==t)qv.debug({event:"delay-ignore-hooks",navigation:t});else try{await super.runHooks(e,t)}catch(e){return this.notfound(t)}}async resolveIfDelayFound(e){let t;const r=setInterval((()=>{var e;this.delayedNavigation&&("navigate"===this.delayedNavigation.type||this.delayedNavigation.type===(null===(e=this.currentNavigation)||void 0===e?void 0:e.type)?(qv.info({event:"delay-navigation-found",navigation:this.delayedNavigation}),this.currentNavigation&&(this.currentNavigation.cancelled=!0,this.currentNavigation=null),t()):this.delayedResolve())}),50);await Promise.race([e,new Promise((e=>{t=e}))]),clearInterval(r),t()}async flattenDelayedNavigation(e){const t=async e=>{if(await this.resolveIfDelayFound(super.run(e)),this.delayedNavigation){const{delayedNavigation:e}=this;return qv.info({event:"delay-navigation-run",navigation:e}),this.delayedNavigation=null,t(e)}};return t(e).then((()=>{var e;null===(e=this.delayedResolve)||void 0===e||e.call(this)}),(e=>{var t;null===(t=this.delayedReject)||void 0===t||t.call(this,e)})).finally((()=>{this.delayedPromise=null,this.delayedResolve=null,this.delayedReject=null}))}shouldApplyViewTransition(e){var t,r;const n=e.from.actualPath,o=void 0!==e.to.redirect?null===(t=this.resolve(e.to.redirect))||void 0===t?void 0:t.actualPath:null===(r=e.to)||void 0===r?void 0:r.actualPath;if(e.viewTransition){const e=this.appliedViewTransitions.get(n);return this.appliedViewTransitions.get(n)?e.add(o):this.appliedViewTransitions.set(n,new Set([o])),!0}const s=this.appliedViewTransitions.get(n);return!(void 0===s||!s.has(o))||this.appliedViewTransitions.has(o)}restoreAppliedViewTransitions(){try{const e=sessionStorage.getItem(tg);if(null!==e){const t=JSON.parse(e);return void(this.appliedViewTransitions=new Map(Object.entries(t).map((([e,t])=>[e,new Set(t)]))))}this.appliedViewTransitions=new Map}catch(e){this.appliedViewTransitions=new Map}}saveAppliedViewTransitions(){if(this.appliedViewTransitions.size>0)try{const e={};for(const[t,r]of this.appliedViewTransitions)e[t]=[...r];sessionStorage.setItem(tg,JSON.stringify(e))}catch(e){}}cancel(){if(!this.isNavigating())return;qv.debug({event:"cancelled",navigation:this.currentNavigation});const e=this.currentNavigation;return this.currentNavigation.skipped=!0,this.currentNavigation=null,e}}}),(0,i.J)({provide:Mt.aP,useValue:"spa"})],extend:{forRoot:Cg}}),xg=e=>e.href.replace(/#.*$/,""),Mg=o({name:"NoSpaRouterModule",providers:[...kg,(0,i.J)({provide:ru,useValue:class extends Kv{run(e){const{type:t,fromUrl:r,url:n}=e;return"updateCurrentRoute"===t||xg(n)===xg(r)?super.run(e):this.notfound(e)}async runHooks(){}}}),(0,i.J)({provide:Mt.aP,useValue:"no-spa"})],extend:{forRoot:Cg}});var Pg=r(48161),Og=r(84287);const Ag=[{provide:Mt.TL,useFactory:function({cookieManager:e,logger:t,plutoPublicApi:r,resolveUrlResponseMapper:n,responseManager:o,resolveReferrer:s,requestManager:i}){const a=t("route-pluto-admin:route-resolve");return async({url:t})=>{if(!t)return a.error({message:"Failed to resolve route: url is not defined"}),o.setStatus(500);a.info({message:`Resolving ${(0,Og.l)(t.path)}`});const c=i.getHeader("user-agent"),u=await r.resolveUrl({url:t.path},{headers:{"x-real-user-agent":c}});var l;if(!(u&&u.status>=200&&u.status<400))return a.error({message:`Got ${null==u?void 0:u.status} status code from pluto-backend`,url:(0,Og.l)(t.path),referer:s()}),o.setStatus(null!=(l=null==u?void 0:u.status)?l:500);const d=Object.entries(u.headers).find((([e])=>"set-cookie"===e.toLowerCase()));d&&(0,Pg.parse)(d[1]).forEach((t=>{const{sameSite:r,...n}=t;try{e.set({...n,sameSite:r})}catch(e){a.error({error:e,message:`Failed to set set-cookie header with value=${JSON.stringify(t)}`})}}));const p=await n({requestUrl:t,response:u});return p||(a.error({message:"Failed to map resolve url response to route",extra:{route:p}}),o.setStatus(500))}},deps:{cookieManager:er.T,logger:E.Fp,plutoPublicApi:Om.i,resolveUrlResponseMapper:Sv,responseManager:Kl,resolveReferrer:Tv.x,requestManager:tr.G}}];var Ng,Ig;(0,n.Y)({imports:[Rg],providers:Ag})(((Ng=class{}).forRoot=(Ig=Ng,(e,t={})=>({mainModule:Ig,providers:Cg(e,t)})),Ng));const Lg=Mg;var Dg;let jg=(0,n.Y)({imports:[],providers:[]})(Dg=class{})||Dg;var Fg,Vg,Bg=r(89025),Ug=r(18208);let qg=(Fg=(0,n.Y)({providers:[(0,i.J)({provide:P.init,useFactory:()=>()=>{if((0,Ug.C)()){const e=["https://www.tbank.ru","https://www.tinkoff.ru","https://www-test.tbank.ru","https://www-test.tinkoff.ru"],t=t=>{try{if(e.includes(t.origin)){var r;const e=JSON.parse(t.data);if(e.type===Bg.Z.AppFramePageRedirect&&null!=e&&null!=(r=e.result)&&r.url){window.open(e.result.url,"_blank","noopener,noreferrer");const r=Array.from(document.getElementsByTagName("iframe")).find((e=>e.contentWindow===t.source));var n;r&&(null==r||null==(n=r.parentNode)||n.removeChild(r))}}}catch(e){}};window.addEventListener("message",t)}}})]}),Fg(Vg=class{})||Vg);var $g;r(35595);let Hg=(0,n.Y)({providers:[(0,i.J)({provide:Pi.uf,useFactory:({userAgent:e})=>{var t;const r=(null==e?void 0:e.mobileOS)&&"tablet"!==(null==e||null==(t=e.device)?void 0:t.type),n=((null==e?void 0:e.mobileOS)||"").toLowerCase();return{target:"body",attrs:{"data-device":r?Kf.Yi.Mobile:Kf.Yi.Desktop,...n?{"data-platform":n}:{}}}},deps:{userAgent:{token:Cu,optional:!0}},multi:!0})]})($g=class{})||$g;var Jg;let zg=(0,n.Y)({providers:[(0,i.J)({provide:S.sQ,useValue:[{key:"FRONT_LOG_API"},{key:Gf.qk},{key:Gf.kr},{key:"DADATA_API"},{key:"INSURANCE_API"},{key:"GEO_API"},{key:"BROKER_API"},{key:Gf.y9}],multi:!0})]})(Jg=class{})||Jg;var Gg=r(5983);const Yg=(e,t,r)=>{const n=!!(0,Ug.C)()&&window.innerWidth>window.innerHeight,o=(0,Gg.U)();e.forEach((e=>{const s=Number((null==e?void 0:e.getAttribute("height"))||r),i=Number((null==e?void 0:e.getAttribute("width"))||r),a=s/i;if(n&&a>1&&o)e.style.height=i*a+"px",e.style.width=`${Gf.lZ}px`;else{const n=((e,t,r)=>{var n;const o=r/t;return(((0,Ug.C)()&&null!=(n=window.innerWidth)?n:Gf.RZ)-e)*o})(t,r,s);e.style.height=`${n}px`,e.style.width=""}}))},Kg=()=>{document.body.getAttribute("data-device")===Kf.Yi.Mobile&&(Yg(document.querySelectorAll("article figure > img"),Gf.RZ-Gf.lZ,Gf.BC.phone["12col"]),Yg(document.querySelectorAll("article li figure > img"),Gf.RZ-Gf.BC.phone.list,Gf.BC.phone.list),Yg(document.querySelectorAll("article details figure > img"),Gf.RZ-Gf.BC.phone.details,Gf.BC.phone.details),Yg(document.querySelectorAll("article details li figure > img"),Gf.RZ-Gf.BC.phone.listInDetails,Gf.BC.phone.listInDetails))};var Wg=r(9847),Qg=r.n(Wg);const Zg=1230,Xg=1279,ey=.96094,ty=1180,ry=1229,ny=.92188,oy=1130,sy=1179,iy=.88281,ay=1080,cy=1129,uy=.84375,ly=1030,dy=1079,py=.80469,hy=1024,fy=1029,my=.8,vy=(e,t,r)=>{var n;if(null===document.querySelector(e))return;const o=r&&(r.ctrlKey||r.metaKey||r.shiftKey||1===r.button);if(r&&!o&&r.preventDefault(),"complete"===(null==(n=document)?void 0:n.readyState)){const r=document.querySelectorAll(e);if(r.length>0){t&&(r.forEach((e=>{e.classList.add(Qg().highlighted)})),setTimeout((()=>{r.forEach((e=>{e.classList.remove(Qg().highlighted)}))}),3e3));const e=(()=>{switch(!0){case window.innerWidth>=Zg&&window.innerWidth<=Xg:return ey;case window.innerWidth>=ty&&window.innerWidth<=ry:return ny;case window.innerWidth>=oy&&window.innerWidth<=sy:return iy;case window.innerWidth>=ay&&window.innerWidth<=cy:return uy;case window.innerWidth>=ly&&window.innerWidth<=dy:return py;case window.innerWidth>=hy&&window.innerWidth<=fy:return my;default:return 1}})(),n=r[0].getBoundingClientRect().top+window.scrollY-Gf.gz*e,o=window.scrollY;setTimeout((()=>{((e,t,r=300)=>{const n=t-e,o=performance.now(),s=t=>{const i=t-o,a=Math.min(i/r,1),c=(e=>e<.5?2*e*e:(4-2*e)*e-1)(a);window.scrollTo(0,e+n*c),a<1&&requestAnimationFrame(s)};requestAnimationFrame(s)})(o,n)}),200)}}},gy=e=>{var t,r;const n="localhost"===(null==(t=window)||null==(t=t.location)?void 0:t.hostname)?"https://www.tbank.ru":null==(r=window)||null==(r=r.location)?void 0:r.origin;return new URL(null!=e&&e.includes("://")?e:`${n}${e}`)};var yy=r(89416);let by=function(e){return e.Default="default",e.OnPopState="onPopState",e}({});const wy=e=>{const{anchor:t,card:r}=(0,yy.S)(),n=gy(window.location.href),{hash:o}=n;r&&vy(`[data-url="${n.pathname}?card=${r}"]`,!1),t&&vy(`#${t}`,!0),o&&vy(o,!1),r||t||o||e!==by.OnPopState||vy("body",!1)};var Ey,Sy;let _y=(Ey=(0,n.Y)({providers:[(0,i.J)({provide:P.resolvePageDeps,useFactory:({pageService:e,PageInfo:t})=>()=>{(0,Ug.C)()&&(document.addEventListener("click",(r=>((e,t,r)=>{const{card:n,anchor:o,currentPath:s,linkPath:i,hash:a,id:c,otherPrams:u,href:l}=(e=>{const t=e.target,r=t&&(null==t?void 0:t.closest("[href]")),n=r&&r.getAttribute("href"),o=r&&r.getAttribute("id")||void 0,s=gy(n||""),i=new URL(window.location.href),a=s.searchParams.get("card"),c=s.searchParams.get("anchor"),{hash:u}=s,l=Object.fromEntries(Array.from(s.searchParams.entries()).filter((e=>"card"!==e[0]&&"anchor"!==e[0])));return{card:a,anchor:c,id:o,currentPath:i.pathname,linkPath:s.pathname,href:n,hash:u,otherPrams:l}})(e);if(l&&l.includes("l.tbank.ru"))return e.preventDefault(),void window.open(((e,t)=>{const r=encodeURIComponent(t.replace(/^\//,"").replace(/\/$/,""));return e.endsWith("/")?`${e}${r}`:`${e}/${r}`})(l,s),"_blank","noopener,noreferrer");if(i===s){if(!c&&e.target){var d;const r=Date.now().toString(36)+Math.random().toString(36).slice(2);null==(d=e.target.closest("[href]"))||d.setAttribute("id",r),t.updateCurrentRoute({hash:r,replace:!0})}return c!==n&&c!==o&&Boolean(c)&&t.updateCurrentRoute({hash:c}),n&&(vy(`[data-url="${i}?card=${n}"]`,!1,e),t.updateCurrentRoute({query:{card:n,...u},hash:""})),void(o&&(vy(`#${o}`,!0,e),t.updateCurrentRoute({query:{anchor:o,...u},hash:""})))}if("/"===i&&a)return vy(a,!1,e),void t.updateCurrentRoute({query:u,hash:a});r&&l&&(e.preventDefault(),t.navigate(l))})(r,e,t.isVisitFromLK))),window.addEventListener("resize",Kg),window.addEventListener("orientationchange",Kg),window.addEventListener("popstate",(()=>wy(by.OnPopState))),window.onload=()=>{setTimeout((()=>{Kg(),wy()}),0)})},deps:{pageService:Mt.Y9,PageInfo:Gm.R}})]}),Ey(Sy=class{})||Sy);!function(e){let t;try{t=new En(e)}catch(e){throw e.appCreationError=!0,e}t.initialization("client").then((()=>t)).catch((e=>{throw e instanceof Error&&(e.appCreationError=!0),e}))}({name:Gf.iC,modules:[dn,jg,Af,Of,ep,ir,xh.forRoot({useStrictMode:!0}),of,Mf,Gt,to,Ti,Om.T,xm,qf,Gm.k,Tv.b,Im,Zm,kv,Lg,Ga,Wp,Lr,Zu,Ci,Df,qg,_y,zg,Hg,cr],providers:[...Ir.forRoot({projects:[{project:"pwa"}]}).providers,{provide:l.Qo,scope:d.s.SINGLETON,useValue:{appName:Gf.iC}},jf,{provide:Bt,useValue:"/livenessProbe"},{provide:Ut,useValue:"/readinessProbe"},{provide:P.init,useFactory:({statistClient:e})=>()=>{(0,Ug.C)()&&window.addEventListener("beforeunload",(()=>{e.forceSend()}))},deps:{statistClient:_t.E},multi:!0}],bundles:{mainDefault:()=>r.e("mainDefault").then(r.bind(r,87907))}})},37323:function(e,t,r){"use strict";r.d(t,{l:function(){return n}});const n={A:"a",ASIDE:"aside",ASIDE_CONTAINER:"aside-container",B:"b",BUTTON:"button",COLUMN:"column",CONTAINER:"container",DETAILS:"details",DOC_A:"doc-a",FRAGMENT:"fragment",H2:"h2",H3:"h3",H6:"h6",HIGHLIGHT:"highlight-block",HINT:"hint",NBSP:"nb-sp",IMG:"image",INDENT:"indent-block",LI:"li",MARK:"mark",MEDIA_DESKTOP:"media-desktop",MEDIA_MOBILE:"media-mobile",MOBILE_TABLE:"m-table",MOBILE_TABLE_CELL:"m-table-cell",MOBILE_TABLE_PRIMARY:"m-table-primary",MOBILE_TABLE_SECONDARY:"m-table-secondary",MOBILE_TABLE_SUBTITLE:"m-table-subtitle",MOBILE_TABLE_TITLE:"m-table-title",OL:"ol",P:"p",TABLE:"table",TABLE_BODY:"tbody",TABLE_DATA:"td",TABLE_TD_ASIDE:"td-aside",TABLE_HEAD:"thead",TABLE_ROW:"tr",TABLE_TH:"th",TABLE_TH_ASIDE:"th-aside",TEXT:"text",UL:"ul",VIDEO:"video",IFRAME:"iframe",MEDIA:"media",DCO:"dco",DCO_A:"dco-a",DCO_B:"dco-b"}},19799:function(e,t,r){"use strict";r.d(t,{U:function(){return o}});var n=r(52675);function o({width:e}){return e<n.media.TABLET_S}},18892:function(e,t,r){"use strict";r.d(t,{$K:function(){return M},A$:function(){return A},AT:function(){return x},Ad:function(){return I},BB:function(){return d},CE:function(){return P},CW:function(){return g},G5:function(){return u},HZ:function(){return b},J5:function(){return h},K$:function(){return C},K7:function(){return E},Q2:function(){return p},Tw:function(){return a},WJ:function(){return R},Yn:function(){return S},Yt:function(){return y},Zh:function(){return o},_i:function(){return v},bl:function(){return i},c9:function(){return _},dG:function(){return c},f5:function(){return D},fL:function(){return N},hD:function(){return w},i3:function(){return L},k7:function(){return f},qi:function(){return m},qx:function(){return k},r9:function(){return T},sY:function(){return n},t7:function(){return s},u5:function(){return O},yt:function(){return l}});const n="x-application",o="tinkoff",s="app_bank",i="app_bank_fromwebview",a="help-visited-from-app-bank-webview",c="utm_source",u="mb",l="utm_content",d="search",p="internal_source",h="lk",f="lk_bank",m="lk_search",v="app_inv",g="help-visited-from-app-invest",y="app_sme",b="help-visited-from-app-sme",w="lk_inv",E="help-visited-from-lk-invest",S="lk_sme",_="help-visited-from-lk-sme",k="help-visited-from-mobile-app",T="help-visited-from-mobile-app-search",C="help-visited-from-bank-lk",R="true",x="header-customization",M="hidden",P="with-arrow",O="footer-customization",A="hidden",N="boxy-blocks-customization",I="hidden",L="header-color",D="white"},74075:function(e,t,r){"use strict";r.d(t,{R:function(){return h},k:function(){return f}});var n,o=r(59999),s=r(80283),i=r(97570),a=r(82912),c=r(10776),u=r(8479),l=r(73212),d=r(23436),p=r(18892);const h=(0,o.V3)("PAGE_INFO_TOKEN");let f=(0,s.Y)({providers:[(0,i.J)({provide:h,useClass:class{constructor({requestManager:e,cookie:t}){this.cookieManager=void 0,this.isVisitedDataExists=e=>this.cookieManager.get(e)===p.WJ,this.isVisitFromMobileApp=()=>this.isVisitedDataExists(p.qx),this.isVisitFromWebview=()=>this.isVisitedDataExists(p.Tw),this.isVisitFromMobileAppSearch=()=>this.isVisitedDataExists(p.r9),this.isVisitFromLKBank=()=>this.isVisitedDataExists(p.K$),this.isVisitFromLkInvest=()=>this.isVisitedDataExists(p.K7),this.isVisitFromSmeLk=()=>this.isVisitedDataExists(p.c9),this.isVisitFromAppInvest=()=>this.isVisitedDataExists(p.CW),this.isVisitFromSmeApp=()=>this.isVisitedDataExists(p.HZ),this.resetPersonalizationCookies=e=>{[p.CW,p.HZ,p.K7,p.c9,p.qx,p.r9,p.K$,p.Tw].forEach((e=>{this.cookieManager.set({name:e,value:"",expires:new Date(-1)})})),this.cookieManager.set({name:e,value:p.WJ,expires:1500})},this.saveOldRequestMeta=e=>{var t,r,n,o,s,i,a,c,u;const l=e.getParsedUrl().query;(e.getHeader(p.sY)===p.Zh||l[p.Q2]===p.t7)&&this.resetPersonalizationCookies(p.qx),l[p.yt]===p.BB&&l[p.dG]===p.G5&&this.resetPersonalizationCookies(p.r9),((null==(t=l[p.dG])?void 0:t.includes(p._i))||(null==(r=l[p.Q2])?void 0:r.includes(p._i)))&&this.resetPersonalizationCookies(p.CW),((null==(n=l[p.dG])?void 0:n.includes(p.Yt))||(null==(o=l[p.Q2])?void 0:o.includes(p.Yt)))&&this.resetPersonalizationCookies(p.HZ);const d=null==(s=l[p.Q2])?void 0:s.includes(p.hD);d&&this.resetPersonalizationCookies(p.K7);const h=null==(i=l[p.Q2])?void 0:i.includes(p.Yn);h&&this.resetPersonalizationCookies(p.c9),((null==(a=l[p.Q2])?void 0:a.includes(p.k7))||(null==(c=l[p.Q2])?void 0:c.includes(p.qi))||(null==(u=l[p.Q2])?void 0:u.includes(p.J5))&&!h&&!d)&&this.resetPersonalizationCookies(p.K$),l[p.Q2]===p.bl&&this.resetPersonalizationCookies(p.Tw)},this.getHeaderCustomizationMode=()=>this.cookieManager.get(p.AT),this.getHeaderColorCustomization=()=>this.cookieManager.get(p.i3),this.getFooterCustomizationMode=()=>this.cookieManager.get(p.u5),this.getBoxyBlocksCustomizationMode=()=>this.cookieManager.get(p.fL),this.saveCustomizationData=e=>{const t=e.getParsedUrl().query;[p.AT,p.i3,p.u5,p.fL].forEach((e=>{const r=t[e];r&&this.cookieManager.set({name:e,value:r,expires:1500})}))},this.cookieManager=t,this.saveOldRequestMeta(e),this.saveCustomizationData(e)}get isHeaderVisible(){return!(this.isVisitFromMobileApp()||this.isVisitFromWebview()||this.isVisitFromMobileAppSearch()||this.isVisitFromLKBank()||this.isVisitFromLkInvest()||this.isVisitFromSmeLk()||this.getHeaderCustomizationMode()===p.$K||this.getHeaderCustomizationMode()===p.CE)}get isFooterVisible(){return!(this.isVisitFromMobileApp()||this.isVisitFromWebview()||this.isVisitFromMobileAppSearch()||this.isVisitFromLKBank()||this.getFooterCustomizationMode()===p.A$)}get isBoxyBlocksVisible(){return!(this.isVisitFromMobileApp()||this.isVisitFromWebview()||this.isVisitFromMobileAppSearch()||this.getBoxyBlocksCustomizationMode()===p.Ad)}get isCustomNavigationEnabled(){return this.isVisitFromLKBank()||this.isVisitFromWebview()||this.isVisitFromLkInvest()||this.isVisitFromSmeLk()||this.getHeaderCustomizationMode()===p.CE}get headerCustomColorMode(){return this.getHeaderColorCustomization()}get isShowShortTitle(){return this.isVisitFromMobileAppSearch()}get isVisitFromLK(){return this.isVisitFromLKBank()}get isVisitFromMB(){return this.isVisitFromMobileAppSearch()}get isVisitFromBankWebView(){return this.isVisitFromWebview()}get isVisitFromMobApp(){return this.isVisitFromMobileApp()}get isVisitFromAppInv(){return this.isVisitFromAppInvest()}get isVisitFromAppSme(){return this.isVisitFromSmeApp()}get isVisitFromLkInv(){return this.isVisitFromLkInvest()}get isVisitFromLkSme(){return this.isVisitFromSmeLk()}},deps:{requestManager:a.G,cookie:c.T}}),(0,i.J)({provide:u.zS,multi:!0,useFactory:({PageInfo:e})=>e.headerCustomColorMode===p.f5?[{type:l.LO.meta,slot:d.TF,payload:'<meta name="theme-color" content="#f6f7f8" />'}]:[],deps:{PageInfo:h}})]})(n=class{})||n},58942:function(e,t,r){"use strict";r.d(t,{i:function(){return C},T:function(){return R}});var n=r(59999),o=r(80283),s=r(97570),i=r(9056),a=r(10776),c=r(82571),u=r(82342),l=r(82912),d=r(3566),p=r(9019),h=r(95057);function f(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function v(e){return"__private_"+m+++"_"+e}const g=/[^\t\u0020-\u007E\u0080-\u00FF]/,y=new Set(["cookie","referer","user-agent"]);var b,w=v("request"),E=v("feedbackRequest"),S=v("makeProxableHeaders");async function _(e){return this.httpClient.request({...e,baseUrl:this.baseUrl,method:"GET",path:"resolve-url/",timeout:2e4})}async function k(e){try{return await this.httpClient.request({...e,baseUrl:this.baseClientUrl})}catch(t){const r=t;if(this.logger.error({message:`Failed to ${e.method} feedback`,error:r}),!Number.isInteger(r.status))return;return{headers:{},payload:{status:"error",data:void 0},status:r.status}}}function T(){const e=Object.entries(this.cookieManager.all()).map((([e,t])=>`${e}=${t}`)).filter((e=>!g.test(e))).join("; ").trim();return Object.entries({...this.requestManager.getHeaders(),cookie:e}).filter((([e])=>{const t=e.trim().toLowerCase();return y.has(t)||t.startsWith("x-")})).reduce(((e,[t,r])=>(e[t]=r,e)),{})}const C=(0,n.V3)("PLUTO_PUBLIC_API");let R=(0,o.Y)({providers:[(0,s.J)({provide:C,useClass:class{constructor({cookieManager:e,envManager:t,httpClientFactory:r,logger:n,requestManager:o,resolveReferrer:s}){Object.defineProperty(this,S,{value:T}),Object.defineProperty(this,E,{value:k}),Object.defineProperty(this,w,{value:_}),this.baseUrl=void 0,this.baseClientUrl=void 0,this.cookieManager=void 0,this.httpClient=void 0,this.logger=void 0,this.requestManager=void 0,this.resolveReferrer=void 0,this.baseUrl=t.get(p.f7),this.baseClientUrl=t.get(p.Ot),this.cookieManager=e,this.httpClient=r({name:"pluto-public-api:http-client",disableCache:!0,disableCircuitBreaker:!0}),this.logger=n("pluto-public-api-client:service"),this.requestManager=o,this.resolveReferrer=s}async resolveUrl(e,t){const r={...null==t?void 0:t.query,...e},n={...t,query:r};try{const e={...n,headers:{...null==t?void 0:t.headers,...f(this,S)[S]()}};return await f(this,w)[w](e).catch((e=>{if(e.status>399&&e.status<500)throw e;return this.logger.error({error:e,message:`Failed to resolve ${r.url} with headers request`,referer:this.resolveReferrer()}),f(this,w)[w](n)}))}catch(e){const t=e;if(this.logger.error({message:`Failed to resolve ${r.url}`,error:t,referer:this.resolveReferrer()}),!Number.isInteger(t.status))return;return{headers:{},payload:{status:"error",data:void 0},status:t.status}}}feedbackCreate(e){return f(this,E)[E]({method:"POST",path:"feedbacks/",body:e,requestType:"json"})}feedbackUpdate(e,t){return f(this,E)[E]({method:"PATCH",path:`feedbacks/${t}/`,body:e,requestType:"json"})}},deps:{cookieManager:a.T,envManager:c.vC,httpClientFactory:i.FB,logger:u.Fp,requestManager:l.G,resolveReferrer:h.x,wuid:d.$}}),(0,s.J)({provide:c.sQ,useValue:[{key:p.f7}],multi:!0}),(0,s.J)({provide:c.sQ,useValue:[{key:p.Ot}],multi:!0})]})(b=class{})||b},95057:function(e,t,r){"use strict";r.d(t,{b:function(){return d},x:function(){return l}});var n,o=r(84287),s=r(80283),i=r(97570),a=r(82912),c=r(59999);const u={requestManager:a.G},l=(0,c.V3)("RESOLVE_REFERRER");let d=(0,s.Y)({providers:[(0,i.J)({provide:l,useFactory:({requestManager:e})=>function(){return(0,o.l)(e.getHeader("referer"))},deps:u})]})(n=class{})||n},29198:function(e,t,r){"use strict";r.d(t,{CA:function(){return i},Tt:function(){return n},Yi:function(){return o},as:function(){return s}});const n=["s","m"];let o=function(e){return e.Desktop="desktop",e.Mobile="mobile",e}({}),s=function(e){return e.Created="created",e.Updated="updated",e.CustomText="custom_text",e}({}),i=function(e){return e.End="end",e.Start="start",e.Center="center",e}({})},5983:function(e,t,r){"use strict";r.d(t,{U:function(){return s}});var n=r(29198),o=r(18208);const s=()=>!(0,o.C)()||document.body.getAttribute("data-device")===n.Yi.Mobile},89416:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});var n=r(18892),o=r(18208);const s=()=>{var e,t;const r=new URLSearchParams((0,o.C)()?window.location.search:"");return{lkSearch:(null==(e=r.get(n.Q2))?void 0:e.includes(n.k7))||(null==(t=r.get(n.Q2))?void 0:t.includes(n.qi))||!1,mobileBank:r.get(n.dG)===n.G5,anchor:r.get("anchor"),card:r.get("card")}}},18208:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});const n=()=>!0},46513:function(e,t,r){"use strict";function n({src:e,preset:t}){return`${e}?preset=${t}`}r.d(t,{o:function(){return n}})},77531:function(e){"use strict";e.exports={SPACING_ALIAS:{tiny:"spacing-tiny",xxxs:"spacing-xxxs",xxs:"spacing-xxs",xs:"spacing-xs",s:"spacing-s",m:"spacing-m",l:"spacing-l",xl:"spacing-xl",xxl:"spacing-xxl",xxxl:"spacing-xxxl",huge:"spacing-huge"},SHADOW_ALIAS:{default:"shadow-default",sidebar:"shadow-sidebar",modal:"shadow-modal",popover:"shadow-popover",dropdown:"shadow-dropdown",defaultHover:"shadow-default-hover",modalMobile:"shadow-modal-mobile",tooltip:"shadow-tooltip"},MEDIA_ALIAS:{phoneSmall:"PHONE_SMALL",phoneGiant:"PHONE_GIANT",phone:"PHONE",mediumTablets:"MEDIUM_TABLETS",tablets:"TABLETS",mobile:"MOBILE",desktop:"DESKTOP",desktopSmall:"DESKTOP_SMALL",desktopMedium:"DESKTOP_MEDIUM",desktopLargeBoard:"DESKTOP_LARGE_BOARD",desktopLarge:"DESKTOP_LARGE",desktopExtraLarge:"DESKTOP_EXTRA_LARGE",tabletS:"TABLET_S",tabletL:"TABLET_L",desktopS:"DESKTOP_S",desktopMd:"DESKTOP_MD",desktopM:"DESKTOP_M",desktopL:"DESKTOP_L"},LAYERS_ALIAS:{hidden:"layer-hidden",zero:"layer-zero",normal:"layer-normal",popover:"layer-popover",navigation:"layer-navigation",overlay:"layer-overlay",alert:"layer-alerts"},BORDER_ALIAS:{defaultS:"border-default-s",defaultL:"border-default-l",radiusS:"border-radius-s",radiusL:"border-radius-l"}}},18717:function(e){"use strict";e.exports={"border-default-s":"1px solid #B3B3B3","border-default-l":"2px solid #B3B3B3","border-radius-s":"4px","border-radius-l":"8px"}},33105:function(e){"use strict";e.exports={D_12:12,D_18:18,D_24:24,D_30:30,D_36:36,D_42:42,D_48:48,D_60:60,D_66:66,D_78:78,D_84:84,D_90:90,D_102:102,D_108:108,D_120:120,D_138:138,D_174:174,D_198:198}},33086:function(e){"use strict";e.exports={M_30:30,M_36:36,M_42:42,M_60:60,M_66:66,M_78:78,M_84:84,M_120:120,M_138:138}},52675:function(e,t,r){"use strict";const n=r(18717),o=r(33105),s=r(33086),i=r(23367),a=r(12098),c=r(23188),u=r(65894),l=r(77531);e.exports={border:n,iconDesktopSizes:o,iconMobileSizes:s,layers:i,media:a,shadow:c,spacing:u,...l}},23367:function(e){"use strict";e.exports={"layer-hidden":-1,"layer-zero":0,"layer-normal":1,"layer-popover":100,"layer-navigation":200,"layer-overlay":300,"layer-alerts":400}},12098:function(e){"use strict";e.exports={PHONE_SMALL:370,PHONE_GIANT:541,PHONE:599,MEDIUM_TABLETS:600,TABLETS:600,MOBILE:1023,DESKTOP:1024,DESKTOP_SMALL:1024,DESKTOP_MEDIUM:1360,DESKTOP_LARGE_BOARD:1600,DESKTOP_LARGE:1600,DESKTOP_EXTRA_LARGE:1716,TABLET_S:600,TABLET_L:768,DESKTOP_S:1024,DESKTOP_MD:1280,DESKTOP_M:1360,DESKTOP_L:1600}},23188:function(e){"use strict";e.exports={"shadow-default":"0px 4px 24px rgba(0, 0, 0, .12)","shadow-default-hover":"0px 12px 36px rgba(0, 0, 0, .2)","shadow-sidebar":"4px 0px 24px rgba(0, 0, 0, .12)","shadow-modal":"0px 18px 30px rgba(51, 51, 51, .52)","shadow-modal-mobile":"0px -16px 28px rgba(51, 51, 51, .24)","shadow-popover":"0px 25px 15px rgba(0, 0, 0, 0.03), 0px 11px 11px rgba(0, 0, 0, 0.04), 0px 3px 6px rgba(0, 0, 0, 0.05)","shadow-dropdown":"0px 25px 15px rgba(0, 0, 0, 0.03), 0px 11px 11px rgba(0, 0, 0, 0.04), 0px 3px 6px rgba(0, 0, 0, 0.05)","shadow-tooltip":"0px 6px 15px rgba(0,0,0,.2)"}},65894:function(e){"use strict";e.exports={"spacing-tiny":"2px","spacing-xxxs":"4px","spacing-xxs":"8px","spacing-xs":"12px","spacing-s":"16px","spacing-m":"20px","spacing-l":"24px","spacing-xl":"32px","spacing-xxl":"48px","spacing-xxxl":"64px","spacing-huge":"128px"}},10521:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,s(r)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=i(t,r));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},65641:function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:function(){return n}})},20986:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(null,arguments)}r.d(t,{Z:function(){return n}})},98393:function(e,t,r){"use strict";function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}r.d(t,{Z:function(){return o}})},33926:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}r.d(t,{Z:function(){return n}})},80476:function(e,t,r){"use strict";r.r(t),r.d(t,{__addDisposableResource:function(){return I},__assign:function(){return s},__asyncDelegator:function(){return T},__asyncGenerator:function(){return k},__asyncValues:function(){return C},__await:function(){return _},__awaiter:function(){return f},__classPrivateFieldGet:function(){return O},__classPrivateFieldIn:function(){return N},__classPrivateFieldSet:function(){return A},__createBinding:function(){return v},__decorate:function(){return a},__disposeResources:function(){return D},__esDecorate:function(){return u},__exportStar:function(){return g},__extends:function(){return o},__generator:function(){return m},__importDefault:function(){return P},__importStar:function(){return M},__makeTemplateObject:function(){return R},__metadata:function(){return h},__param:function(){return c},__propKey:function(){return d},__read:function(){return b},__rest:function(){return i},__runInitializers:function(){return l},__setFunctionName:function(){return p},__spread:function(){return w},__spreadArray:function(){return S},__spreadArrays:function(){return E},__values:function(){return y},default:function(){return j}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,o,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,h=r.length-1;h>=0;h--){var f={};for(var m in n)f[m]="access"===m?{}:n[m];for(var m in n.access)f.access[m]=n.access[m];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var v=(0,r[h])("accessor"===c?{get:d.get,set:d.set}:d[u],f);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(a=i(v.get))&&(d.get=a),(a=i(v.set))&&(d.set=a),(a=i(v.init))&&o.unshift(a)}else(a=i(v))&&("field"===c?o.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0}function l(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function m(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var v=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||v(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function E(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function S(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function k(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof _?Promise.resolve(r.value.v).then(c,u):l(s[0][2],r)}catch(e){l(s[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function T(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:_(e[n](t)),done:!1}:o?o(t):t}:o}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function R(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var x=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&v(t,e,r);return x(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function A(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function N(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function D(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,(function(e){return t(e),r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const j={__extends:o,__assign:s,__rest:i,__decorate:a,__param:c,__metadata:h,__awaiter:f,__generator:m,__createBinding:v,__exportStar:g,__values:y,__read:b,__spread:w,__spreadArrays:E,__spreadArray:S,__await:_,__asyncGenerator:k,__asyncDelegator:T,__asyncValues:C,__makeTemplateObject:R,__importStar:M,__importDefault:P,__classPrivateFieldGet:O,__classPrivateFieldSet:A,__classPrivateFieldIn:N,__addDisposableResource:I,__disposeResources:D}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},n=!0;try{s[e].call(r.exports,r,r.exports,a),n=!1}finally{n&&delete i[e]}return r.exports}a.m=s,a.c=i,e=[],a.O=function(t,r,n,o){if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,n,o]=e[l],i=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var s={};t=t||[null,r({}),r([]),r(r)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=r(i))Object.getOwnPropertyNames(i).forEach((function(t){s[t]=function(){return e[t]}}));return s.default=function(){return e},a.d(o,s),o},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))},a.u=function(e){return e+"."+{mainDefault:"6669531ea44c5249","tramvai-web-performance-rum":"c59f75d3c8c8184e","_video-platform_core_dist_DashPlayer-B4XlVPuW_js":"479dea9f08a323da"}[e]+".chunk.js"},a.miniCssF=function(e){return e+".00a59c4878767e24.chunk.css"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},o="application:pwahelp:unknown:",a.l=function(e,t,r,s){if(n[e])n[e].push(t);else{var i,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+r){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=240,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",o+r),i.src=e,0!==i.src.indexOf(window.location.origin+"/")&&(i.crossOrigin="anonymous")),n[e]=[t];var p=function(t,r){i.onerror=i.onload=null,clearTimeout(h);var o=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),24e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p=window.ap,function(){a.S={};var e={},t={};a.I=function(r,n){n||(n=[]);var o=t[r];if(o||(o=t[r]={}),!(n.indexOf(o)>=0)){if(n.push(o),e[r])return e[r];a.o(a.S,r)||(a.S[r]={});var s=a.S[r],i="application:pwahelp:unknown",c=function(e,t,r,n){var o=s[e]=s[e]||{},a=o[t];(!a||!a.loaded&&(!n!=!a.eager?n:i>a.from))&&(o[t]={get:r,from:i,eager:!!n})},u=[];return"default"===r&&(c("react-dom","18.3.1",(function(){return function(){return a(95468)}}),1),c("react/jsx-runtime","18.3.1",(function(){return function(){return a(57695)}}),1),c("react","18.3.1",(function(){return function(){return a(57203)}}),1)),e[r]=u.length?Promise.all(u).then((function(){return e[r]=1})):1}}}(),function(){var e=function(e){var t=function(e){return e.split(".").map((function(e){return+e==e?+e:e}))},r=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),n=r[1]?t(r[1]):[];return r[2]&&(n.length++,n.push.apply(n,t(r[2]))),r[3]&&(n.push([]),n.push.apply(n,t(r[3]))),n},t=function(t,r){var n=t[r];return Object.keys(n).reduce((function(t,r){return!t||!n[t].loaded&&function(t,r){t=e(t),r=e(r);for(var n=0;;){if(n>=t.length)return n<r.length&&"u"!=(typeof r[n])[0];var o=t[n],s=(typeof o)[0];if(n>=r.length)return"u"==s;var i=r[n],a=(typeof i)[0];if(s!=a)return"o"==s&&"n"==a||"s"==a||"u"==s;if("o"!=s&&"u"!=s&&o!=i)return o<i;n++}}(t,r)?r:t}),0)},r=function(e){return e.loaded=1,e.get()},n=function(e){return function(t,r,n,o){var s=a.I(t);return s&&s.then?s.then(e.bind(e,t,a.S[t],r,n,o)):e(t,a.S[t],r,n,o)}}((function(e,n,o,s){return n&&a.o(n,o)?function(e,n,o,s){var i=t(e,o);return r(e[o][i])}(n,0,o):s()})),o={},s={44121:function(){return n("default","react",(function(){return function(){return a(57203)}}))},90130:function(){return n("default","react/jsx-runtime",(function(){return function(){return a(57695)}}))},90776:function(){return n("default","react-dom",(function(){return function(){return a(95468)}}))}};[44121,90130,90776].forEach((function(e){a.m[e]=function(t){o[e]=0,delete a.c[e];var r=s[e]();if("function"!=typeof r)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=r()}}));var i={};a.f.consumes=function(e,t){a.o(i,e)&&i[e].forEach((function(e){if(a.o(o,e))return t.push(o[e]);var r=function(t){o[e]=0,a.m[e]=function(r){delete a.c[e],r.exports=t()}},n=function(t){delete o[e],a.m[e]=function(r){throw delete a.c[e],t}};try{var i=s[e]();i.then?t.push(o[e]=i.then(r).catch(n)):r(i)}catch(e){n(e)}}))}}(),function(){if("undefined"!=typeof document){var e={platform:0};a.f.miniCss=function(t,r){e[t]?r.push(e[t]):0!==e[t]&&{mainDefault:1}[t]&&r.push(e[t]=function(e){return new Promise((function(t,r){var n=a.miniCssF(e),o=a.p+n;if(function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=(i=r[n]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var i;if((o=(i=s[n]).getAttribute("data-href"))===e||o===t)return i}}(n,o))return t();!function(e,t,r,n,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.onerror=s.onload=function(r){if(s.onerror=s.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=a,s.parentNode&&s.parentNode.removeChild(s),o(c)}},s.href=t,0!==s.href.indexOf(window.location.origin+"/")&&(s.crossOrigin="anonymous"),document.head.appendChild(s)}(e,o,0,t,r)}))}(t).then((function(){e[t]=0}),(function(r){throw delete e[t],r})))}}}(),function(){var e={platform:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=o);var s=a.p+a.u(t),i=new Error;a.l(s,(function(r){if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}}),"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,[s,i,c]=r,u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var l=c(a)}for(t&&t(r);u<s.length;u++)o=s[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},r=self.wsp=self.wsp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),a.nc=void 0;var c=a.O(void 0,["react"],(function(){return a(25496)}));c=a.O(c)}();